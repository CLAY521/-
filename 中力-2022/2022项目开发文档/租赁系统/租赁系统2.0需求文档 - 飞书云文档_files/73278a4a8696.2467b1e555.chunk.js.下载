(window.webpackJsonp=window.webpackJsonp||[]).push([["73278a4a8696"],{vb1953:function(e,r,c){"use strict";c.r(r),function(z){c.d(r,"EditFieldDescription",function(){return i});var F,e,t=c("vb152"),L=c.n(t),W=c("vb143"),Q=c("vb154"),P=c("vb103"),V=c.n(P),n=c("vb159"),J=c.n(n),K=c("vb111"),_=c("vb334"),q=c("vb976"),H=c("vb346");c("vb147"),c("vb148"),c("vb129"),c("vb223"),c("vb214"),c("vb232"),c("vb187"),c("vb174"),c("vb225"),c("vb224"),c("vb128"),c("vb122"),c("vb115"),c("vb112"),c("vb118"),c("vb119"),c("vb113"),c("vb167"),c("vb164"),c("vb233"),c("vb234"),c("vb235"),c("vb123"),c("vb236"),c("vb193"),c("vb237"),c("vb155"),c("vb238"),c("vb124"),c("vb239"),c("vb104"),c("vb116"),c("vb120"),c("vb121"),c("vb117"),c("vb240"),c("vb134"),c("vb131"),c("vb226"),c("vb241"),c("vb114"),c("vb110"),c("vb125"),c("vb242"),c("vb127"),c("vb132"),c("vb227"),c("vb135"),c("vb228"),c("vb229"),c("vb133"),c("vb126"),c("vb243"),c("vb262"),c("vb244"),c("vb245"),c("vb246"),c("vb247"),c("vb194"),c("vb248"),c("vb249"),c("vb201"),c("vb260"),c("vb267"),c("vb250"),c("vb136"),c("vb251"),c("vb130"),c("vb252");function i(o){var e,t,n,i,r,c=o.x,a=o.y,l=o.isShow,u=o.viewId,b=o.table,v=o.field,d=V.a.useRef(null),s=V.a.useRef(null),m=Object(P.useState)(!(null!==(e=o.field)&&void 0!==e&&null!==(t=e.description)&&void 0!==t&&t.disableSync)),f=Object(W.xz)(m,2),p=f[0],y=f[1],w=Object(P.useState)(!1),C=Object(W.xz)(w,2),E=C[0],j=C[1],I=Object(P.useState)(!1),g=Object(W.xz)(I,2),B=g[0],S=g[1],O=Object(P.useState)(!1),N=Object(W.xz)(O,2),U=N[0],R=N[1],h=null==b?void 0:b.views.find(function(e){return e.type===W.az.Form}),x=function(){S(!1),setTimeout(function(){S(!0)},0)},M=function(e){var t;o.isShow&&(e&&E||(S(!1),j(!1),null===(t=o.onCancel)||void 0===t||t.call(o)))},D=function(e,t){W.cz.collectClickEvent(W.Bc.CcmBitableFieldDescriptionClick,Object.assign({click:e},t))};Object(P.useEffect)(function(){if(l){var e;W.cz.collectBitableEvent(W.Rw.CcmBitableFieldDescriptionModifyView);var t=null===(e=s.current)||void 0===e?void 0:e.editorReact;t&&t.focus(),setTimeout(function(){t&&t.focus()},0)}},[l,null==v?void 0:v.id]),Object(P.useEffect)(function(){var e,t;y(!Boolean(null===(e=o.field)||void 0===e||null===(t=e.description)||void 0===t?void 0:t.disableSync))},[null===(n=o.field)||void 0===n||null===(i=n.description)||void 0===i?void 0:i.disableSync]),Object(P.useEffect)(function(){var e=function(e){e.keyCode===W.sx.Esc&&M(!0)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[E]),Object(H.p)(d,function(){M(!0)},"all");var Z=function(){var e,t,n,i,r,c=!(null!==(e=o.field.description)&&void 0!==e&&e.disableSync)!==p,a=null===(t=s.current)||void 0===t||null===(n=t.editorReact)||void 0===n?void 0:n.getSegmentArray();return!!(0!==(null==a?void 0:a.length)||null!==(i=o.field.description)&&void 0!==i&&i.content)&&(!Object(Q.a)(a,null===(r=o.field.description)||void 0===r?void 0:r.content)||c)},T=function(e){var t,n,i=null===(t=s.current)||void 0===t||null===(n=t.editorReact)||void 0===n?void 0:n.getSegmentArray();if(i){var r=Object(_.b)(i);D(e,{target:W.Rw.CcmBitableDescriptionUpdateConfirmView,is_update:String(p),link_count:r.linkCount,file_count:r.fileCount}),o.bitableStore.getCommandManager().execute({cmd:W.Fy.SetFieldAttr,tableId:b.id,viewId:u,fieldId:v.id,data:{description:{content:i,disableSync:!p}}})}},k=function(n){if(Z()){if(p&&h)return W.cz.collectBitableEvent(W.Rw.CcmBitableDescriptionUpdateConfirmView),void Object(W.rB)({title:z("Bitable_Field_SyncFieldDescPopupTitle"),message:z("Bitable_Field_SyncFieldDescPopupDesc"),closeble:!1,buttons:[{text:z("common.cancel"),onClick:function(){W.cz.collectClickEvent(W.Bc.CcmBitableUpdateConfirmClick,{click:"cancel",target:W.Rw.None})}},{text:z("Bitable_Field_SyncFieldDescPopupButtonSync"),type:W.YA.primary,onClick:function(){var e=Object(W.uY)(L.a.mark(function e(){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:W.cz.collectClickEvent(W.Bc.CcmBitableUpdateConfirmClick,{click:"confirm",target:W.Rw.None}),T(n),M(!1);case 3:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}]});T(n),M(!1)}else M(!1)};return l?V.a.createElement("div",{className:"field-desc-wrapper",ref:d},V.a.createElement(W.wR,{x:c,y:a},V.a.createElement("div",{className:"field-desc-container J-bitable-field-container"},V.a.createElement("div",{className:"b-field-form b-p-relative b-description-edit-container",ref:d},V.a.createElement("label",{className:"b-field-label",htmlFor:""},V.a.createElement("span",{className:"b-field-label__text"},z("Bitable_Field_FieldDesc"))),V.a.createElement(_.a,{ref:s,bitableStore:o.bitableStore,initialValue:(null===(r=o.field.description)||void 0===r?void 0:r.content)||[],editable:!0,onEnterKeyDown:function(){U||k(F.Save)},onBlur:function(){return D(F.EditBox,{target:W.Rw.None})},placeHolder:z("Bitable_Field_PleaseEnterFieldDesc"),onChange:function(e){E||j(!0),R(e.current.getActiveZone().totalWidth()>q.a)}}),h?V.a.createElement(K.Checkbox,{checked:p,style:{marginBottom:56,marginTop:8},onChange:function(e){D(F.UpdateButton,{target:W.Rw.None,is_update:String(e.target.checked)}),y(e.target.checked),E||j(!0)}},z("Bitable_Field_SyncFieldDescToForm")):V.a.createElement("div",{style:{height:56}}),V.a.createElement(K.Space,{size:"medium",style:{position:"absolute",right:0,bottom:0}},V.a.createElement(K.Button,{style:{width:80},type:"default",onClick:function(){M(!1),D(F.Cancel,{target:W.Rw.None})}},z("Bitable_Common_ButtonCancel")),V.a.createElement(K.Button,{style:{width:80},type:"primary",onClick:function(){k(F.Confirm)},disabled:U,className:J()("bitable-button-confirm",{toAnimation:B})},z("Bitable_Common_Save")))),E&&V.a.createElement("div",{className:"b-field-shade light-scrollbar",onScroll:x,onClick:x},V.a.createElement("div",{className:"b-field-shade-scroll"}))))):null}(e=F||(F={})).EditBox="edit_box",e.UpdateButton="update_button",e.Cancel="cancel",e.Confirm="confirm",e.Save="save"}.call(this,c("vb163"))},vb334:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});var i=n("vb152"),r=n.n(i),c=n("vb143");function a(e){var t=0,n=0;return e.forEach(function(e){switch(e.type){case c.Vy.Url:t+=1;break;case c.Vy.Mention:n+=1}}),{linkCount:t,fileCount:n}}var o=Object(c.Ty)(Object(c.Uy)(Object(c.uY)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e("45c48cce2e2d"),n.e("202cb962ac59")]).then(n.bind(null,"vb596"));case 2:return e.abrupt("return",e.sent.DescriptionEditor);case 3:case"end":return e.stop()}},e)}))))},vb337:function(e,t,n){"use strict";var i=n("vb313"),v=n("vb343"),d=n("vb499");function r(e,t,n,i){for(var r=n-1,c=e.length;++r<c;)if(i(e[r],t))return r;return-1}var s=r,m=n("vb430"),f=n("vb432"),p=Array.prototype.splice;function c(e,t,n,i){var r=i?s:d.a,c=-1,a=t.length,o=e;for(e===t&&(t=Object(f.a)(t)),n&&(o=Object(v.a)(e,Object(m.a)(n)));++c<a;)for(var l=0,u=t[c],b=n?n(u):u;-1<(l=r(o,b,l,i));)o!==e&&p.call(o,l,1),p.call(e,l,1);return e}var a=c;function o(e,t,n){return e&&e.length&&t&&t.length?a(e,t,Object(i.a)(n,2)):e}t.a=o},vb346:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return E}),n.d(t,"d",function(){return O}),n.d(t,"e",function(){return B}),n.d(t,"f",function(){return N}),n.d(t,"g",function(){return S}),n.d(t,"h",function(){return w}),n.d(t,"i",function(){return U}),n.d(t,"j",function(){return p}),n.d(t,"k",function(){return j}),n.d(t,"l",function(){return C}),n.d(t,"m",function(){return s}),n.d(t,"n",function(){return m}),n.d(t,"o",function(){return g}),n.d(t,"p",function(){return y});var i,u=n("vb143"),b=n("vb337"),r=n("vb200"),c=(n("vb147"),n("vb103")),a=(n("vb148"),n("vb152"),n("vb112"),n("vb164"),n("vb167"),n("vb113"),"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHZpZXdCb3g9IjAgMCA3MiA3MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxjaXJjbGUgZmlsbD0iI0JCQkZDNCIgY3g9IjM2IiBjeT0iMzYiIHI9IjM2Ii8+PHBhdGggZD0iTTMwIDM3aDEyYzUuNTIzIDAgMTIgNC4yODYgMTIgMTJ2NGEyIDIgMCAwIDEtMiAySDIwYTIgMiAwIDAgMS0yLTJ2LTRjMC03LjcwOCA2LjQ3Ny0xMiAxMi0xMnptNi0yYy01LjUyMyAwLTEwLTQuNDc3LTEwLTEwczQuNDc3LTEwIDEwLTEwIDEwIDQuNDc3IDEwIDEwLTQuNDc3IDEwLTEwIDEweiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg=="),o="data:image/png;base64,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",l=Object(u.Bm)("Bitable_Advanced_Permission_CollaboratorOrganizationUrl"),v=(Object(u.Ww)(i={},u.Br.USER_GROUP,o),Object(u.Ww)(i,u.Br.DEPARTMENT,l),i);function d(e){return v[e]||a}function s(){return"en"===u.ob.I18nConfig.language}function m(e){var t=e.avatar_url;t||(t=d(e.owner_type));var n=e.display_name;return n||(n=s()&&e.en_name?e.en_name:e.owner_name),{memberId:e.owner_id,memberType:e.owner_type,memberName:n,memberAvatarUrl:t,memberDepartmentName:e.department_name,memberEnName:e.en_name,memberCrossTenant:e.is_external||e.is_cross_tenant}}function f(e){return{owner_id:e.memberId,owner_type:e.memberType}}var p=function(e){var t=e.entities,n=e.owners,r=t.users;return n.map(function(e){var t=r[e.owner_id],n=Object(u.Ux)(null==t?void 0:t.display_name),i=Object(u.Ux)(null==t?void 0:t.display_name,"en");return Object.assign({},e,{en_name:i||e.owner_name,owner_name:n||e.owner_name})})};function y(n,i){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"left";Object(c.useEffect)(function(){function e(e){var t;null!==(t=n.current)&&void 0!==t&&t.contains(e.target)||i()}var t="click";return"all"===r&&(t="mousedown"),window.addEventListener(t,e),function(){return window.removeEventListener(t,e)}},[i,n])}function w(e,t){var n={perm:u.Os.EDIT,tableId:e};return Object(u.jD)()&&(n.schemaVersion=u.Sx.FieldInvisible),t&&(n.perm=u.Os.READ),n}function C(e){return Object.assign({},Object(r.a)(e,["createdTime","updatedTime"]),{tableRoleMap:e.tableRoleMap||{}})}function E(e){var t=e.role,n=e.isDefaultEditRole,i=e.isDefaultReadRole,r=e.extraEditMembers,c=e.extraReadMembers,a=(t.members||[]).slice();if(n){var o=Object(b.a)(r,a,"memberId");a.push.apply(a,Object(u.hI)(o))}if(i){var l=Object(b.a)(c,a,"memberId");a.push.apply(a,Object(u.hI)(l))}return a.map(function(e){var t=e.memberType,n=e.memberAvatarUrl,i=n;return n||(i=d(t)),Object.assign({},e,{memberAvatarUrl:i})})}new Set([u.Br.USER,u.Br.SPACE_USER,u.Br.GROUP,u.Br.DEPARTMENT]);var j=function(e){return e.memberType===u.Br.USER||e.memberType===u.Br.SPACE_USER},I=function(e){return e.memberType===u.Br.NEW_WIKI_ADMIN||e.memberType===u.Br.NEW_WIKI_MEMBER},g=function(e,t){var n=j(e);if(e&&n&&t)return u.lx.open({name:e.memberName,token:e.memberId,rect:t,mentionType:u.mx.User})},B=function(){u.lx.close()},S=function(){var e;return Boolean(null===(e=u.ob.MinaConfig)||void 0===e?void 0:e.getMinaBooleanConfig(u.JF.BitableRolePermQuota,!1))},O=function(e,t){if(!S())return!1;var n=e.tableRoleMap,i=void 0===n?{}:n;return Object.values(i).some(function(e){return Boolean(e.recRule&&!1===t.rowPermitted)||Boolean(e.fieldPermV2&&!1===t.fieldPermitted)})},N=function(){try{var e=u.ob.store;return Object(u.uT)(e.getState())}catch(e){return console.error(e),!0}},U=function(e){return I(e)?"".concat(e.memberId,"-").concat(e.memberType):e.memberId}},vb976:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=2e3}}]);
//# sourceMappingURL=//slardar.bytedance.net/api_v2/browser/jserr/get_sourcemap?bid=docs_pc&js_filename=73278a4a8696.2467b1e555.chunk.js