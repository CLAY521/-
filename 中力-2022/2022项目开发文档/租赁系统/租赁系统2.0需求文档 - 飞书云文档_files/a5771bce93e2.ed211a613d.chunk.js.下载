(window.webpackJsonp=window.webpackJsonp||[]).push([["a5771bce93e2"],{vb1279:function(e,i,s){"use strict";s.r(i),function(o){s.d(i,"GroupTitleUserEditor",function(){return r});var u=s("vb143"),a=s("vb145"),e=s("vb103"),c=s.n(e),t=(s("vb147"),s("vb148"),s("vb152"),s("vb112"),s("vb164"),s("vb167"),s("vb113"),s("vb155"),s("vb116"),s("vb118"),s("vb120"),s("vb174"),s("vb119"),s("vb121"),s("vb117"),s("vb115"),s("vb483")),n=s("vb395"),b=s("vb344"),r=(s("vb129"),s("vb223"),s("vb214"),s("vb232"),s("vb187"),s("vb225"),s("vb224"),s("vb128"),s("vb122"),s("vb233"),s("vb234"),s("vb235"),s("vb123"),s("vb236"),s("vb193"),s("vb237"),s("vb238"),s("vb124"),s("vb239"),s("vb111"),s("vb104"),s("vb159"),s("vb240"),s("vb134"),s("vb131"),s("vb226"),s("vb241"),s("vb114"),s("vb110"),s("vb125"),s("vb242"),s("vb127"),s("vb132"),s("vb227"),s("vb135"),s("vb228"),s("vb229"),s("vb133"),s("vb126"),s("vb243"),s("vb262"),s("vb244"),s("vb245"),s("vb246"),s("vb247"),s("vb194"),s("vb248"),s("vb249"),s("vb201"),s("vb260"),s("vb267"),s("vb250"),s("vb136"),s("vb251"),s("vb130"),s("vb252"),function(i){function s(){var r;Object(u.ov)(this,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=i.call.apply(i,[this].concat(t))||this).editorRef=null,r.isSearched=!1,r.menuHeight=35,r.preventOpen=!1,r.state={noSearchData:!1,shouldNotifyLark:!!r.props.shouldNotifyLark,options:[],values:[],userIdItemMap:{},position:{x:0,y:0}},r.setEditorRef=function(e){r.editorRef=e},r.onSearch=function(e){r.searchUsers(e)},r.onDropdownVisibleChange=function(e,t){e?t&&(r.isDropdownReverse=t.reverse,r.updatePosition()):r.searchUsers("")},r.onMultiChange=function(t){var e=r.state.options.find(function(e){return e.userId===t}),n=Object.assign({},e,{notify:!1});r.props.onMultiChange({id:t,userData:n})},r.executeAction=function(e){},r}return Object(u.bu)(s,i),Object(u.Pw)(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.bitableStore,n=e.groupValue,r=e.tableId,i=t.base.getTableById(r);if(n){var s=Object.assign({},i.getUserItemById(n),{userId:n});this.setState({selectedUser:s,values:[s.userId]})}this.bindDataSource()}},{key:"componentDidUpdate",value:function(e){e.tableId===this.props.tableId&&e.fieldId===this.props.fieldId||this.bindDataSource()}},{key:"focus",value:function(){this.editorRef&&this.editorRef.focus(),this.updatePosition()}},{key:"onStartEdit",value:function(){this.editorRef&&this.editorRef.onStartEdit(),this.searchUsers("")}},{key:"onEndEdit",value:function(){this.editorRef&&this.editorRef.onEndEdit()}},{key:"setDefaultValue",value:function(){this.setEditorValue(this.props.value||null)}},{key:"setEditorValue",value:function(e){}},{key:"bindDataSource",value:function(){this.isSearched=!1,this.searchUsers("")}},{key:"searchUsers",value:function(e){var r=this;e&&(this.isSearched=!0),this.setState({noSearchData:!1});var t=this.props.bitableStore,n=Object(u.Ry)(t);Object(u.mJ)({content:e,source:n,token:u.ob.CommonUtil.getToken(),type:String(u.EH.USER)},function(e){var t=Object(a.a)(e,"data.entities.users",{}),n=Object(a.a)(e,"data.result_list",[]).filter(function(e){return e.type===u.EH.USER&&t[e.token]}).map(function(e){return t[e.token]});r.setUsers(n)})}},{key:"setUsers",value:function(e){var n=this,r=e.map(t.a);this.state.values.forEach(function(t){!r.find(function(e){return e.userId===t})&&n.state.userIdItemMap[t]&&r.push(n.state.userIdItemMap[t])}),this.setState({options:r,noSearchData:!e.length},function(){return n.updatePosition()})}},{key:"updatePosition",value:function(){if(!this.props.staticPosition){var e=Object(u.rI)(this.props.renderer);e&&this.setState({position:{y:e,x:0}})}}},{key:"getSelectorCellPosition",value:function(){if(this.props.staticPosition)return{};var e=this.state.position;return{left:-13,width:(this.props.width?Math.max(n.b,this.props.width):0)||"100%",top:e.y}}},{key:"render",value:function(){var e=Object(u.nJ)(this.state.options,"userId"),t=Object.assign({},e,{},this.state.userIdItemMap),n=this.props,r=n.editable,i=n.maxListHeight,s=n.minContentHeight,a=n.relativeClass;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"group-title-user-input",onMouseUp:function(e){return e.stopPropagation()}},this.state.selectedUser&&c.a.createElement(u.Vw,{item:this.state.selectedUser,showClose:!1,language:u.ob.I18nConfig.language}),!this.state.selectedUser&&c.a.createElement("div",{className:"group-title-user-input-placeholder"},o("smartable.kanban.add_group.user.placeholder"))),c.a.createElement(b.c,{className:"selector-cell user-editor",ref:this.setEditorRef,options:this.state.options,style:this.getSelectorCellPosition(),language:u.ob.I18nConfig.language,userIdItemMap:t,disableBlankOption:!0,values:this.state.values,editable:r,maxListHeight:i,anchorHeight:36,relativeClass:a,isMultiple:!1,minContentHeight:s,onSearch:this.onSearch,onOptionClick:this.onMultiChange,onDropdownVisibleChange:this.onDropdownVisibleChange,onShowUser:function(e,t){u.lx.open({name:"en"===u.ob.I18nConfig.language&&e.enName?e.enName:e.name,token:e.userId,rect:t,mentionType:u.mx.User})},onHideUser:function(){u.lx.close()}}))}}]),s}(c.a.PureComponent));r.defaultProps={shouldNotifyLark:!0,maxListHeight:n.c,minContentHeight:n.d}}.call(this,s("vb163"))},vb344:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return u});var r=n("vb152"),i=n.n(r),s=n("vb143"),a=Object(s.Uy)(Object(s.uY)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("d645920e395f").then(n.bind(null,"vb485"));case 2:return e.abrupt("return",e.sent.SingleSelectorEditor);case 3:case"end":return e.stop()}},e)}))),o=Object(s.Uy)(Object(s.uY)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("d67d8ab4f4c1").then(n.bind(null,"vb486"));case 2:return e.abrupt("return",e.sent.MultiSelectorEditor);case 3:case"end":return e.stop()}},e)}))),u=Object(s.Uy)(Object(s.uY)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("3416a75f4cea").then(n.bind(null,"vb487"));case 2:return e.abrupt("return",e.sent.UserSelectorEditor);case 3:case"end":return e.stop()}},e)})))},vb395:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s});var r=183,i=280,s=35,a=215,o=325},vb483:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return{userId:e.id,name:e.cn_name,enName:e.en_name,avatarUrl:e.avatar_url,department:e.department,isExternal:e.is_external,displayName:e.display_name}}}}]);
//# sourceMappingURL=//slardar.bytedance.net/api_v2/browser/jserr/get_sourcemap?bid=docs_pc&js_filename=a5771bce93e2.ed211a613d.chunk.js