(window.webpackJsonp=window.webpackJsonp||[]).push([["66f041e16a60"],{vb954:function(e,a,i){"use strict";i.r(a),function(f){i.d(a,"NumberEditor",function(){return n});var u=i("vb143"),e=i("vb103"),h=i.n(e),m=(i("vb147"),i("vb148"),i("vb111")),N=i("vb2170"),t=i("vb159"),g=i.n(t),y=(i("vb129"),i("vb152"),i("vb223"),i("vb214"),i("vb232"),i("vb187"),i("vb174"),i("vb225"),i("vb224"),i("vb128"),i("vb122"),i("vb115"),i("vb112"),i("vb118"),i("vb119"),i("vb113"),i("vb167"),i("vb164"),i("vb233"),i("vb234"),i("vb235"),i("vb123"),i("vb236"),i("vb193"),i("vb237"),i("vb155"),i("vb238"),i("vb124"),i("vb239"),i("vb104"),i("vb116"),i("vb120"),i("vb121"),i("vb117"),i("vb240"),i("vb134"),i("vb131"),i("vb226"),i("vb241"),i("vb114"),i("vb110"),i("vb125"),i("vb242"),i("vb127"),i("vb132"),i("vb227"),i("vb135"),i("vb228"),i("vb229"),i("vb133"),i("vb126"),i("vb243"),i("vb262"),i("vb244"),i("vb245"),i("vb246"),i("vb247"),i("vb194"),i("vb248"),i("vb249"),i("vb201"),i("vb260"),i("vb267"),i("vb250"),i("vb136"),i("vb251"),i("vb130"),i("vb252"),"".concat("bitable-5a92a9","__number-editor")),n=function(n){function a(e){var s;Object(u.ov)(this,a),(s=n.call(this,e)||this).editorRef=null,s.canInput=!0,s.state={value:"",tipVisible:!1,isFocus:!1},s.setHiddenFocusElement=function(e){s.hiddenFocusElement=e},s.updateNumberValue=function(e){s.props.isPercentage&&null!==e&&(e=Object(u.XP)(e));var t=s.props.onChange;t&&t(e),s.canInput=!0},s.updateValue=function(e){var t=e.target.value,n=Object(u.YP)(t);if(Object(u.FN)(t)){s.setState({value:t});var a=Object(u.GN)(t);s.updateNumberValue(a)}else Number.isNaN(n)?(s.canInput&&s.props.editable&&s.setState({tipVisible:!0},function(){setTimeout(function(){s.setState({tipVisible:!1})},2e3)}),s.canInput=!1):(s.setState({value:n.toString()}),s.updateNumberValue(n))},s.setEditorRef=function(e){s.editorRef=e},s.getNumberValue=function(){var e=s.props,t=e.isPercentage,n=e.isCardEdit,a=e.formatter,i=e.isNumberBizField,u=s.state,r=u.value,b=u.isFocus,v=null==r?"":r;if(!v||b)return v;if(t)return v+"%";if(n){var l=a(s.props.value);if(l&&Number.isNaN(parseInt(l[0],10))&&!i)return l}return v};var t=null!=e&&e.isPercentage?s.getShowPercentageValue(e.value):e.value;return s.state.value=s.getTextNumberValue(t),s}return Object(u.bu)(a,n),Object(u.Pw)(a,[{key:"getShowPercentageValue",value:function(e){var t=this.props.isPercentage;return null==e||null==e?null:Array.isArray(e)?t?e.map(function(e){return Object(u.ZP)(e)}):e:t?Object(u.ZP)(e):e}},{key:"getTextNumberValue",value:function(e){return null==e?"":Array.isArray(e)?e.toString():Object(u.aQ)(e.toString())}},{key:"setDefaultValue",value:function(){this.setEditorValue(this.props.value)}},{key:"setEditorValue",value:function(e){var t,n,a=this.props.isPercentage;null!==e&&(t=this.getTextNumberValue(e),a&&(n=this.getTextNumberValue(this.getShowPercentageValue(e)))),t=t||"",n=n||"",this.setState({value:a?n:t});var i=this.props.onChange;i&&i(Object(u.GN)(t))}},{key:"focus",value:function(){this.editorRef&&this.editorRef.focus()}},{key:"blur",value:function(){this.editorRef&&this.editorRef.blur()}},{key:"onEndEdit",value:function(e){this.setState({tipVisible:!1})}},{key:"setSelectionToEnd",value:function(){}},{key:"onStartEdit",value:function(e,t){t&&((Array.isArray(e)||"number"==typeof e&&!Number.isNaN(e))&&this.setEditorValue(e),this.setSelectionToEnd())}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.style,i=t.placeholder,u=t.isNumberBizField,r=t.textAlign,b=t.focusable,v=t.inputType,l=void 0===v?"text":v,s=t.inputMode,o=void 0===s?"text":s,c=this.state,p=c.tipVisible,d=c.isFocus;return h.a.createElement(m.Popover,{content:u&&h.a.createElement("div",{className:"".concat(y,"__content-valid")},h.a.createElement(N.a,null),h.a.createElement("span",{className:"".concat(y,"__content-valid__text")},f("bitable.number_field_not_valid_content"))),visible:p,placement:"top"},h.a.createElement("div",{className:g()(y,"bitable-number-editor",b&&"".concat(y,"--hover"),d&&"".concat(y,"--focused"),n),style:a},h.a.createElement("input",{type:l,style:{textAlign:r},placeholder:i,value:this.getNumberValue(),ref:this.setEditorRef,onChange:this.updateValue,readOnly:!this.props.editable,onFocus:b?function(){return e.setState({isFocus:!0})}:void 0,onBlur:b?function(){return e.setState({isFocus:!1})}:void 0,inputMode:o})))}}]),a}(h.a.Component);n.defaultProps={value:null,editable:!0,focusable:!0}}.call(this,i("vb163"))}}]);
//# sourceMappingURL=//slardar.bytedance.net/api_v2/browser/jserr/get_sourcemap?bid=docs_pc&js_filename=66f041e16a60.cde9fbfbc1.chunk.js