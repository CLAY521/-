(window.webpackJsonp=window.webpackJsonp||[]).push([["72b32a1f754b"],{vb1288:function(e,u,b){"use strict";b.r(u),function(y){b.d(u,"LookupFieldPanel",function(){return o});var e,F=b("vb143"),t=b("vb103"),S=b.n(t),i=(b("vb147"),b("vb148"),b("vb152"),b("vb112"),b("vb164"),b("vb167"),b("vb113"),b("vb155"),b("vb111")),a=b("vb159"),n=b.n(a),O=b("vb2182"),l=b("vb2177"),r=(b("vb116"),b("vb118"),b("vb120"),b("vb174"),b("vb119"),b("vb121"),b("vb117"),b("vb115"),b("vb129"),b("vb223"),b("vb214"),b("vb232"),b("vb187"),b("vb225"),b("vb224"),b("vb128"),b("vb122"),b("vb233"),b("vb234"),b("vb235"),b("vb123"),b("vb236"),b("vb193"),b("vb237"),b("vb238"),b("vb124"),b("vb239"),b("vb104"),b("vb240"),b("vb134"),b("vb131"),b("vb226"),b("vb241"),b("vb114"),b("vb110"),b("vb125"),b("vb242"),b("vb127"),b("vb132"),b("vb227"),b("vb135"),b("vb228"),b("vb229"),b("vb133"),b("vb126"),b("vb243"),b("vb262"),b("vb244"),b("vb245"),b("vb246"),b("vb247"),b("vb194"),b("vb248"),b("vb249"),b("vb201"),b("vb260"),b("vb267"),b("vb250"),b("vb136"),b("vb251"),b("vb130"),b("vb252"),null===(e=F.ob.MinaConfig)||void 0===e?void 0:e.getMinaStringConfig(F.JF.BitableLookupConditionMaxSizeLimit,"5"));r=Number.parseInt(r,10);var d=32,s=8,c=F.Xw.Is,o=function(a){function o(e){var T;Object(F.ov)(this,o),(T=a.call(this,e)||this).allTableRecordReadable=!0,T.setFieldDataSource=function(e,o,i){var n=i.base.getTableById(o);n&&e.forEach(function(e){switch(e=n.getField(e.id),Object(F.GL)(e).field.type){case F.og.User:case F.og.CreatedUser:case F.og.ModifiedUser:var t=new F.yO(o,e.id,i);T.setStateFromUserOptionsData(e.id,t.getSource());break;case F.og.DuplexLink:case F.og.SingleLink:var a=new F.xO(o,e,i);T.setStateFromLinkOptionsData(e.id,a.getSource())}})},T.handleTableLoaded=function(e){e===T.state.searchTableId&&T.forceUpdate()},T.checkTableLoaded=function(e){var t=T.props.bitableStore.base,a=t.getTableById(e);a&&a.status===F.gA.NotLoad&&t.fetchTable(e)},T.onSelectDropDownItem=function(e,t){T.setState(Object(F.Ww)({},e,t),function(){"searchTableId"===e?(T.updateDataSourceList(t.toString()),T.resetLookupInfoIfNotValid()):T.updateCheckHook()})},T.collectClickEvent=function(e){F.cz.collectBitableEvent(F.Bc.CcmBitableLookupFieldFormatModifyClick,{click:e,target:F.oz})},T.collectSubmitEvents=function(){var e=T.props,t=e.bitableStore,a=e.tableId,o=T.state,i=o.searchTableId,n=o.searchFieldId,l=o.filterConjunction,r=o.filterConditions,d=o.rollupVal;if(i&&n){var s=t.base.getTableById(i),c=t.base.getTableById(a);if(s&&c){var u=s.getField(n);if(u){var b,v,p=T.getFormatName(),f=p===F.rK.CURRENCY,h=T.getFormatCode();f&&(b=h&&(null===(v=Object(F.CN)(h))||void 0===v?void 0:v.decimalDigits)),F.cz.collectBitableEvent(F.Bc.CcmBitableLookupFieldSubmitClick,{result_field_type:F.lC[u.fieldUIType],filter_conjunction:F.zO[l],condition_count:r.length,rollup:F.AO[d],digital_format:p,click:F.BO.Confirm,target:F.oz,currency_type:f?T.getCurrencyCode():"none",decimal_digits_type:f?F.CO[b]:"none"}),r.forEach(function(e){var t="",a="";if(e.source){var o=s.getField(e.source);o&&(t=F.lC[o.fieldUIType]||"")}if(e.constantMode)a=F.uP;else if(e.target){var i=c.getField(e.target);i&&(a=F.lC[i.fieldUIType]||"")}F.cz.collectBitableEvent(F.Bc.CcmBitableLookupFieldSubmitClick,{source_field_type:t,operator:F.DO[e.operator],target_field_type:a,click:F.BO.Confirm,target:F.oz})})}}}},T.onSelectFormatter=function(e){var t=e===F.rK.CURRENCY;T.setState({isCurrencytFormatCode:t},function(){T.props.updatePosition&&T.props.updatePosition()}),F.cz.collectBitableEvent(F.Bc.CcmBitableLookupFieldFormatModifyClick,{click:e,target:F.oz})},T.validLookup=function(){var e=T.props.bitableStore,t=T.state,a=t.searchTableId,o=t.searchFieldId,i=t.filterConjunction,n=t.filterConditions,l=!e.base.isDeniedTable(a||"");return 1<n.length?a&&o&&l&&i&&T.validCondition():a&&o&&l&&T.validCondition()},T.validFieldConfig=function(){var e=T.validLookup(),t=T.validProperty(!1),a=e&&t;return a||(T.setState({filterConditions:T.processConstantValues(T.state.filterConditions)}),T.props.changeConfirmBtn(!0)),a},T.hasSelectedLookupTable=function(){var e=T.state.searchTableId,t=T.props.bitableStore;if(e){var a=t.base.getTableById(e),o=t.base.isDeniedTable(e);if(a&&!o)return!0}return!1},T.handleConjunctionChange=function(e){T.setState({filterConjunction:e}),T.collectClickEvent(F.zO[e])},T.renderSelectTable=function(){var e,t=T.tableInvalidInfo,a=t.invalidText,o=t.invalid,i=t.isDenied,n=t.errorInfo,l=T.fieldInvalidInfo,r=l.invalidText,d=l.invalid,s=l.isDenied,c=l.errorInfo,u=T.props,b=u.bitableStore,v=u.renderer,p=T.state,f=p.searchTableId,h=p.searchFieldId;b.isEmbeddedInDoc&&(e=Object(F.Az)(v.reduxStore.getState()));var m=b.base.getValidTableInfo(e).filter(function(e){return T.checkTableAllRecordReadable(e.id)}).map(function(e){return{value:e.id,text:e.name,icon:S.a.createElement(O.a,null)}});(d||o)&&T.props.changeConfirmBtn(!0);var C=!T.hasSelectedLookupTable(),g=T.getFieldDropDownItemByTable(f),I=g.fieldItems,k=g.tableName;return T.allTableRecordReadable||m.push({disabled:!0,value:"",text:y("Bitable_AdvancedPermission_NoPermTableFiltered_Toast"),title:y("Bitable_AdvancedPermission_NoPermTableFiltered_Toast"),className:"permission-info"}),S.a.createElement("div",null,S.a.createElement("div",{className:"lookup-search-title-wrap"},S.a.createElement("div",{className:"field-item-title"},y("Bitable_Lookup_SearchRange"))),S.a.createElement("div",{className:"lookup-search-item"},S.a.createElement(F.Tw,{options:m,selected:f,optionMinWidth:F.EO,placeholder:y("Bitable_Lookup_SelectTargetTable"),className:F.FO,showSelectedIcon:!0,optionHeight:F.hP,enableEllipsisHoverTip:!0,showInvalidIcon:o,invalidValue:o,tooltipWithInvalidIcon:a,overlayClassName:F.iP,isDenied:i,onChange:function(e){T.checkTableLoaded(e),T.onSelectDropDownItem("searchTableId",e),T.collectClickEvent(F.BO.SelectRangeTable)},onTooltipsHover:T.collectTooltipsHoverEventGenerator(null==n?void 0:n.info)}),S.a.createElement(F.Tw,{options:I,disabled:C,supportToggle:!C,selected:h,optionMinWidth:F.EO,placeholder:y("Bitable_Lookup_SelectTargetField"),className:F.FO,showSelectedIcon:!0,optionHeight:F.hP,dropDownTitle:k,enableEllipsisHoverTip:!0,overlayClassName:F.iP,showInvalidIcon:d,invalidValue:d,tooltipWithInvalidIcon:r,isDenied:s||i,onChange:function(e){T.onSelectDropDownItem("searchFieldId",e),T.collectClickEvent(F.BO.SelectRangeField)},onTooltipsHover:T.collectTooltipsHoverEventGenerator(null==c?void 0:c.info)})))},T.getFieldMap=function(e,t){var a=T.props.bitableStore,o=t.views[0];return T.props.tableId===e&&(o=t.getViewById(T.props.renderer.getActiveViewId())||t.views[0]),(o&&o.getAllFields()||Object.keys(t.fields)).filter(function(e){return Object(F.CJ)(a,t.id,e)})},T.validProperty=function(){var e,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],a=T.props,o=a.bitableStore,i=a.tableId,n=a.field,l=T.state.searchFieldId,r=Object(F.jP)(T.state,o.base),d=T.validator.validateFilterProperty(l||"",i,o.base,r,{sourceFilterInfo:t?(null==n||null===(e=n.property)||void 0===e?void 0:e.filterInfo)||r:void 0}),s=d.errors,c=d.errorMap,u=0===s.length;return T.setState({errorMap:c}),u},T.getFieldDropDownItemByTable=function(t){if(!t)return{fieldItems:[],tableName:null};var e,a=T.props,o=a.bitableStore,i=a.field,n=a.renderer,l=T.props.bitableStore.base.getTableById(t);if(!l)return{fieldItems:[],tableName:null};o.isEmbeddedInDoc&&(e=Object(F.Az)(n.reduxStore.getState()));var r=l.base.getValidTableById(t,e);return{fieldItems:T.getFieldMap(t,l).filter(function(e){return e!==i.id||t!==T.props.tableId}).map(function(e){var t=Object(F.Uw)(l.fields[e].fieldUIType);return t?{value:e,text:l.fields[e].name,icon:S.a.createElement(t,null),hidden:l.fields[e].type===F.og.Denied}:{value:e,text:l.fields[e].name}}),tableName:null==r?void 0:r.name}},T.handleAddNewCondition=function(e,t,a){var o=T.state.filterConditions;if(!(o.length>=r)){var i=[].concat(Object(F.hI)(o),[{source:e,target:t,operator:a,conditionId:Object(F.Qx)(F.Rx.condition,o.map(function(e){return e.conditionId})),constantMode:!1,constantValue:{valueType:F.kP.Constant,value:null}}]);T.setState({filterConditions:i},function(){T.props.updatePosition&&T.props.updatePosition(),T.updateCheckHook(),T.listRef&&(T.listRef.scrollTop=T.listRef.scrollHeight-T.listRef.clientHeight,T.props.changeConfirmBtn(!0))}),T.collectClickEvent(F.BO.AddCondition)}},T.updateCheckHook=function(){T.updateDataSourceList(T.state.searchTableId||""),T.validFieldConfig()&&T.props.changeConfirmBtn(!1)},T.processConstantValues=function(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return e.map(function(e){var t=T.conditionConstantValidate(e.source,e.constantValue,e.operator,n);if(!e.constantMode){var a=e.source,o=e.operator,i=e.target;a&&o&&i&&T.validator.clearCacheValue(T.state.searchTableId||"",a,!0)}return t?e:Object.assign({},e,{constantValue:{valueType:F.kP.Constant,value:null}})})},T.conditionConstantValidate=function(e,t,a){var o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=T.props.bitableStore,n=T.state.searchTableId,l=T.validator.validateTableField(i.base,n||"",e||""),r=l.error,d=l.result,s=r||d&&T.validator.constantValidator(d.table,d.field,t,a,o);return n&&e&&(s?s._isCache||T.validator.setCache(F.lP.Field,e,s,n):T.validator.clearCacheValue(n,e,!0)),!s},T.handleUpdateField=function(e,t,a){var o=T.state.filterConditions,i=Object(F.hI)(o);i[a][e]=t,"source"===e&&(i[a].constantValue={value:null,valueType:F.kP.Constant}),T.setState({filterConditions:T.processConstantValues(i)},T.updateCheckHook)},T.handleUpdateOperator=function(e,t,a){var o=T.state.filterConditions,i=Object(F.hI)(o);i[a][e]=t,T.setState({filterConditions:T.processConstantValues(i)},T.updateCheckHook)},T.handleDeleteCondition=function(e){var t=T.state.filterConditions,a=Object(F.hI)(t);a.splice(e,1),T.setState({filterConditions:a},T.updateCheckHook)},T.handleUpdateConstantValue=function(e,t){var a=T.state.filterConditions,o=Object(F.hI)(a);o[t].constantValue.value=e,T.setState({filterConditions:T.processConstantValues(o)},T.updateCheckHook)},T.handleUpdateConstantMode=function(e,t){var a=T.state.filterConditions,o=Object(F.hI)(a);o[t].constantMode=e,T.setState({filterConditions:o},T.updateCheckHook)},T.renderConditionList=function(){var e=T.props.bitableStore,t=T.state,a=t.filterConditions,l=t.searchTableId,o=t.filterConjunction,u=t.errorMap,r=t.userOptions,d=t.linkOptions,i=T.tableInvalidInfo.invalid,s=!T.hasSelectedLookupTable()||i,n=T.getFieldDropDownItemByTable(l),c=n.fieldItems,b=n.tableName,v=T.getFieldDropDownItemByTable(T.props.tableId),p=v.fieldItems,f=v.tableName,h=Object(F.mP)(e.base.getTableById(l||"")),m=!e.base.isDeniedTable(l||""),C=T.getConditionContentStyle(),g={maxHeight:C.contentHeight,marginRight:C.marginRight},I=y("Bitable_AdvancedPermission_NotAccessibleField"),k=a.map(function(e){var t=T.validator.getInvalidInfo(e.source||"",u.field),a=t.invalidText,o=t.invalid,i=t.isDenied,n=t.errorInfo,l=T.validator.getInvalidInfo((e.constantMode?e.source:e.target)||"",u.value),r=l.invalidText,d=l.invalid,s=l.isDenied,c=l.errorInfo;return Object.assign({},e,{invalidField:{invalid:o,invalidText:a,denied:i,deniedTip:I,fieldErrorInfo:n},invalidValue:{invalid:d,invalidText:r,denied:s,deniedTip:I,valueErrorInfo:c}})});return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"lookup-condition--title-wrap"},S.a.createElement("div",{className:"field-item-title"},y("Bitable_Lookup_SearchCondition")),1<k.length&&S.a.createElement(F.nP,{conjunction:o,overlayClassName:F.iP,onChange:function(e){return T.handleConjunctionChange(e)},needShortText:!0})),0<k.length&&S.a.createElement("div",{className:"lookup-condition--wrap b-ud-scrollbar",style:g,ref:function(e){return T.listRef=e}},k.map(function(e,t){var a,o,i,n;return S.a.createElement(F.oP,{conditionId:t,isDeletable:1<k.length,disabled:s,key:t,sourceTableId:l,sourceTableFieldList:c,sourceTableName:b,targetTableFieldList:p,targetTableName:f,sourceSelectedFieldId:e.source,targetSelectedFieldId:e.target,operator:e.operator,fields:h,bitableStore:T.props.bitableStore,isValidSourceTable:m,invalidSource:e.invalidField,invalidTarget:e.invalidValue,onUpdateField:T.handleUpdateField,onUpdateOperator:T.handleUpdateOperator,onDeleteCondition:T.handleDeleteCondition,onUpdateConstantValue:T.handleUpdateConstantValue,onUpdateConstantMode:T.handleUpdateConstantMode,constantMode:e.constantMode,constantValue:e.constantValue,collectClickEvent:T.collectClickEvent,linkOptions:d,userOptions:r,collectTooltipsHoverEvent:T.collectTooltipsHoverEventGenerator((null===(a=e.invalidField.fieldErrorInfo)||void 0===a?void 0:a.info)||(null===(o=e.invalidValue.valueErrorInfo)||void 0===o?void 0:o.info)),errorInfo:(null===(i=e.invalidField.fieldErrorInfo)||void 0===i?void 0:i.info)||(null===(n=e.invalidValue.valueErrorInfo)||void 0===n?void 0:n.info)})})))},T.renderAddConditionBtn=function(){var e=T.state.filterConditions,t=e.length>=r;return S.a.createElement(i.Tooltip,{title:y("Bitable_Lookup_ReachConditionLimit",r),placement:"top",disabled:!t},S.a.createElement("div",{className:n()("bitable-noselect","lookup-add-condition",{disabled:t}),onClick:function(){return T.handleAddNewCondition(null,null,c)}},e.length<r&&S.a.createElement("div",{className:"lookup-add-condition--background bitable-common-hover-press-background"}),S.a.createElement(l.a,null),S.a.createElement("span",{className:"lookup-add-condition--text"},y("bitable.filter_add_condition"))))},T.renderRollupAndFormatter=function(){var e=[{value:F.pP.VALUE,text:y("Bitable_Lookup_Value")},{value:F.pP.SUM,text:y("bitable.stat.sum")},{value:F.pP.COUNTA,text:y("bitable.stat.count")},{value:F.pP.UNIQUE,text:y("bitable.state.unique")},{value:F.pP.UNIQUE_COUNTA,text:y("Bitable_Lookup_CountUniqueValue")},{value:F.pP.AVERAGE,text:y("bitable.stat.average")},{value:F.pP.MAX,text:y("bitable.stat.max")},{value:F.pP.MIN,text:y("bitable.stat.min")}],t=T.props,a=t.field,o=t.sourceFieldType,i=a.property,n=T.state,l=n.rollupVal,r=n.isCurrencytFormatCode,d="",s=o!==a.type;return i&&!s&&(d=i.formatter),S.a.createElement("div",null,S.a.createElement("div",{className:"lookup-result-transfer"},S.a.createElement("div",{className:"lookup-result-transfer--item"},S.a.createElement("div",{className:"field-item-title"},y("Bitable_Lookup_ResultDisplay")),S.a.createElement(F.Tw,{options:e,selected:l,optionMinWidth:F.EO,className:F.FO,optionHeight:F.hP,overlayClassName:F.iP,onChange:function(e){T.onSelectDropDownItem("rollupVal",e),T.collectClickEvent(F.AO[e])}})),S.a.createElement("div",{className:"lookup-result-transfer--item"},S.a.createElement(F.vK,{ref:function(e){return T.formatterRef=e},field:a,formatter:d,formatterNameList:Object(F.wK)(),defaultFormatName:y("bitable.formula.format_default"),title:y("Bitable_Lookup_NumericFormat"),dropDownClassName:F.FO,overlayClassName:F.iP,optionHeight:F.hP,onSelectFormatter:T.onSelectFormatter}))),r&&Object(F.xK)()&&S.a.createElement("div",{className:"lookup-result-currency"},S.a.createElement(F.yK,Object(F.Kx)({ref:function(e){return T.currencyRef=e}},T.props))))};var t=T.getLookupInfo();return T.state={searchTableId:t.searchTableId,searchFieldId:t.searchFieldId,rollupVal:t.rollupVal,filterConditions:t.filterConditions,filterConjunction:t.filterConjunction,errorMap:{target:{},field:{},value:{}},userOptions:{},linkOptions:{},isCurrencytFormatCode:t.isCurrencytFormatCode},T.defaultFormatName=F.rK.GENERAL,T.validator=F.qP.getInstance(e.bitableStore.base),e.bitableStore.base.isDeniedTable(t.searchTableId||"")&&e.changeConfirmBtn(!0),T}return Object(F.bu)(o,a),Object(F.Pw)(o,[{key:"componentDidMount",value:function(){var e=this,t=this.props.bitableStore.base.eventEmitter;this.validProperty()||this.props.changeConfirmBtn(!0),this.setState({filterConditions:this.processConstantValues(this.state.filterConditions,!0)},function(){e.props.updatePosition&&e.props.updatePosition()}),t.addListener(F.Yx.TableLoaded,this.handleTableLoaded),this.updateDataSourceList(this.state.searchTableId||"")}},{key:"componentDidUpdate",value:function(e,t){e.field.type!==this.props.field.type&&this.initLookupStatus()}},{key:"componentWillUnmount",value:function(){this.props.bitableStore.base.eventEmitter.removeListener(F.Yx.TableLoaded,this.handleTableLoaded)}},{key:"updateDataSourceList",value:function(e){var t=this.props.bitableStore.base.getTableById(e);if(t){var a=Object.keys(t.fields).map(function(e){return t.fields[e]});this.setFieldDataSource(a,e,this.props.bitableStore)}}},{key:"setStateFromUserOptionsData",value:function(t,e){var a=[];e&&(a=e.items),this.setState(function(e){return{userOptions:Object.assign({},e.userOptions,Object(F.Ww)({},t,a))}})}},{key:"setStateFromLinkOptionsData",value:function(t,e){var a=[];e&&(a=e.items),this.setState(function(e){return{linkOptions:Object.assign({},e.linkOptions,Object(F.Ww)({},t,a))}})}},{key:"defaultLookupState",get:function(){return{searchTableId:null,searchFieldId:null,filterConditions:[{source:null,target:null,operator:c,conditionId:Object(F.Qx)(F.Rx.condition,[]),constantValue:{valueType:F.kP.Constant,value:null},constantMode:!1}],filterConjunction:F.ky.And,rollupVal:F.pP.VALUE,errorMap:{target:{},field:{},value:{}},userOptions:{},linkOptions:{},isCurrencytFormatCode:!1}}},{key:"getFormatCode",value:function(){var e,t,a,o,i=(null===(e=this.props)||void 0===e?void 0:e.field).property;return Object(F.sK)(null===(t=this.formatterRef)||void 0===t?void 0:t.getFormatCode())||Object(F.tK)(null==i?void 0:i.formatter)?(null===(a=this.currencyRef)||void 0===a?void 0:a.getFormatCode())||(null===(o=this.formatterRef)||void 0===o?void 0:o.getFormatCode()):this.formatterRef?this.formatterRef.getFormatCode():Object(F.uK)(this.defaultFormatName)}},{key:"getCurrencyCode",value:function(){return this.currencyRef?this.currencyRef.getCurrencyCode():null===(e=this.props.field)||void 0===e||null===(t=e.property)||void 0===t?void 0:t.currencyCode;var e,t}},{key:"getFormatName",value:function(){return this.formatterRef?this.formatterRef.getFormatName():this.defaultFormatName}},{key:"checkTableAllRecordReadable",value:function(e){var t=Object(F.VG)(this.props.bitableStore,e);return this.allTableRecordReadable=this.allTableRecordReadable&&t,t}},{key:"getLookupInfo",value:function(){var e=this.props,t=e.field,a=e.bitableStore,o=e.tableId;if(t.type===F.og.Lookup&&t.id){var i,n=a.base.getTableById(o),l=null==n?void 0:n.fields[t.id],r=Object(F.sK)(null===(i=this.formatterRef)||void 0===i?void 0:i.getFormatCode());if(!n||!l)return this.defaultLookupState;var d=l.getLookupProperty();return d?Object.assign({},d,{errorMap:{target:{},field:{},value:{}},userOptions:{},linkOptions:{},isCurrencytFormatCode:r||Object(F.tK)(null==t?void 0:t.property.formatter)}):this.defaultLookupState}return this.defaultLookupState}},{key:"initLookupStatus",value:function(){var e=this.getLookupInfo();this.setState({searchTableId:e.searchTableId,searchFieldId:e.searchFieldId,rollupVal:e.rollupVal,filterConditions:e.filterConditions,filterConjunction:e.filterConjunction})}},{key:"collectTooltipsHoverEventGenerator",value:function(e){return function(){e&&F.cz.collectBitableEvent(F.Rw.CcmBitableLookupFieldTooltipsView,e)}}},{key:"getLookupPropertyFromPanel",value:function(){var e=this.state,t=e.searchTableId,a=e.searchFieldId,o=e.rollupVal;if(!t||!a||!this.validCondition())return null;if(!this.props.bitableStore.base.getTableById(t))return null;var i={rollup:o,targetField:a,filterInfo:Object(F.jP)(this.state,this.props.bitableStore.base)},n=Object(F.rP)(i,this.props.tableId,this.props.bitableStore.base);return Object.assign({},i,{formula:n,formatter:this.getFormatCode(),currencyCode:this.getCurrencyCode()})}},{key:"validCondition",value:function(){var l=this;return this.state.filterConditions.every(function(e){var t=e.source,a=e.target,o=e.operator,i=e.constantMode,n=e.constantValue;return!(i&&!l.conditionConstantValidate(t,n,o))&&(Object(F.sP)(o,F.tP)?t&&o:t&&(i?n.value:a)&&o)})}},{key:"resetLookupInfoIfNotValid",value:function(){var e=this,t=this.props.bitableStore,a=this.state,o=a.searchTableId,i=a.searchFieldId;if(o){var n=t.base.getTableById(o);i&&n&&!n.getField(i)&&this.setState(function(e,t){return{filterConditions:Object(F.hI)(e.filterConditions).map(function(e){return Object.assign({},e,{source:null,constantValue:{valueType:F.kP.Constant,value:null}})}),searchFieldId:null}},function(){e.validFieldConfig()||e.props.changeConfirmBtn(!0)})}}},{key:"tableInvalidInfo",get:function(){var e=this.state,t=e.searchTableId,a=e.errorMap;return this.validator.getInvalidInfo(t||"",a.target)}},{key:"fieldInvalidInfo",get:function(){var e=this.state,t=e.searchFieldId,a=e.errorMap;return this.validator.getInvalidInfo(t||"",a.target)}},{key:"getConditionContentStyle",value:function(){var e=this.props,t=e.optionListMaxHeight,a=e.disableAdaptHeight,o=this.state.filterConditions,i=1<o.length?-12:0,n=d+s,l=o.length*n-s;if(!a){var r=(Math.floor((t-d)/n)+1)*n;r<n&&(r=n),l=r<l?r:l}return{contentHeight:l,marginRight:i}}},{key:"render",value:function(){return S.a.createElement("label",{className:"b-field-label b-field-lookup",htmlFor:"input"},this.renderSelectTable(),this.renderConditionList(),this.renderAddConditionBtn(),this.renderRollupAndFormatter())}}]),o}(S.a.PureComponent)}.call(this,b("vb163"))}}]);
//# sourceMappingURL=//slardar.bytedance.net/api_v2/browser/jserr/get_sourcemap?bid=docs_pc&js_filename=72b32a1f754b.fd1fb61f27.chunk.js