(window.webpackJsonp=window.webpackJsonp||[]).push([["f7177163c833"],{vb1270:function(e,u,m){"use strict";m.r(u),function(c){m.d(u,"DateTimeEditor",function(){return l});var ne=m("vb143"),e=m("vb103"),ae=m.n(e),t=(m("vb147"),m("vb148"),m("vb152")),i=m.n(t),n=m("vb128"),oe=m.n(n),re=m("vb207"),a=m("vb208"),o=m("vb209"),r=m("vb159"),se=m.n(r),le=m("vb394"),d=m("vb111"),p=m("vb2222"),v=m("vb2205"),s=m("vb770"),ue=(m("vb129"),m("vb223"),m("vb214"),m("vb232"),m("vb187"),m("vb174"),m("vb225"),m("vb224"),m("vb122"),m("vb115"),m("vb112"),m("vb118"),m("vb119"),m("vb113"),m("vb167"),m("vb164"),m("vb233"),m("vb234"),m("vb235"),m("vb123"),m("vb236"),m("vb193"),m("vb237"),m("vb155"),m("vb238"),m("vb124"),m("vb239"),m("vb104"),m("vb116"),m("vb120"),m("vb121"),m("vb117"),m("vb240"),m("vb134"),m("vb131"),m("vb226"),m("vb241"),m("vb114"),m("vb110"),m("vb125"),m("vb242"),m("vb127"),m("vb132"),m("vb227"),m("vb135"),m("vb228"),m("vb229"),m("vb133"),m("vb126"),m("vb243"),m("vb262"),m("vb244"),m("vb245"),m("vb246"),m("vb247"),m("vb194"),m("vb248"),m("vb249"),m("vb201"),m("vb260"),m("vb267"),m("vb250"),m("vb136"),m("vb251"),m("vb130"),m("vb252"),m("vb344"),m("vb483"),m("vb589"),m("vb645"),m("vb331"),Object(ne.Uy)(Object(ne.uY)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(m.bind(null,"vb770"));case 2:return e.abrupt("return",e.sent.ReminderDatePicker);case 3:case"end":return e.stop()}},e)})))),me={en:a.a,ja:o.a},l=function(a){function o(e){var s;Object(ne.ov)(this,o),(s=a.call(this,e)||this).focusAfterSetRef=!1,s.editorDateRef=null,s.reminderIconRef=null,s.datePickerPopover=null,s.shouldUseOriginTime=!1,s.points={top:["bl","tl"],bottom:["tl","bl"]},s.state={dateValue:"",timeValue:"",dateOpen:!1,timeOpen:!1,point:"bottom",isFocus:!1,datePickerOffset:{offset:{}},datePickerVisible:!1},s.updateDateValueByCalendar=function(e){s.timestamp=oe()(e.format("YYYYMMDD")).valueOf();var t=s.props,i=t.dateFormat,n=t.showTimePicker,a=t.onChange;n&&!s.state.timeValue?s.openTimePicker():s.state.dateOpen||s.openDatePicker(),s.setState({dateValue:e.format(i&&i.toUpperCase())});var o=n||s.originValue?s.getTimeInputValue(s.state.timeValue):0,r=s.correctDateValue(s.timestamp+o,"calendar",s.state.timeValue);a&&a(r)},s.correctDateValue=function(e,t,i){var n;return null!=e&&-1<(null===(n=String(e))||void 0===n?void 0:n.indexOf("."))&&(ne.ob.collectBitableEvent(ne.On.TraceDateValueError,{stage:"calendar",dateValue:s.timestamp,originValue:s.originValue,timeValue:i,dateFormat:s.props.dateFormat}),e=Math.floor(e)),e?Object(ne.IQ)(e,s.props.timeZone):null},s.updateDateValueByInput=function(e){s.setState({dateValue:e}),s.onValueChange(e,s.state.timeValue,!0),s.props.onTextChange&&s.props.onTextChange(e)},s.updateTimeValue=function(e){s.setState({timeValue:e}),s.onValueChange(s.state.dateValue,e)},s.onValueChange=function(e,t,i){var n=s.props.onChange,a=s.getInputValue(e,t);s.timestamp=a,a=s.correctDateValue(a,i?"input":"time",t),n&&n(a)},s.setDateEditorRef=function(e){s.editorDateRef=e,s.editorDateRef&&(s.focusAfterSetRef&&s.editorDateRef.focus(),s.focusAfterSetRef=!1)},s.setReminderIconRef=function(e){s.reminderIconRef=e},s.getCalendarContainer=function(e){return s.dateDivRef},s.setDivRef=function(e){s.dateDivRef=e},s.setTimeDivRef=function(e){s.timeDivRef=e},s.openDateChange=function(e){s.props.isOpen&&e!==s.state.dateOpen&&(e?s.openDatePicker():s.closeDatePicker())},s.onTimeOpenChange=function(e){s.state.timeOpen!==e&&(e?s.openTimePicker():s.closeTimePicker())},s.disabledDate=function(e){return!!e&&s.notInTimestampRange(e.valueOf())},s.notInTimestampRange=function(e){return e<ne.JQ.MinTimeStamp||e>ne.JQ.MaxTimeStamp},s.onReminderChange=function(e,t){var i=s.parseTimestamp(e),n=i.dateValue,a=i.timeValue;s.setState({dateValue:n,timeValue:a||""}),s.props.onReminderChange(e,t)},s.onContainerMouseDown=function(e){var t,i;s.state.dateOpen||(!s.state.timeOpen||null!==(t=s.reminderIconRef)&&void 0!==t&&t.contains(e.target))&&(null!==(i=s.timeDivRef)&&void 0!==i&&i.contains(e.target)||setTimeout(function(){s.focus()},0))},s.setDatePickerPopover=function(e){s.datePickerPopover=e},s.ignoreReminderIconClick=function(e){var t;return s.state.dateOpen&&!(null===(t=s.reminderIconRef)||void 0===t||!t.contains(e))},s.onReminderTooltipShow=function(e){if(e){var t=s.props.collectReminderEvent;t&&t(ne.SK.HOVER_CLOCK_ICON)}};var t=s.parseTimestamp(e.value),i=t.dateValue,n=t.timeValue;return s.originValue=s.state.dateValue=i,s.clickReminderIcon=s.clickReminderIcon.bind(Object(ne.Cx)(s)),n&&(s.state.timeValue=n),s}return Object(ne.bu)(o,a),Object(ne.Pw)(o,[{key:"componentDidUpdate",value:function(e){if(this.props.dateFormat!==e.dateFormat||this.props.timeFormat!==e.timeFormat){var t=this.parseTimestamp(this.timestamp,!0),i=t.dateValue,n=t.timeValue,a=void 0===n?"":n;this.setState({dateValue:i,timeValue:a})}}},{key:"setDefaultValue",value:function(){this.setEditorValue(this.props.value)}},{key:"setEditorValue",value:function(e){if(!Array.isArray(e)){var t=this.parseTimestamp(e),i=t.dateValue,n=t.timeValue,a=void 0===n?"":n;this.setState({dateValue:i,timeValue:a}),this.props.onChange&&this.props.onChange(e)}}},{key:"getTimestampWithTimeZone",value:function(){return this.timestamp?Object(ne.IQ)(this.timestamp,this.props.timeZone):null}},{key:"parseTimestamp",value:function(e,t){var i=this.props,n=i.dateFormat,a=i.timeFormat,o=i.timeZone,r=Object(ne.KQ)(e,{dateFormat:n,timeFormat:a,timeZone:o,isLocale:t}),s=r.dateValue,l=r.timeValue,u=r.timestamp;return u&&(this.timestamp=u),{dateValue:s,timeValue:l}}},{key:"focus",value:function(){this.editorDateRef?this.editorDateRef.focus():this.focusAfterSetRef=!0}},{key:"autoSetReminder",value:function(){var e;null===(e=this.editorDateRef)||void 0===e||e.autoSetReminder()}},{key:"getInputValue",value:function(e,t){if(!e)return null;var i=this.props,n=i.timeFormat,a=i.dateFormat;if(!n){var o=Object(ne.LQ)(e,a);return null==o||this.notInTimestampRange(o)?null:o}var r=Object(ne.LQ)(e,a);return null==r||this.notInTimestampRange(r)?null:isNaN(oe()(e,["H","HH","HH:mm"],!0).valueOf())?r+this.getTimeInputValue(t):r}},{key:"getTimeInputValue",value:function(e){var t=this.props.timeFormat;return!e&&t&&(e=Object(s.getLocalTimeFormatText)(t)),Object(ne.HQ)(e,t)||0}},{key:"onEndEdit",value:function(e){var t;null===(t=this.editorDateRef)||void 0===t||t.insertSetTime(),this.setState({dateOpen:!1,datePickerVisible:!1,timeOpen:!1}),this.datePickerPopover=null,this.shouldUseOriginTime=!1,this.timestamp=null}},{key:"setSelectionToEnd",value:function(){}},{key:"setPopupPosition",value:function(){if(this.dateDivRef.parentElement){var e=this.dateDivRef.parentElement.getBoundingClientRect(),t=window.innerHeight-e.bottom,i=e.top,n=this.dateComponentHeight;i<t||n<t||i<n?this.setState({point:"bottom"}):this.setState({point:"top"})}}},{key:"updateDatePopoverOffset",value:function(){var e=this.getDatePickerOffset();this.setState({datePickerOffset:{offset:e}})}},{key:"resetPopupPosition",value:function(){var e=this;this.state.dateOpen&&setTimeout(function(){e.updateDatePopoverOffset()},0)}},{key:"onStartEdit",value:function(e,t){t&&e&&this.setEditorValue(e),this.state.dateOpen||this.openDatePicker()}},{key:"openDatePicker",value:function(){var e=this,t=this.props,i=t.reminderContext,n=t.recordId,a=t.fieldId,o=t.onShowDateTimeEditor,r=t.disableReminder?null:i.getReminder(n,a);this.setState({dateOpen:!0,timeOpen:!1},function(){e.updateDatePopoverOffset(),e.setState({datePickerVisible:!0}),r&&o&&o()})}},{key:"closeDatePicker",value:function(){this.datePickerPopover=null,this.setState({dateOpen:!1,datePickerVisible:!1})}},{key:"openTimePicker",value:function(){this.datePickerPopover=null,this.setPopupPosition(),this.setState({timeOpen:!0,dateOpen:!1,datePickerVisible:!1})}},{key:"closeTimePicker",value:function(){this.setState({timeOpen:!1})}},{key:"dateComponentHeight",get:function(){return this.props.disableReminder?le.e:le.c}},{key:"getDatePickerOffset",value:function(){var e=this.props,t=e.anchorRef,i=e.bitableType,n=e.showTimePicker,a=e.isCardEdit,o=this.datePickerPopover,r=this.dateComponentHeight,s=o&&Math.max(o.offsetHeight,r)||r,l=o&&o.offsetWidth||0,u={left:0,top:(a?33:ne.MQ.Short+4)+ne.vF};if(a)return u;var m=t||this.dateDivRef;if(m){var c=Object(ne.tC)(m,{offsetDown:u.top,height:s,viewportTop:Object(ne.zC)(i)},{canCross:!0});if(c.top<0)if(c.top+s<=10)u.top=void 0,u.bottom=-(c.top+s)+m.offsetHeight+ne.vF,Object(ne.bE)(m,u,{width:l});else{var d=n?146:95,p=Math.min(m.offsetWidth,d);c=Object(ne.NQ)(m,{width:l,offsetRight:p},{isRightFirst:!0}),u.left=c.left,u.top=0,Object(ne.bE)(m,u,{height:s})}else Object(ne.bE)(m,u,{width:l})}return u}},{key:"clickReminderIcon",value:function(){var e,t;null===(e=(t=this.props).collectReminderEvent)||void 0===e||e.call(t,ne.SK.CLICK_CLOCK_ICON,void 0,ne.mC.CARD_ICON),this.props.isCardEdit&&this.autoSetReminder()}},{key:"renderReminderIcon",value:function(){var e=this.props,t=e.isCardEdit,i=e.editable,n=e.reminderContext,a=e.recordId,o=e.fieldId,r=e.isReminderFieldType,s=e.disableReminder;if(!a)return null;var l=s?null:n.getReminder(a,o);if(!(l||t&&r))return null;var u=ae.a.createElement("i",{ref:this.setReminderIconRef,className:se()("bitable-reminder-icon",l?"bitable-reminder-icon--set":"bitable-reminder-icon--not-set",{editable:i,"bitable-reminder-icon-btn":t}),onClick:this.clickReminderIcon},l?ae.a.createElement(p.a,null):ae.a.createElement(v.a,null));if(t){var m=l?Object(ne.RK)(l,n):i?c("reminder.popover.notifyTime"):"";return i&&ae.a.createElement(d.Tooltip,{onVisibleChange:this.onReminderTooltipShow,placement:"top",title:m,disabled:!m},u)}return u}},{key:"render",value:function(){var e=this.state,t=e.timeValue,i=e.dateValue,n=e.dateOpen,a=e.timeOpen,o=e.point,r=e.datePickerVisible,s=this.props,l=s.className,u=s.editable,m=s.dateFormat,c=s.timeFormat,d=s.timeZone,p=s.focusable,v=s.showTimePicker,b=s.showTimeZoneSuffix,f=s.reminderContext,h=s.recordId,g=s.fieldId,C=s.bitableType,R=s.userContext,k=s.getCurrentUser,O=s.disableReminder,y=s.reminderHelperLink,T=s.viewId,V=s.isCardEdit,D=s.collectReminderEvent,P=s.language,E=s.fileToken,S=s.getPinyin,w=s.searchUsers,I=s.getToken,F=s.getMentionList,j=s.disableField,x=s.onShowUser,N=s.onHideUser,M=s.onSwitchToEntityConfigPanel,H=s.onSwitchReminderFormat,U=s.onToggleReminder,L=s.onNotifyTimeChange,Q=s.onNotifyStrategyChange,Z=s.isReminderFieldType,_=s.onShowReminderEntity,B=s.onEntityTypeChange,K=s.onClickEntitySubmitBtn,Y=s.onClickEntityCancelBtn,J=s.onShowUserSelectorDropdown,z=s.placeholder;if(Array.isArray(this.props.value)){var W=Object(ne.OQ)(this.props.value,{dateFormat:m,timeFormat:c,timeZone:d,showTimeZoneSuffix:b});return ae.a.createElement("div",{className:se()("".concat(le.b),"date-time-only-show-container")},ae.a.createElement("span",null,W))}var q,X=me[P||""]||re.a;if(this.shouldUseOriginTime||null==this.timestamp){if(m){var $=Object(ne.LQ)(i,m);q=$?oe()($):void 0}}else q=oe()(this.timestamp);var ee=O?null:f.getReminder(h,g),te=!!ee&&!O,ie=d&&Object(ne.FQ)(d);return ae.a.createElement("div",{className:se()("".concat(le.b),"bitable-date-time-editor",p&&"".concat(le.b,"--hover"),this.state.isFocus&&"".concat(le.b,"--focused"),l,!O&&"".concat(le.b,"--reminder"),"".concat(le.b,te?"--reminder-set":"--reminder-not-set"),Z&&V&&"".concat(le.b,"--reminder-card-icon"),v&&b&&ie?"".concat(le.b,"--display-time-zone"):""),style:this.props.style,ref:this.setDivRef,onMouseDown:this.onContainerMouseDown},ae.a.createElement(ue,{ref:this.setDateEditorRef,format:m.toUpperCase(),locale:X,className:se()("bitable-date-time__first",{only:!v,short:q&&m===ne.PQ.format3}),showToday:!1,placeholder:z,readOnly:!u,open:!!u&&n,onOpenChange:this.openDateChange,align:this.state.datePickerOffset,inputDateValue:i,onChange:this.updateDateValueByCalendar,value:q,timeValue:t,timeZone:this.props.timeZone,disabledDate:this.disabledDate,onTextChange:this.updateDateValueByInput,reminder:ee,onReminderChange:this.onReminderChange,reminderContext:f,bitableType:C,userContext:R,showTimePicker:v,viewId:T,isCardEdit:V,getCurrentUser:k,collectReminderEvent:D,popoverClassName:r?void 0:"bitable-reminder-calendar-popover-hide",setCalendarPopoverRef:this.setDatePickerPopover,disableReminder:O,language:P,fileToken:E,getPinyin:S,searchUsers:w,getToken:I,getMentionList:F,disableField:j,reminderHelperLink:y,onShowUser:x,onHideUser:N,onSwitchReminderFormat:H,onSwitchToEntityConfigPanel:M,onToggleReminder:U,onNotifyTimeChange:L,onNotifyStrategyChange:Q,ignoreDocumentClick:this.ignoreReminderIconClick,onShowReminderEntity:_,onEntityTypeChange:B,onClickEntitySubmitBtn:K,onClickEntityCancelBtn:Y,onShowUserSelectorDropdown:J}),v&&ae.a.createElement(ae.a.Fragment,null,ae.a.createElement("div",{ref:this.setTimeDivRef,className:se()("bitable-time-picker-wrapper",t?"short":"")},ae.a.createElement(ne.QQ,{prefixCls:"".concat("bitable-5a92a9","__time-picker"),className:"bitable-date-time__last",placeholder:u&&c?c.toLowerCase():"",getPopupContainer:this.getCalendarContainer,format:c||"",open:a,align:{points:this.points[o],offset:[0,0]},inputReadOnly:!u,minuteStep:30,onChange:this.updateTimeValue,onOpenChange:this.onTimeOpenChange,value:t})),b&&t&&ie&&ae.a.createElement("div",{className:"bitable-date-time__time-zone"},"(",ie,")")),ae.a.createElement("div",{className:"bitable-reminder-divide"}),!O&&this.renderReminderIcon())}}]),o}(ae.a.Component);l.defaultProps={value:null,editable:!0,dateFormat:"yyyyMMdd",timeFormat:"",isOpen:!0,focusable:!0}}.call(this,m("vb163"))},vb2222:function(e,t,i){"use strict";var n=i("vb144"),a=i.n(n),o=i("vb103"),r=i("vb151");function s(e){return o.createElement("svg",a()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M4.569 1.716a.982.982 0 1 1 1.38 1.397L3.09 5.941a.982.982 0 1 1-1.382-1.397L4.57 1.716ZM18.04 3.113a.982.982 0 1 1 1.382-1.397l2.861 2.828a.982.982 0 1 1-1.38 1.397L18.04 3.113Zm3.965 9.554c0 5.523-4.479 10-10.003 10S2 18.19 2 12.667s4.478-10 10.002-10c5.524 0 10.003 4.477 10.003 10ZM12 9a1 1 0 0 0-2 0v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2h-4V9Z",fill:"currentColor"}))}var l=o.forwardRef(function(e,t){return o.createElement(r.a,a()({icon:s},e,{ref:t,svgProps:{"data-icon":"AlarmClockFilled"}}))});t.a=l}}]);
//# sourceMappingURL=//slardar.bytedance.net/api_v2/browser/jserr/get_sourcemap?bid=docs_pc&js_filename=f7177163c833.3f00fcc98b.chunk.js