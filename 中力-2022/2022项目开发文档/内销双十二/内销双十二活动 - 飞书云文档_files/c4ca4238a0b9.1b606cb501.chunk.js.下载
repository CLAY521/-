(window.webpackJsonp=window.webpackJsonp||[]).push([["c4ca4238a0b9"],{vb1905:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M12 23c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11Zm-1-12V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2h-3v3a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"MoreAddFilled"}}))});t.a=c},vb1907:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M18.75 16a3.622 3.622 0 0 1-2.637-1.156A5 5 0 1 1 17 12c0 1.105.784 2 1.75 2 1.512 0 1.776-2 1.776-2 .08-.548.138-.903.138-1.568C20.664 6.997 17.164 3 12 3s-8.98 3.836-8.98 9 3.816 9.01 8.98 9.01c1.807 0 3.487-.634 4.916-1.544a.823.823 0 0 1 .853-.028l.041.024.903.519a.41.41 0 0 1 .067.682A10.953 10.953 0 0 1 12 23C5.925 23 1 18.075 1 12S5.925 1 12 1s10.657 4.265 10.657 9.432c0 .256.014.522-.136 1.794C22.296 14.326 20.75 16 18.75 16ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"AtOutlined"}}))});t.a=c},vb1921:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M9.93 4.273a8 8 0 0 1 8.683 3.224h-3.11a1 1 0 0 0 0 2h5.496a1 1 0 0 0 1.001-1V3a1 1 0 1 0-2 0v3a10 10 0 1 0 .66 11 1 1 0 0 0-1.732-1A8 8 0 1 1 9.93 4.273Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"RefreshOutlined"}}))});t.a=c},vb1922:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M5 3h14v10h2V3a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h7v-2H5V3Z",fill:"currentColor"}),o.createElement("path",{d:"M7 8a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2H8a1 1 0 0 1-1-1Zm1 3a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H8Zm9 5a1 1 0 1 1 2 0v2h2a1 1 0 1 1 0 2h-2v2a1 1 0 1 1-2 0v-2h-2a1 1 0 1 1 0-2h2v-2Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"AddEntryOutlined"}}))});t.a=c},vb2236:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M1 12c0 6.075 4.925 11 11 11s11-4.925 11-11S18.075 1 12 1 1 5.925 1 12Zm16.617 7.032a9 9 0 0 1-12.65-12.65l12.65 12.65Zm1.415-1.414L6.382 4.968a9 9 0 0 1 12.65 12.65Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"BanOutlined"}}))});t.a=c},vb2237:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M8.707 2.293a1 1 0 0 1 0 1.414L5.414 7H14.5a7.5 7.5 0 0 1 0 15H11a1 1 0 1 1 0-2h3.5a5.5 5.5 0 1 0 0-11H5.414l3.293 3.293a1 1 0 1 1-1.414 1.414l-5-5a1 1 0 0 1 0-1.414l5-5a1 1 0 0 1 1.414 0Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"UndoOutlined"}}))});t.a=c},vb2238:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M15.293 2.293a1 1 0 0 0 0 1.414L18.586 7H9.5a7.5 7.5 0 0 0 0 15H13a1 1 0 1 0 0-2H9.5a5.5 5.5 0 1 1 0-11h9.086l-3.293 3.293a1 1 0 0 0 1.414 1.414l5-5a1 1 0 0 0 0-1.414l-5-5a1 1 0 0 0-1.414 0Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"RedoOutlined"}}))});t.a=c},vb2239:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M2 4a1 1 0 0 1 1-1h18a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1Zm0 7a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1Zm1 7a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2H3Zm17.507-.04a6 6 0 1 0-1.552 1.262l2.024 2.412a1 1 0 1 0 1.532-1.285l-2.004-2.388ZM20 14a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"FindAndReplaceOutlined"}}))});t.a=c},vb2240:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M4 4h16v7h2V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8v-2H4V4Z",fill:"currentColor"}),o.createElement("path",{d:"M15.5 21.425a.552.552 0 0 1-.507-.211 4.672 4.672 0 0 1-.675-1.296.553.553 0 0 1 .084-.5l.408-.56a.963.963 0 0 0 0-1.134l-.345-.474a.553.553 0 0 1-.077-.523c.193-.5.47-.963.82-1.369a.553.553 0 0 1 .482-.18l.539.058a.962.962 0 0 0 .986-.57l.22-.503a.552.552 0 0 1 .398-.328 4.59 4.59 0 0 1 1.588-.024c.186.03.339.158.414.33l.23.524a.963.963 0 0 0 .987.571l.64-.07c.18-.02.361.043.48.18.329.378.594.807.787 1.27a.553.553 0 0 1-.073.535l-.417.573a.962.962 0 0 0 0 1.133l.483.664a.55.55 0 0 1 .08.514 4.673 4.673 0 0 1-.643 1.191.552.552 0 0 1-.507.21l-.83-.09a.963.963 0 0 0-.988.57l-.35.8a.552.552 0 0 1-.43.334 4.6 4.6 0 0 1-1.312-.02.552.552 0 0 1-.414-.33l-.343-.784a.963.963 0 0 0-.987-.57l-.727.08Zm3.196-1.449c.85 0 1.54-.696 1.54-1.555 0-.86-.69-1.556-1.54-1.556-.851 0-1.54.696-1.54 1.556 0 .859.689 1.555 1.54 1.555ZM6.5 11a1 1 0 1 0 0 2H14a1 1 0 1 0 0-2H6.5ZM9 8a1 1 0 0 1 1-1h7a1 1 0 1 1 0 2h-7a1 1 0 0 1-1-1Zm-1 7a1 1 0 1 0 0 2h3a1 1 0 1 0 0-2H8Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"GanttsetOutlined"}}))});t.a=c},vb322:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var a=n("vb143"),i=function(e,t){var n=a.Yw.getItem(a.UD);return Array.isArray(n)&&n.includes("".concat(e,"-").concat(t,"-").concat(Object(a.wB)().get("id")))},o=function(e,t){var n=a.Yw.getItem(a.UD);Array.isArray(n)||(n=[]),a.Yw.setItemSafely(a.UD,[].concat(Object(a.hI)(n),["".concat(e,"-").concat(t,"-").concat(Object(a.wB)().get("id"))]))}},vb331:function(e,t){function n(){}e.exports=n},vb342:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var d=n("vb143");n("vb147"),n("vb103"),n("vb148");function a(e,t,n){var a=e.getService(d.kx.PERMISSION);if(a){var i,o=a.getRecordConditions(n),r=Object(d.WB)(o);try{for(r.s();!(i=r.n()).done;){var l=i.value,c=l.fieldId,s=l.fieldType;if(t.id===c&&t.type===s)return!0}}catch(e){r.e(e)}finally{r.f()}}return!1}},vb367:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return v}),n.d(t,"e",function(){return g}),n.d(t,"f",function(){return r}),n.d(t,"g",function(){return f}),n.d(t,"h",function(){return h});var a,i,o,r,l,c,s=n("vb143"),d=n("vb152"),u=n.n(d),p=(n("vb147"),n("vb103"),n("vb148"),function(){function t(e){Object(s.ov)(this,t),this.storageManager=e}return Object(s.Pw)(t,[{key:"init",value:function(e,t,n){var a=this.getFormMode(e,t);return a||(a=n,this.setFormMode(e,t,a)),a}},{key:"getFormMode",value:function(e,t,n){var a=this.storageManager.getAllConfig(e,t),i=n;return a&&a.formMode&&(i=a.formMode),i}},{key:"setFormMode",value:function(e,t,n){this.storageManager.setConfig(e,t,{formMode:n})}}]),t}()),b=10013;function f(e){return m.apply(this,arguments)}function m(){return(m=Object(s.uY)(u.a.mark(function e(a){var i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.ob.CommonUtil.request,e.abrupt("return",new Promise(function(t,n){i.post(s.SD,{token:a,type:80,actions:["view","edit"]},{headers:{"Content-Type":"application/json"}}).then(function(e){return 0===e.code?t(e.data):n(e)}).catch(function(e){if(4===e.code)return t(e.data);n(e)})}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function v(e){return s.ob.CommonUtil.request.get(s.TD,{ignoreInterceptors:!0,params:{obj_token:e,obj_type:80}})}(c=o||(o={}))[c.NotExist=3]="NotExist",c[c.Forbidden=4]="Forbidden",c[c.EditTimeLessThanLastAppealTime=10003]="EditTimeLessThanLastAppealTime",c[c.ReachDailyAppealUpperLimit=10004]="ReachDailyAppealUpperLimit",c[c.ReachAppealUpperLimit=10005]="ReachAppealUpperLimit",(l=r||(r={}))[l.InProgress=0]="InProgress",l[l.Pass=1]="Pass",l[l.NotPass=2]="NotPass",l[l.Error=3]="Error";var h=(Object(s.Ww)(a={},r.InProgress,s.YC.BannedAndAppealing),Object(s.Ww)(a,r.Pass,s.YC.Banned),Object(s.Ww)(a,r.NotPass,s.YC.BannedAndAppealFail),Object(s.Ww)(a,r.Error,s.YC.Banned),a),g=(Object(s.Ww)(i={},o.NotExist,s.YC.Banned),Object(s.Ww)(i,o.Forbidden,s.YC.Unknown),Object(s.Ww)(i,o.EditTimeLessThanLastAppealTime,s.YC.BannedAndAppealFail),Object(s.Ww)(i,o.ReachAppealUpperLimit,s.YC.BannedAndReachTotalAppealUpperLimit),Object(s.Ww)(i,o.ReachDailyAppealUpperLimit,s.YC.BannedAndReachDailyAppealUpperLimit),i)},vb381:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("vb103"),i=n.n(a),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function r(e,t){var n={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var l=function(e){e.styles;var t=r(e,["styles"]);return i.a.createElement("svg",o({width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i.a.createElement("path",{d:"M10.797 2.14a.481.481 0 0 0-.68 0L5.08 7.177 2.434 4.531a.481.481 0 0 0-.681 0L.64 5.642a.481.481 0 0 0 0 .68l4.099 4.1a.48.48 0 0 0 .68 0l6.489-6.489a.481.481 0 0 0 0-.68L10.796 2.14z"}))}},vb382:function(e,U,Y){"use strict";(function(h){Y.d(U,"a",function(){return z}),Y.d(U,"b",function(){return D}),Y.d(U,"c",function(){return I}),Y.d(U,"d",function(){return T}),Y.d(U,"e",function(){return N});var S=Y("vb143"),e=Y("vb196"),t=Y("vb185"),n=Y("vb103"),E=Y.n(n),a=(Y("vb147"),Y("vb148"),Y("vb152")),u=Y.n(a),i=Y("vb159"),k=Y.n(i),o=Y("vb114"),g=Y("vb201"),r=Y("vb111"),l=Y("vb2183"),c=Y("vb540"),b=Y("vb952"),f=Y("vb2201"),m=Y("vb2173"),y=Y("vb2177"),p=(Y("vb112"),Y("vb164"),Y("vb167"),Y("vb113"),Y("vb342")),v=(Y("vb174"),Y("vb155"),Object(g.SortableHandle)(function(e){var t=e.draggable,n=e.preCls;return E.a.createElement(l.a,{className:k()("".concat(n,"__field-dragbar"),Object(S.Ww)({},"".concat(n,"__field-function_disabled"),!t))})})),s=function(a){function i(){var o;Object(S.ov)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o=a.call.apply(a,[this].concat(t))||this).handleMoreClick=function(e){var t=o.props,n=t.onContextMenu,a=t.field,i=t.onClickFieldMore;i&&i(a),n(e,a)},o}return Object(S.bu)(i,a),Object(S.Pw)(i,[{key:"componentDidUpdate",value:function(e){e.fieldEditable&&!this.props.fieldEditable&&(this.props.hiddenFieldCard(!0),this.props.closeContextMenu())}},{key:"renderPrimaryFieldTooltip",value:function(){if(S.ob.config.ui.hidePrimaryFieldTooltip)return null;var e=this.props.preCls;return E.a.createElement(r.Tooltip,{title:h("bitable.field.primary_tip"),placement:"top",mouseEnterDelay:200},E.a.createElement(c.a,{className:"".concat(e,"__field-lock")}))}},{key:"render",value:function(){var e=this.props,t=e.draggable,n=e.preCls,a=e.field,i=e.isPrimaryField,o=e.visible,r=e.contextMenuOpen,l=e.handleToggleHiddenField,c=e.fieldEditable,s=e.fieldMovable,d=Object(S.aD)(a),u=Object(S.Uw)(d),p=o?b.a:f.a;return E.a.createElement("div",{className:"".concat(n,"__item_wrapper")},E.a.createElement("div",{className:k()("".concat(n,"__item ").concat(n,"__field"),Object(S.Ww)({},"".concat(n,"__item ").concat(n,"__field_invisible"),!o))},i?this.renderPrimaryFieldTooltip():s?E.a.createElement(v,{draggable:t,preCls:n}):null,E.a.createElement(u,{className:"".concat(n,"__field-type")}),E.a.createElement("span",{className:"".concat(n,"__field-name bitable-noselect")},a.name),i?null:E.a.createElement("div",{className:"bitable-common-hover-press-background icon-background bitable-layout-row bitable-layout-cross-center",style:{marginLeft:4,cursor:"pointer"},onClick:function(){return l(a)}},E.a.createElement(p,{className:k()("".concat(n,"__field-visible"))})),c&&E.a.createElement("div",{onClick:this.handleMoreClick,className:"bitable-common-hover-press-background icon-background bitable-layout-row bitable-layout-cross-center",style:{marginLeft:4,cursor:"pointer"}},E.a.createElement(m.a,{className:k()("".concat(n,"__field-more"),Object(S.Ww)({},"".concat(n,"__field-more_open"),r))}))))}}]),i}(n.Component),C=Object(S.oA)(function(e,t){var n=e.permissionStore,a=t.tableId,i=t.fieldId;return{fieldEditable:n.hasPermission(S.qy.Field,{tableId:a,fieldId:i},S.ry.Editable),fieldMovable:n.hasPermission(S.qy.Field,{tableId:a,fieldId:i},S.ry.Movable)}},void 0,function(n,e,t){t(function(e){var t=n.permissionStore;return t.subscribe(e),function(){return t.unsubscribe(e)}})})(s),d=40,O=36,_=8,F=12,w=40,T=36,I=80,D=42,N=32,B=4,P=2*B+1,M=10,x=8,j=Object(g.SortableElement)(function(e){var t=e.fieldMap,n=e.isPrimaryField,a=e.draggable,i=e.preCls,o=e.hiddenFieldsSet,r=e.contextMenuSelectField,l=e.fieldId,c=e.onContextMenu,s=e.handleToggleHiddenField,d=e.tableId,u=e.hiddenFieldCard,p=e.closeContextMenu,b=e.onClickFieldMore;return E.a.createElement(C,{field:t[l],draggable:a,isPrimaryField:n,preCls:i,visible:!o.has(l),contextMenuOpen:!!r&&r.id===l,onContextMenu:c,handleToggleHiddenField:s,tableId:d,fieldId:l,hiddenFieldCard:u,closeContextMenu:p,onClickFieldMore:b})}),L=Object(g.SortableContainer)(function(a){function i(){var w;Object(S.ov)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(w=a.call.apply(a,[this].concat(t))||this).getCurItem=function(){return w.props.editingField?document.querySelector(".".concat(w.props.editingField.id)):null},w.getPositionOffset=function(){var e=w.props,t=e.preCls,n=e.editingField;if(n){var a=document.querySelector(".".concat(n.id)),i=document.querySelector(".".concat(t));if(a&&i)return{x:0,y:a.getBoundingClientRect().y-i.getBoundingClientRect().y}}return{x:0,y:0}},w.renderRow=function(e){var t=e.index,n=e.style,a=w.props,i=a.fieldList,o=a.preCls,r=a.editingField,l=a.fieldMap,c=a.contextMenuSelectField,s=a.hiddenFieldsSet,d=a.onContextMenu,u=a.handleToggleHiddenField,p=a.hiddenFieldCard,b=a.onClickFieldMore,f=a.activeTable,m=a.closeContextMenu,v=a.frozenColInfo,h=i[t],g=0!==t,y=null;if(0!==t&&(null==v?void 0:v.renderDivider)&&v.dividerIndex===t){var C={position:"absolute",top:n.top-B-1};y=E.a.createElement("div",{className:"".concat(o,"__frozen_divider"),style:C})}return E.a.createElement(E.a.Fragment,null,y,E.a.createElement("div",{className:k()("".concat(o,"__fields__field-wrap ").concat(h),{"bitable-field-editing":r&&r.id===h}),key:h,style:n},E.a.createElement(j,{fieldMap:l,fieldId:h,index:t,isPrimaryField:h===f.getPrimaryKey(),preCls:o,contextMenuSelectField:c,hiddenFieldsSet:s,onContextMenu:d,disabled:!g,draggable:g,handleToggleHiddenField:u,tableId:f.id,hiddenFieldCard:p,closeContextMenu:m,onClickFieldMore:b})))},w.setVirtualListRef=function(e){w.virtualListRef=e},w.getRowExtraOffset=function(e){var t=w.props.frozenColInfo;return null!=t&&t.renderDivider&&0!==t.dividerIndex&&e>=t.dividerIndex?P:0},w}return Object(S.bu)(i,a),Object(S.Pw)(i,[{key:"componentDidUpdate",value:function(e){if(this.virtualListRef){var t=!Object(o.shallowEqual)(e.frozenColInfo,this.props.frozenColInfo);Object(o.shallowEqual)(e.hiddenFieldsSet,this.props.hiddenFieldsSet)&&Object(o.shallowEqual)(e.fieldMap,this.props.fieldMap)&&!t||(t&&this.virtualListRef.clearItemStyleCache(),this.virtualListRef.forceUpdate())}}},{key:"render",value:function(){var e=this.props,t=e.preCls,n=e.fieldList,a=e.editingField,i=e.activeTable,o=e.activeView,r=e.setEditFieldCompRef,l=e.hiddenFieldCard,c=e.onFieldEdited,s=e.sorting,d=e.bitableStore,u=e.renderer,p=e.className,b=e.contentHeight,f=e.isListHoverTipVisible,m=e.setFieldHoverTipVisible,v=!1,h=!1;if(a&&n){var g=n.indexOf(a.id);-1!==g&&(v=!0,h=0===g)}return E.a.createElement(E.a.Fragment,null,E.a.createElement(S.VD,{className:k()("".concat(t,"__fields-wrap"),"b-ud-scrollbar",p,Object(S.Ww)({},"".concat(t,"__fields-wrap_sorting"),s)),itemSize:O,ref:this.setVirtualListRef,itemCount:n.length,width:"100%",height:b,getRowExtraOffset:this.getRowExtraOffset},this.renderRow),a&&v&&E.a.createElement(S.hz,{fromType:S.gz.FloatToolbarEdit,getAnchorRef:this.getCurItem,getPositionOffset:this.getPositionOffset,x:260,y:0,onClose:l,onFieldEdited:c,table:i,field:Object.assign({},a,{fieldUIType:Object(S.aD)(a)}),bitableStore:d,isFirstField:h,ref:r,renderer:u,vLayoutInfo:{offsetUp:-O},view:o,source:S.iz.Toolbar,isListHoverTipVisible:void 0!==f&&f,setFieldHoverTipVisible:m&&function(e){return m(e)}}))}}]),i}(n.Component)),R=function(n){function a(e){var v,t;return Object(S.ov)(this,a),(v=n.call(this,e)||this).collectFieldSetClickEvent=function(e,t){var n=v.props.renderer;if(Object(S.kD)(n.getActiveView())){var a=n.activeBitableWidget.getGridWidget().source.frozen.isTempFrozen;S.cz.collectClickEvent(S.Bc.CcmBitableFieldSetClick,Object.assign({click:e,is_temporary_frozen:a.toString()},t))}else S.cz.collectClickEvent(S.Bc.CcmBitableFieldSetClick,Object.assign({click:e},t))},v.hiddenFieldCard=function(){var e=v.state,t=e.editingField,n=e.showNewField,a=e.isListHoverTipVisible;v.isEdited&&!v.isForceCloseFieldCard||(t||n)&&(a||(v.newFieldCompRef=null,v.editFieldCompRef=null,v.setState({editingField:null,showNewField:!1})))},v.onFieldEdited=function(e,t){v.isEdited=e,v.isForceCloseFieldCard=t},v.handleAddClick=function(){v.collectFieldSetClickEvent(S.xD.FieldAdd),v.setState({showNewField:!0})},v.setAddFieldRef=function(e){v.newFieldCompRef=e},v.setEditFieldRef=function(e){v.editFieldCompRef=e},v.setAddItemRef=function(e){v.addItemRef=e},v.getAddItemRef=function(){return v.addItemRef},v.editField=function(){var e=v.props,t=e.source,n=e.module,a=v.state.contextMenuSelectField;v.setState(function(e){return{editingField:e.contextMenuSelectField}},function(){v.closeContextMenu(),S.ob.collectBitableEvent(S.On.BitableFieldOpenEditor,{table_id:v.activeTable.id,view_id:v.activeView.id,bitable_view_type:S.Cz[v.activeView.type],source:t,data_source:n}),a&&v.collectFieldSetClickEvent(S.xD.FieldEdit,{field_type:S.lC[a.fieldUIType]})})},v.deleteField=function(){var e,n=v.state.contextMenuSelectField;if(n){var t,a=v.props,i=a.bitableStore,o=a.tableId,r=Object(p.a)(i,n,o),l=(null===(e=v.state.contextMenuSelectField)||void 0===e?void 0:e.type)===S.og.DuplexLink,c=n.name,s="".concat(h("common.undo"),"(").concat(S.JD.undo,")"),d=h("Bitable_Field_DeleteFieldPopupTitleNew",{num:1});t=h(l?"Bitable_Field_DeleteFieldWithDuplexLinkDesc":"Bitable_Field_DeleteFieldPopupDescNew",{num:1},c,s),r&&(d=h("Bitable_AdvancedPermission_DeleteFieldPopupTitle"),t=h("Bitable_AdvancedPermission_DeleteFieldPopupDesc",c,s)),Object(S.rB)({title:d,message:t,buttons:[{text:h("common.cancel"),type:S.YA.default},{text:h("sheet.confirm_delete"),type:S.YA.warn,onClick:function(){var e=Object(S.uY)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.excuteDeleteField(n);case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}]}),n&&v.collectFieldSetClickEvent(S.xD.FieldDelete,{field_type:S.lC[n.fieldUIType]}),n&&S.cz.collectClickEvent(S.Bc.CcmBitableFieldDeleteClick,{scene_type:S.yE.TopBoard,field_type:S.lC[n.fieldUIType],target:S.Rw.None})}},v.excuteDeleteField=(t=Object(S.uY)(u.a.mark(function e(t){var n,a,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.props,a=n.onFieldDelete,i=n.module,e.next=3,a(t.id);case 3:S.ob.collectBitableEvent(S.On.BitableFieldDelete,{table_id:v.activeTable.id,view_id:v.activeView.id,bitable_view_type:S.Cz[v.activeView.type],bitable_field_type:S.lC[t.fieldUIType],scene:S.zE.Toolbar,data_source:i},!0);case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),v.onContextMenu=function(e,i){var t=v.state.contextMenuSelectField;if(t&&t.id===i.id)v.closeContextMenu();else{var o=e.currentTarget,n=Object(S.mB)(o),r={x:n.right+M,y:n.top-x};v.setState({contextMenuSelectField:i},function(){var e=v.props,t=e.fieldList,n=e.isEditFieldEnabled,a=[{text:h("common.edit"),onClick:v.editField,disabled:n(i.id)||Object(S.Xy)(i.fieldUIType),icon:E.a.createElement(S.IB.EditIconSvg,{className:"icon bitable-field__contextmenu-icon"})},{text:h("common.delete"),onClick:v.deleteField,icon:E.a.createElement(S.IB.DeleteIconSvg,{className:"icon bitable-field__contextmenu-icon"})}];0===t.indexOf(i.id)&&a.pop(),v.closeCtxMenu=Object(S.NB)({x:r.x,y:r.y,items:a,triggerElement:o,onClose:function(){v.setState({contextMenuSelectField:null})},className:"bitable-field__contextmenu-more"})}),e.persist()}},v.onClickFieldMore=function(e){var t=v.props.fieldList;e&&v.collectFieldSetClickEvent(S.xD.FieldMore,{field_type:S.lC[e.fieldUIType],is_index_column:String(0===t.indexOf(e.id))})},v.closeContextMenu=function(){v.closeCtxMenu&&v.closeCtxMenu(!0)},v.collectFieldSetEvent=function(e){var t=v.props,n=t.isEmbeddedInDoc,a=t.module,i=n?"doc":void 0;S.ob.collectBitableEvent(S.On.BitableFieldSet,Object.assign({table_id:v.activeTable.id,view_id:v.activeView.id,bitable_view_type:S.Cz[v.activeView.type],source:S.iz.Toolbar},e,{data_source:a,module:i}),!0)},v.handleSortStart=function(){v.setState({sorting:!0})},v.handleSortOver=function(e){var t=e.oldIndex,n=e.newIndex,a=v.props,i=a.renderer,o=a.frozenColInfo,r=a.resetFrozenColInfo,l=i.getActiveView();if(Object(S.kD)(l)&&o&&r){var c=o.dividerIndex;t<c&&c<=n?c--:c<=t&&n<c&&c++,r(c+o.deniedColCount)}},v.handleSortEnd=function(e){var t=e.oldIndex,n=e.newIndex,a=v.props,i=a.fieldList,o=a.allFieldList,r=a.fieldMap,l=a.renderer,c=a.onMoveField,s=l.getActiveView(),d=Object(g.arrayMove)(i,t,n);if(t=o.indexOf(i[t]),n=o.indexOf(i[n]),s&&s.viewPermission.publicLevel===S.fB.LOCKED)l.activeBitableWidget.events.emit(S.kC.ShowViewLockedModal,"toolbar");else{var u=r[o[t]],p=0;Object(S.kD)(s)&&(p=s.getFrozenColumnCount()),c(u.id,t<n?n+1:n);var b,f,m=0;Object(S.kD)(s)&&(m=s.getFrozenColumnCount(),null===(b=(f=v.props).resetFrozenColInfo)||void 0===b||b.call(f,m)),S.ob.collectBitableEvent(S.On.BitableColumnMove,{table_id:v.activeTable.id,view_id:v.activeView.id,bitable_view_type:S.Cz[v.activeView.type],bitable_field_type:S.lC[u.fieldUIType],data_source:v.props.bitableStore.Options.module,source:S.iz.Toolbar},!0),v.collectFieldDragEvent(s,t,n,p,m),v.setState({sorting:!1,fieldList:d})}},v.handleToggleHiddenField=function(e){var t=v.props,n=t.hiddenFieldsSet,a=t.renderer,i=t.onSetFieldHidden,o=a.getActiveView();if(o&&o.viewPermission.publicLevel===S.fB.LOCKED)a.activeBitableWidget.events.emit(S.kC.ShowViewLockedModal,"toolbar");else{var r=n.has(e.id);i(e.id,!r||null),v.collectFieldSetEvent({action:"change_visibility",visibility:r?1:0}),v.collectFieldSetClickEvent(S.xD.VisibleClick,{is_visible:r?"visible":"invisible",field_type:S.lC[e.fieldUIType]})}},v.state={contextMenuSelectField:null,editingField:null,showNewField:!1,sorting:!1,frozenColumnCount:v.getFrozenColCount(),isListHoverTipVisible:!1,fieldList:v.props.fieldList},v.updateActiveModel(e),v}return Object(S.bu)(a,n),Object(S.Pw)(a,[{key:"componentDidMount",value:function(){this.setState({fieldList:this.props.fieldList})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.tableId===e.tableId&&this.props.viewId===e.viewId||this.updateActiveModel(e),!this.props.hideAddField&&e.hideAddField&&this.state.showNewField&&this.hiddenFieldCard(),this.setState({fieldList:e.fieldList})}},{key:"updateActiveModel",value:function(e){var t=e.bitableStore,n=e.tableId,a=e.viewId,i=t.base.getTableById(n),o=i&&i.getViewById(a);i&&o&&(this.activeTable=i,this.activeView=o)}},{key:"getFrozenColCount",value:function(){var e=this.props.renderer.getActiveView(),t=null;return Object(S.kD)(e)&&(t=e.getFrozenColumnCount()),t}},{key:"collectFieldDragEvent",value:function(e,t,n,a,i){e&&Object(S.kD)(e)&&a!==i?this.collectFieldSetClickEvent(S.xD.FieldDrag,{from_field_idx:t,to_field_idx:n,before_freeze_field_count:a,after_freeze_field_count:i,is_index_column:"false",is_change_freeze_range:"true"}):this.collectFieldSetClickEvent(S.xD.FieldDrag,{from_field_idx:t,to_field_idx:n})}},{key:"setFieldHoverTipVisible",value:function(e){this.setState({isListHoverTipVisible:e}),this.props.setListHoverTipVisible(e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.fieldMap,a=e.hideAddField,i=e.hiddenFieldsSet,o=e.bitableStore,r=e.renderer,l=e.contentHeight,c=e.frozenColInfo,s=this.state.fieldList,d=this.state,u=d.showNewField,p=d.contextMenuSelectField,b=d.editingField,f=d.sorting,m=d.isListHoverTipVisible,v="bitable-field";return E.a.createElement(E.a.Fragment,null,E.a.createElement(L,{helperClass:"".concat(v,"__dragging"),lockAxis:"y",useDragHandle:!0,onSortStart:this.handleSortStart,onSortEnd:this.handleSortEnd,onSortOver:this.handleSortOver,frozenColInfo:c,preCls:v,fieldList:s,fieldMap:n,contentHeight:l,hiddenFieldsSet:i,contextMenuSelectField:p,editingField:b,onContextMenu:this.onContextMenu,activeView:this.activeView,activeTable:this.activeTable,setEditFieldCompRef:this.setEditFieldRef,hiddenFieldCard:this.hiddenFieldCard,onFieldEdited:this.onFieldEdited,bitableStore:o,handleToggleHiddenField:this.handleToggleHiddenField,sorting:f,renderer:r,className:a?"":"".concat(v,"__fields-wrap-border"),closeContextMenu:this.closeContextMenu,onClickFieldMore:this.onClickFieldMore,isListHoverTipVisible:m,setFieldHoverTipVisible:function(e){return t.setFieldHoverTipVisible(e)}}),!a&&E.a.createElement("div",{ref:this.setAddItemRef,onClick:this.handleAddClick,className:k()("".concat(v,"__add ").concat(v,"__item"),{"list-hover-tip-open":m&&u})},E.a.createElement(y.a,{className:"".concat(v,"__add-icon")}),E.a.createElement("span",{className:"".concat(v,"__add-text bitable-noselect")},h("bitable.create_field")),u&&E.a.createElement(S.fz,{fromType:S.gz.FloatToolbarAdd,x:256,y:0,getAnchorRef:this.getAddItemRef,onClose:this.hiddenFieldCard,table:this.activeTable,ref:this.setAddFieldRef,bitableStore:o,renderer:r,vLayoutInfo:{offsetUp:-32},view:this.activeView,isListHoverTipVisible:m,setFieldHoverTipVisible:function(e){return t.setFieldHoverTipVisible(e)}})))}}]),a}(n.Component),W=Object(S.oA)(function(e){var t=e.env;return{module:t.getModuleType(),isEmbeddedInDoc:t.isEmbeddedType(S.pA.EmbeddedInDoc)}},function(e,t){var n=e.operate,a=e.base,i=t.tableId,o=t.viewId,r=a.getTable(i);function l(e){return n.tableOperate.delField({tableId:i,viewId:o,fieldId:e})}function c(e){if(r){var t=r.getField(e);return!!t&&Object(S.AE)(t)}return!1}function s(e,t){n.tableOperate.moveFieldSync({fields:[e],tableId:i,target:t,viewId:o})}function d(e,t){n.tableOperate.setFieldHiddenSync({fieldIds:[e],hidden:t,tableId:i,viewId:o})}return{onFieldDelete:l,isEditFieldEnabled:c,onMoveField:s,onSetFieldHidden:d}})(R),V=function(e){function t(){return Object(S.ov)(this,t),e.apply(this,arguments)||this}return Object(S.bu)(t,e),Object(S.Pw)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.action,a="bitable-field";return E.a.createElement("div",{className:"".concat(a,"__title-wrap")},E.a.createElement("div",{className:"bitable-noselect ".concat(a,"__title ").concat(a,"__item")},E.a.createElement("span",null,t,E.a.createElement(S.uD,{action:n}))))}}]),t}(n.PureComponent),H=function(t){function n(e){var u;return Object(S.ov)(this,n),(u=t.call(this,e)||this).resetFrozenColInfo=function(e){var t=u.props,n=t.renderer,a=t.fieldList,i=n.getActiveView(),o=!1,r=-1,l=0;if(Object(S.kD)(i)){e=e||i.getFrozenColumnCount();for(var c=i.getAllFields(),s=0;s<e;s++)i.table.isDeniedField(c[s])&&l++;0<=e&&e<a.length&&(o=!0,r=e-l)}var d=u.state.frozenColInfo;o===d.renderDivider&&r===d.dividerIndex||u.setState({frozenColInfo:{renderDivider:o,dividerIndex:r,deniedColCount:l}})},u.handleDocumentClick=function(e){if(u.props.isOpen&&!u.state.isListHoverTipVisible){for(var t=e.target;t;){if(t.className&&t.className.indexOf){var n,a;if(~t.className.indexOf("bitable-float-toolbar-btn-field")||~t.className.indexOf("toolbar-field-wrapper"))return void(u.fieldList&&u.fieldList.hiddenFieldCard());if(t.className.match(/(b-field-popover)|(bitable-field-popover)|(bitable-view-locked-tip-modal)|(J-bitable-alert)|(ellipsis)|(bitable-dropdown--list-title)|(bitable_autoNumber_field)|(field-option-list)/)||null!==(n=document)&&void 0!==n&&null!==(a=n.querySelector(".select-dropdown--list"))&&void 0!==a&&a.contains(t))return;if(t===u.state.selfRef||~t.className.indexOf("bitable-field__contextmenu-more")||"spark-popup"===t.getAttribute("data-sel"))return void(u.fieldList&&u.fieldList.hiddenFieldCard())}t=t.parentElement}u.fieldList&&u.fieldList.hiddenFieldCard(),u.toggleFieldPanel(u.props.tableId,!1)}},u.toggleFieldPanel=function(e,t){var n=u.props,a=n.toggleFieldPanel,i=n.setFloatToolbarVisibility;n.embeddedType===S.pA.EmbeddedInDoc&&i(t),a(t)},u.setSelfRef=function(e){u.setState({selfRef:e})},u.setFieldListRef=function(e){u.fieldList=e},u.setListHoverTipVisible=function(e){u.setState({isListHoverTipVisible:e})},u.state={selfRef:null,frozenColInfo:{renderDivider:!1,dividerIndex:-1,deniedColCount:0},isListHoverTipVisible:!1},u}return Object(S.bu)(n,t),Object(S.Pw)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDocumentClick),this.bitableContainer=Object(S.IC)(this.props.embeddedType)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.props.isOpen!==e.isOpen){var n=e.tableId,a=e.viewId,i=e.isOpen,o=e.renderer.getActiveView();if(!o)return;S.ob.collectBitableEvent(S.On.BitableOpenFieldsSetting,{table_id:n,view_id:a,bitable_view_type:S.Cz[o.type],is_open:i?1:0,source:"toolbar",data_source:this.props.module})}(this.props.tableId!==e.tableId||this.props.viewId!==e.viewId&&this.props.isOpen&&e.isOpen)&&this.toggleFieldPanel(this.props.tableId,!1),!this.props.isOpen&&e.isOpen&&(this.onShow(),this.resetFrozenColInfo()),(1===e.fieldList.length&&1<this.props.fieldList.length||1<e.fieldList.length&&1===this.props.fieldList.length)&&setTimeout(function(){return t.resetFrozenColInfo()},0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleDocumentClick)}},{key:"onShow",value:function(){var e=this.props.renderer.getActiveView(),t=null==e?void 0:e.type,n=null==e?void 0:e.getColumnCount(),a=null==e?void 0:e.getVisibleFields().length,i=function(e){var t=null==e?void 0:e.toString();S.cz.collectBitableEvent(S.Rw.CcmBitableFieldSetView,{field_count:n,is_visible_field:t,visible_field_count:a})};t===S.az.Kanban?i(e.getCardConfig().showFieldName):t===S.az.Gallery?i(e.getGalleryConfig().showFieldName):i()}},{key:"getPanelOtherHeight",value:function(){var e=this.props,t=e.panelContentHeight,n=e.fieldAddable,a="number"==typeof t?t:0;return a+=this.props.panelTitle?w:0,n&&(a+=d),a}},{key:"getPanelStyle",value:function(){var e=this.props,t=e.anchorInfo,n=e.fieldList,a=e.fieldPanelWidth,i=void 0===a?S.CE:a,o=e.getOffsetX,r=e.isDeniedField,l=e.embeddedType,c=this.state,s=c.selfRef,d=c.frozenColInfo,u=t&&t.anchorWidth;u||(u=S.DE);var p={left:u-i/2,top:S.wC,transform:"none",width:i};o&&(p.left+=o());var b=d.renderDivider?P:0,f=n.filter(function(e){return!r(e)}).length*O+_+b+1;if(t){var m=null;t.isParent&&s?m=s.parentElement:t.getAnchorRef&&(m=t.getAnchorRef());var v=this.getPanelOtherHeight(),h=v+f+2;if(m){var g=l,y=g===S.pA.EmbeddedInDoc,C={height:h,offsetDown:y?S.vC:S.wC,offsetUp:y?S.xC:S.yC,paddingBottom:F,viewportTop:Object(S.zC)(g)},w={childSelector:".bitable-field .bitable-field__fields-wrap",otherHeight:v},E=Object(S.tC)(m,C,w),k=Object(S.BE)(m,C,w);k&&(f=k),Object.assign(p,E),Object(S.bE)(m,p,{width:i},this.bitableContainer)}}return{style:p,childContentHeight:f}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.fieldList,a=e.fieldMap,i=e.hiddenFieldsSet,o=e.bitableStore,r=e.renderer,l=e.tableId,c=e.viewId,s=e.ExtraContent,d=e.panelTitle,u=e.guideAction,p=e.panelTitleDivider,b=e.fieldAddable;if(!t)return null;var f=r.getActiveTable(),m="bitable-field",v=this.getPanelStyle(),h=v.style,g=v.childContentHeight,y=!!this.state.selfRef,C=n;return f&&(C=n.filter(function(e){return!f.isDeniedField(e)})),E.a.createElement("div",{className:m,ref:this.setSelfRef,style:h},E.a.createElement(S.AC,{panelStyle:h}),d&&E.a.createElement(V,{tableId:l,title:d,action:u||S.WD.CustomizeColumns}),p&&E.a.createElement("div",{className:"".concat(m,"-divider")}),s,s&&E.a.createElement("div",{className:"".concat(m,"-divider")}),y&&E.a.createElement(W,{ref:this.setFieldListRef,bitableStore:o,tableId:l,viewId:c,fieldList:C,allFieldList:n,fieldMap:a,contentHeight:g,hiddenFieldsSet:i,renderer:r,hideAddField:!b,source:S.iz.Toolbar,frozenColInfo:this.state.frozenColInfo,resetFrozenColInfo:this.resetFrozenColInfo,setListHoverTipVisible:this.setListHoverTipVisible}))}}]),n}(n.Component),z=Object(e.a)(t.c,Object(t.b)(function(e){return{setFloatToolbarVisibility:e.toolbarStore.toggleFloatToolbar}}),Object(S.oA)(function(e,t){var n,a,i,o=e.permissionStore,r=e.base,l=e.env,c=t.tableId,s=r.getTable(c),d=null!==(n=null==s?void 0:s.getActiveViewId())&&void 0!==n?n:"",u=null==s?void 0:s.getView(d),p=null!==(a=null==u?void 0:u.getAllFields())&&void 0!==a?a:[],b=p.reduce(function(e,t){var n=s.getField(t);if(n){var a=n.getFieldUIType();e[t]={id:t,type:n.getType(),name:n.getName(),fieldUIType:a,allowedEditModes:n.getAllowedEditModes(),property:n.getProperty(),groupType:Object(S.EE)(a)}}return e},{}),f=new Set(null!==(i=null==u?void 0:u.getHiddenFields())&&void 0!==i?i:[]);return{fieldAddable:o.hasPermission(S.qy.Field,{tableId:c},S.ry.Addable),fieldList:Object(S.hI)(p),fieldMap:b,hiddenFieldsSet:f,viewId:d,embeddedType:l.getEmbeddedType(),module:l.getModuleType()}},function(e,t){var n=e.base,a=t.tableId,i=n.getTable(a);function o(e){return i.isDeniedField(e)}return{isDeniedField:o}},function(n,e,t){var a,i=e.tableId,o=n.base.getTable(i),r=null!==(a=null==o?void 0:o.getActiveViewId())&&void 0!==a?a:"";t(function(e){var t=n.permissionStore;return t.subscribe(e),function(){return t.unsubscribe(e)}}),t(function(e){var t;return null==o?void 0:o.batchBind((Object(S.Ww)(t={},S.uA.AddField,e),Object(S.Ww)(t,S.uA.DeleteField,e),Object(S.Ww)(t,S.uA.ActiveViewChange,e),Object(S.Ww)(t,S.uA.FieldAttrChange,e),t))},[i]),t(function(e){var t,n=null==o?void 0:o.getView(r);return null==n?void 0:n.batchBind((Object(S.Ww)(t={},S.uA.HiddenFieldChange,e),Object(S.Ww)(t,S.uA.MoveField,e),t))},[o,r])}))(H)}).call(this,Y("vb163"))},vb398:function(e,gn,yn){"use strict";(function(O){yn.d(gn,"a",function(){return At}),yn.d(gn,"b",function(){return Fe}),yn.d(gn,"c",function(){return Gt}),yn.d(gn,"d",function(){return Oe}),yn.d(gn,"e",function(){return Xt}),yn.d(gn,"f",function(){return ye}),yn.d(gn,"g",function(){return Zt}),yn.d(gn,"h",function(){return $t}),yn.d(gn,"i",function(){return en}),yn.d(gn,"j",function(){return tn}),yn.d(gn,"k",function(){return vn}),yn.d(gn,"l",function(){return nn}),yn.d(gn,"m",function(){return on}),yn.d(gn,"n",function(){return qt}),yn.d(gn,"o",function(){return cn}),yn.d(gn,"p",function(){return sn}),yn.d(gn,"q",function(){return dn}),yn.d(gn,"r",function(){return rn}),yn.d(gn,"s",function(){return mn}),yn.d(gn,"t",function(){return un}),yn.d(gn,"u",function(){return pn}),yn.d(gn,"v",function(){return Jt}),yn.d(gn,"w",function(){return hn}),yn.d(gn,"x",function(){return bn}),yn.d(gn,"y",function(){return fn}),yn.d(gn,"z",function(){return Bt}),yn.d(gn,"A",function(){return vt});var g,e,Y=yn("vb143"),_=yn("vb103"),m=yn.n(_),b=(yn("vb147"),yn("vb145")),c=(yn("vb148"),yn("vb367")),q=yn("vb322"),t=yn("vb159"),E=yn.n(t),n=yn("vb2197"),d=yn("vb2172"),u=yn("vb2210"),p=yn("vb2204"),r=yn("vb1297"),f=yn("vb2185"),v=yn("vb1921"),h=yn("vb2166"),y=yn("vb2167"),s=yn("vb952"),C=yn("vb2201"),w=yn("vb2236"),k=yn("vb2155"),a=yn("vb2214"),i=yn("vb2215"),o=yn("vb2216"),l=yn("vb2217"),S=yn("vb2170"),F=yn("vb2237"),T=yn("vb2238"),I=yn("vb2239"),D=yn("vb2203"),N=yn("vb2240"),B=yn("vb2202"),P=yn("vb1905"),M=yn("vb2177"),x=yn("vb2205"),j=yn("vb2193"),L=yn("vb2191"),R=yn("vb2195"),W=yn("vb1907"),V=yn("vb2158"),H=yn("vb773"),z=yn("vb2200"),U=yn("vb1922"),K=yn("vb152"),X=yn.n(K),Z=yn("vb154"),J=(yn("vb112"),yn("vb164"),yn("vb167"),yn("vb113"),yn("vb162")),Q=(yn("vb119"),yn("vb116"),yn("vb155"),yn("vb118"),yn("vb120"),yn("vb174"),yn("vb121"),yn("vb117"),yn("vb115")),$=yn("vb111"),ee=yn("vb180"),te=(yn("vb126"),yn("vb125"),yn("vb114")),ne=yn("vb210"),ae=yn("vb377"),ie=yn("vb414"),oe=yn.n(ie),re=yn("vb123"),le=yn("vb185"),ce=yn("vb382"),se=yn("vb228"),de=yn("vb399"),ue=yn("vb196"),pe=yn("vb357"),be=yn("vb381"),fe=yn("vb331"),me=yn.n(fe),ve=yn("vb207"),he=yn("vb208"),ge=yn("vb209"),ye=(yn("vb110"),{kanbanChangeView:Y.iD,gridChangeView:Y.iC,field:Y.jC,group:Y.fC});(e=g||(g={})).Group="Group",e.Sort="Sort";var Ce,we,Ee,ke,Se,Oe=function(t){function n(e){var u;return Object(Y.ov)(this,n),(u=t.call(this,e)||this).handleGroupClick=function(){u.props.kanbanGroupOpened?u.removeGroupMenu():(Y.cz.collectClickEvent(Y.Bc.CcmBitableToolbarClick,{click:Y.LC.GROUPING_CONDITIN,target:Y.Rw.CcmBitableGroupingConditionView,ui_version:u.props.uiVersion?u.props.uiVersion:""}),u.openGroupMenu())},u.onGroupOptionClick=function(e){var t=u.props,n=t.tableId,a=t.viewId,i=t.renderer,o=t.moduleType,r=t.view,l=t.onSetGroup;if((0,t.hasToolBarEntityPermission)(Y.qy.Group)&&n&&a){if((null==r?void 0:r.publicLevel)===Y.fB.LOCKED)return void i.activeBitableWidget.events.emit(Y.kC.ShowViewLockedModal,"toolbar");var c=l(e),s=c.fieldType,d=c.fieldStringType;Y.ob.collectBitableEvent(Y.On.BitableSetGroup,{bitable_view_type:"kanban",source:"toolbar",data_source:o,bitable_field_type:d},!0),Y.cz.collectBitableEvent(Y.Bc.CcmBitableGroupingConditionClick,{click:"select_condition",field_type:Y.lC[s],target:Y.oz})}u.removeGroupMenu()},u.collectClickToolBarItemsEvent=function(e,t,n,a){var i={click:e,target:t||Y.oz,is_premium_limited:a?"true":"false"};n&&(i.ui_version=n),Y.cz.collectBitableEvent(Y.Bc.CcmBitableToolbarClick,i)},u.collectSetGroupEvent=function(e){u.collectEvent(e,g.Group)},u.collectSetSortEvent=function(e){u.collectEvent(e,g.Sort)},u.hasDeniedField=function(e,t){if(t){var n,a=Object(Y.WB)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value.fieldId;if(e&&e.isDeniedField(i))return!0}}catch(e){a.e(e)}finally{a.f()}}return!1},u.handleClickGroupSettingsBtnEvent=function(){var e=u.props.view;if(e){var t=e.type;t===Y.az.Kanban&&u.groupRef?(Object(Y.gC)(Y.fC),u.handleGroupClick()):t===Y.az.Grid&&u.handleClick(Y.LC.GROUP)}},u.handleReminderClick=function(){u.props.renderer.activeBitableWidget.events.emit(Y.kC.SetReminder,Y.mC.TOOLBAR)},u.handleFormCreateClick=function(){u.collectClickToolBarItemsEvent(Y.PC[Y.LC.FORM_CREATE]),u.props.onAddFormView()},u.handleFormShareClick=function(){u.collectClickToolBarItemsEvent(Y.PC[Y.LC.FORM_SHARE]),u.handleClick(Y.LC.FORM_SHARE)},u.formStorageManager=new c.b(e.renderer.storageManager),u}return Object(Y.bu)(n,t),Object(Y.Pw)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.editable&&this.props.tableId===e.tableId&&this.props.viewId===e.viewId||(!e.getLocalEditable(Y.qy.Filter)&&e.openFilter&&e.tableId&&e.toggleFilter(!1),this.props.kanbanGroupOpened&&this.removeGroupMenu());var t=e.view,n=this.props.view;this.props.tableId===e.tableId&&this.props.viewId===e.viewId&&t&&n&&(null==t?void 0:t.publicLevel)!==(null==n?void 0:n.publicLevel)&&this.hidePopup()}},{key:"hidePopup",value:function(){var e=this.props,t=e.openFilter,n=e.groupOpened,a=e.rowHeightPanelOpened,i=e.sortPanelOpened,o=e.fieldPanelOpened,r=e.ganttBarSettingsPanelOpened,l=e.kanbanGroupOpened;e.tableId&&(t&&(0,e.toggleFilter)(!1),n&&(0,e.toggleGroup)(!1),a&&(0,e.toggleRowHeightPanel)(!1),i&&(0,e.toggleSortPanel)(!1),o&&(0,e.toggleFieldPanel)(!1),r&&(0,e.toggleGanttBarSettingsPanel)(!1),l&&this.removeGroupMenu())}},{key:"openGroupMenu",value:function(){var e=this.props,t=e.tableId,n=e.viewId,a=e.toggleKanbanGroup;(0,e.hasToolBarEntityPermission)(Y.qy.Group)&&(a(!0),Y.ob.collectBitableEvent(Y.On.BitableOpenGroup,{table_id:t,view_id:n,bitable_view_type:Y.Cz[Y.az.Kanban],is_open:1,source:"toolbar",data_source:this.props.moduleType}),Y.cz.collectBitableEvent(Y.Rw.CcmBitableGroupingConditionView))}},{key:"getBitableContainer",value:function(){var e=this.props,t=e.embeddedType,n=e.isFullScreen;return t===Y.pA.EmbeddedInDoc?n?document.querySelector(".bitable-in-doc-fullscreen #bitable-container"):null:document.getElementById("bitable-container")}},{key:"collectEvent",value:function(e,t){var n=e.action,a=e.fieldId,i=e.desc,o=this.props,r=o.tableId,l=o.viewId,c=o.groupInfo,s=o.sortInfo,d=o.view,u=o.moduleType,p=o.getFieldStringType,b=o.isAutoSort,f=[];t===g.Group?f=null!=c?c:null:t===g.Sort&&(f=null!=s?s:null);var m=null;if(void 0!==i)m=i;else if(f)for(var v=0;v<f.length;v++)if(f[v].fieldId===a){m=f[v].desc;break}var h={action:n,table_id:r,view_id:l,source:"toolbar",bitable_view_type:d&&Y.Cz[d.type],direction:m?Y.nC.InvertedOrder:Y.nC.InOrder,data_source:u,bitable_field_type:a?p(a):void 0};switch(t){case g.Group:Y.ob.collectBitableEvent(Y.On.BitableSetGroup,h,!0);break;case g.Sort:h.auto_sort=b,Y.ob.collectBitableEvent(Y.On.BitableSetSort,h,!0);break;default:return}}},{key:"handleClick",value:function(e,t){var n=this.props,a=n.editable,i=n.openFilter,o=n.groupOpened,r=n.sortPanelOpened,l=n.findPanelOpened,c=n.shareFormPanelOpened,s=n.formSettingsPanelOpened,d=n.fieldPanelOpened,u=n.rowHeightPanelOpened,p=n.toggleFilter,b=n.toggleGroup,f=n.renderer,m=n.toggleSortPanel,v=n.toggleFindPanel,h=n.toggleFormSharePanel,g=n.toggleFormSettingsPanel,y=n.toggleRowHeightPanel,C=n.tableId,w=n.viewId,E=n.toggleFieldPanel,k=n.ganttBarSettingsPanelOpened,S=n.toggleGanttBarSettingsPanel,O=n.hasEditRecordPermission,_=n.moduleType,F=n.undo,T=n.redo,I=n.view,D=n.sortInfo,N=n.groupInfo,B=n.filterInfo,P=n.hasToolBarEntityPermission,M=n.bitableStore,x=ye.field,j=a&&O(),L=C&&M.base.getTableById(C);switch(e){case"toggle":break;case Y.LC.FILTER:if(I&&I.publicLevel===Y.fB.LOCKED){f.activeBitableWidget.events.emit(Y.kC.ShowViewLockedModal,"toolbar");break}if(P(Y.qy.Filter)&&C){p(!i),Y.ob.collectBitableEvent(Y.On.BitableToolbarFilterOpen,{table_id:C,view_id:w,bitable_view_type:I&&Y.Cz[I.type],is_open:Number(!i),source:"button",data_source:_});var R=L&&this.hasDeniedField(L,null==B?void 0:B.conditions);this.collectClickToolBarItemsEvent(Y.PC[Y.LC.FILTER],Y.Rw.CcmBitableFilterSetView,t,R)}break;case Y.LC.GROUP:if(Object(Y.Ky)(Y.Jy.GROUPBY),Object(Y.Iy)(Y.Jy.GROUPBY),I&&I.publicLevel===Y.fB.LOCKED){f.activeBitableWidget.events.emit(Y.kC.ShowViewLockedModal,"toolbar");break}if(P(Y.qy.Group)&&C){b(!o),Y.ob.collectBitableEvent(Y.On.BitableOpenGroup,{table_id:C,view_id:w,bitable_view_type:I&&Y.Cz[I.type],is_open:Number(!o),source:"toolbar",data_source:_});var W=L&&this.hasDeniedField(L,N);this.collectClickToolBarItemsEvent(Y.PC[Y.LC.GROUP],Y.Rw.CcmBitableGroupSetView,t,W)}break;case Y.LC.FIELD:x&&Object(Y.gC)(x),P(Y.qy.Field)&&C&&(E(!d),(null==I?void 0:I.type)===Y.az.Kanban||(null==I?void 0:I.type)===Y.az.Gallery?this.collectClickToolBarItemsEvent(Y.PC[Y.LC.Card_Set],Y.Rw.CcmBitableFieldSetView,t):this.collectClickToolBarItemsEvent(Y.PC[Y.LC.FIELD],Y.Rw.CcmBitableFieldSetView,t));break;case Y.LC.GANTT_BAR_SETTINGS:var V=f.activeBitableWidget.getGanttWidget();if(!V||!C||!P(Y.qy.Field))return;S(!k);var H=V.getSource().getTable(),z=V.getSource().getView();Y.ob.collectBitableEvent(Y.On.BitableGanttBarTime,{tableId:H.id,viewId:z.id,click_time_bar:Y.oC.GANTT_SETTING}),Y.ob.collectBitableEvent(Y.On.BitableOpenSort,{table_id:C,view_id:w,bitable_view_type:z&&Y.Cz[z.type],is_open:Number(!k),source:"toolbar",data_source:_}),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.GANTT_BAR_SETTINGS],Y.Rw.CcmBitableGanttSetView,t);break;case Y.LC.SORT:if(I&&I.publicLevel===Y.fB.LOCKED){f.activeBitableWidget.events.emit(Y.kC.ShowViewLockedModal,"toolbar");break}if(P(Y.qy.Sort)&&C){m(!r),Y.ob.collectBitableEvent(Y.On.BitableOpenSort,{table_id:C,view_id:w,bitable_view_type:I&&Y.Cz[I.type],is_open:Number(!r),source:"toolbar",data_source:_});var U=L&&this.hasDeniedField(L,D);this.collectClickToolBarItemsEvent(Y.PC[Y.LC.SORT],Y.Rw.CcmBitableSortSetView,t,U)}break;case Y.LC.FIND:C&&w&&(v(!l),Y.ob.collectBitableEvent(Y.On.BitableToggleFindpanel,{table_id:C,view_id:w,bitable_view_type:I&&Y.Cz[I.type],is_open:Number(!l),source:"toolbar"}),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.FIND],Y.Rw.None,t));break;case Y.LC.ROW_HEIGHT:if(I&&I.publicLevel===Y.fB.LOCKED){f.activeBitableWidget.events.emit(Y.kC.ShowViewLockedModal,"toolbar");break}P(Y.qy.RowHeight)&&C&&(y(!u),Y.ob.collectBitableEvent(Y.On.BitableOpenRowHeightPanel,{table_id:C,view_id:w,bitable_view_type:I&&Y.Cz[I.type],is_open:Number(!u),source:"toolbar",data_source:_}),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.ROW_HEIGHT],Y.Rw.CcmBitableRowheightSetView,t));break;case Y.LC.COMMENT:this.handleCommentClick(),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.COMMENT],Y.Rw.CcmCommentView,t);break;case Y.LC.MENTION:this.handleMentionClick(),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.MENTION]);break;case Y.LC.REMINDER:this.handleReminderClick(),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.REMINDER]);break;case Y.LC.UNDO:j&&(F(),this.collectUndoRedoEvent("undo"),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.UNDO],Y.Rw.None,t));break;case Y.LC.REDO:j&&(T(),this.collectUndoRedoEvent("redo"),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.REDO],Y.Rw.None,t));break;case Y.LC.ADD:this.addRecordAccordToView(),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.ADD],Y.Rw.None,t);break;case Y.LC.FORM_CREATE:this.handleFormCreateClick(),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.FORM_CREATE],Y.Rw.None,t);break;case Y.LC.FORM_SHARE:C&&w&&(h(!c),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.FORM_SHARE],Y.Rw.None,t),Y.cz.collectClickEvent(Y.Bc.CCMBitableFormShareClick,{click:"share",target:Y.Rw.CCMBitableFormPermissionView}));break;case Y.LC.FORM_EDIT:C&&w&&(this.formStorageManager.setFormMode(C,w,Y.MC.Edit),f.eventManager.emit(Y.ay.SetFormMode,{formMode:Y.MC.Edit,tableId:C,viewId:w}),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.FORM_EDIT],Y.Rw.None,t));break;case Y.LC.FORM_SUBMIT:C&&w&&(this.formStorageManager.setFormMode(C,w,Y.MC.Submit),f.eventManager.emit(Y.ay.SetFormMode,{formMode:Y.MC.Submit,tableId:C,viewId:w}),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.FORM_SUBMIT],Y.Rw.None,t));break;case Y.LC.FORM_SETTINGS:C&&w&&(s||Object(q.b)(C,w),g(w,!s),this.collectClickToolBarItemsEvent(Y.PC[Y.LC.FORM_SETTINGS],Y.Rw.None,t))}}},{key:"addRecordAccordToView",value:function(){var e=this.props,t=e.renderer,n=e.addRecordInCard,a=e.view;if(a){var i=a.type;if(i===Y.az.Grid){var o=null,r=t.activeBitableWidget.getGridWidget();n||(o=r.getFirstGroupCellValue()),r.events.emit(Y.pC.AppendRow,{values:o,row:0,insertIndex:0,direction:Y.qC.Top})}else if(i===Y.az.Kanban)t.activeBitableWidget.getKanbanWidget().events.emit(Y.rC.AppendRecord,{groupValue:null,needScrollToAddedRecord:!0});else if(i===Y.az.Gallery)t.activeBitableWidget.getGalleryWidget().events.emit(Y.sC.AddRecord,{direction:Y.qC.Top});else if(i===Y.az.Gantt){var l=t.activeBitableWidget.getGridWidgetInGantt(),c=null;n||(c=l.getFirstGroupCellValue()),l.events.emit(Y.pC.AppendRow,{values:c,row:0,insertIndex:0,direction:Y.qC.Top})}}}},{key:"collectUndoRedoEvent",value:function(e){var t=this.props,n=t.view,a=t.tableId,i=t.viewId;Y.ob.collectBitableEvent(Y.On.BitableToolbarUndoRedo,{action:e,table_id:a,view_id:i,bitable_view_type:n&&Y.Cz[n.type]},!0)}},{key:"getGroupFieldOfView",value:function(e){if((null==e?void 0:e.getType())===Y.az.Kanban){var t=e.getGroupField();if(t)return{id:t.id,name:t.name,type:t.type,fieldUIType:t.fieldUIType}}return null}},{key:"showGroupField",value:function(e){var t=e||this.props,n=t.tableId,a=t.viewId,i=t.view,o=(0,t.getKanbanGroupField)(n,a);return!!i&&i.type===Y.az.Kanban&&!!o}},{key:"removeGroupMenu",value:function(){(0,this.props.toggleKanbanGroup)(!1)}},{key:"handleCommentClick",value:function(){}},{key:"handleMentionClick",value:function(){}}]),n}(_.PureComponent),_e="bitable-toolbar__group-menu",Fe=function(a){function i(){var r;Object(Y.ov)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=a.call.apply(a,[this].concat(t))||this).handleDocumentClick=function(e){var t=r.props,n=t.toggleKanbanGroup;if(t.isOpen){var a=e.target,i=r.panelRef,o=i&&i.parentElement;o&&!o.contains(a)&&n(!1)}},r.setPanelRef=function(e){r.panelRef=e},r}return Object(Y.bu)(i,a),Object(Y.Pw)(i,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDocumentClick)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isOpen&&!this.props.isOpen&&(this.panelStyle=this.getPanelStyle())}},{key:"componentWillUnmount",value:function(){this.panelRef=null,document.removeEventListener("mousedown",this.handleDocumentClick)}},{key:"getPanelStyle",value:function(){var e=this.props,t=e.groupFields,n=e.getAnchorRef,a=e.bitableType,i=t.length;if(n&&0<i){var o=n();if(o){var r=42,l=i*Y.BC+r,c=a===Y.pA.EmbeddedInDoc,s=Object(Y.tC)(o,{height:l,paddingBottom:Y.uC,offsetDown:c?Y.vC:Y.wC,offsetUp:c?Y.xC:Y.yC,viewportTop:Object(Y.zC)(a)},{otherHeight:r});return{top:s.top,maxHeight:s.maxHeight}}}return{top:32}}},{key:"renderPlaceholder",value:function(){return m.a.createElement("div",{className:"bitable-layout-row bitable-layout-cross-center ".concat(_e,"-item")},m.a.createElement(n.a,{className:"icon"}),m.a.createElement("span",{className:"".concat(_e,"-item-text")},O("bitable.no_group_field")))}},{key:"renderFieldPanel",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"".concat(_e,"-prepend")},O("bitable.choose_group_field")),this.renderFieldItems())}},{key:"renderFieldItems",value:function(){var e=this.props,t=e.groupFields,a=e.selectedField,i=e.onItemClick,n=this.panelStyle.maxHeight,o=void 0===n?"":n;return m.a.createElement("ul",{style:{maxHeight:o},className:"".concat(_e,"-list b-ud-scrollbar")},t.map(function(e){var t=Object(Y.aD)(e),n=Object(Y.Uw)(t);return m.a.createElement("li",{className:E()("".concat(_e,"-item ").concat(_e,"-list-item"),{selected:!!a&&a.id===e.id}),key:e.id,onClick:function(){return i(e.id)}},m.a.createElement(n,{className:"icon"}),m.a.createElement("span",{className:"".concat(_e,"-item-text")},e.name))}))}},{key:"render",value:function(){var e=this.props,t=e.groupFields;if(!e.isOpen)return null;var n=this.panelStyle.top;return m.a.createElement("div",{style:{top:n},className:"".concat(_e," bitable-noselect"),ref:this.setPanelRef},m.a.createElement(Y.AC,{panelStyle:this.panelStyle}),0===t.length?this.renderPlaceholder():this.renderFieldPanel())}}]),i}(m.a.PureComponent),Te=150,Ie=8,De=377,Ne=20,Be=0,Pe={findText:"",searching:!1,total:0,current:0,position:{x:0,y:0},isZeroPosition:!1},Me=(Ce=Object(re.Bind)(),we=function(n){function a(e){var p;Object(Y.ov)(this,a),(p=n.call(this,e)||this)._isMounted=!1,p.isComposing=!1,p.collaSearchRev=-1,p.isUnfold=!1,p.searchHelper=null,p.panelDom=null,p.search=Object(ee.a)(Object(Y.uY)(X.a.mark(function e(){var t,n,a,i,o,r,l,c,s,d,u;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.state.findText,n=Object(ae.a)(t),a=p.props,i=a.tableId,o=a.findPanelOpened,r=a.bitableStore,l=a.storeFindKeywords,o){e.next=5;break}return e.abrupt("return");case 5:if(r.base.getValidTableIds().map(function(e){l(e,n)}),l(i,t),c=Object(Y.DC)(p.getSearchBaseOpts()),s=c.table,d=c.view,s&&d&&n){e.next=11;break}return e.abrupt("return");case 11:p.searchHelper=new Y.CC(s,d,n,p.getSearchBaseOpts),p.isAsyncSearch?(p.handleFirstSearchResult=function(){p.handleFirstSearchResult=void 0,p.clearBorderHighlight(),p.borderHighlight(!0)},p.searchHelper.searchNonBlocking(p.handleSearchResult).catch(J.a)):(u=p.searchHelper.syncSearch(),!p.isUnfold&&p.unfoldGroups(),p.updateHitInfo(d,u),p.highlightSyncSearchResult(u)),p.collectEvent(Y.On.BitableFindpanelDoSearch);case 14:case"end":return e.stop()}},e)})),Te,{leading:!0,trailing:!0}),p.state=Pe,p.openVCFollow=function(){Object(Y.Fx)(Y.Gx.BitableSearch,p.replayVCFollowState),p.sendVCStateChange()},p.closeVCFollow=function(){Object(Y.Ix)(Y.Gx.BitableSearch,Object.assign({},p.getVCFollowState(),{openStatus:Y.Dy.Close})),Object(Y.Hx)(Y.Gx.BitableSearch,p.replayVCFollowState)},p.getVCFollowState=function(){return{tableId:p.props.tableId,viewId:p.props.viewId,openStatus:p.props.findPanelOpened?Y.Dy.Open:Y.Dy.Close,searchText:p.props.keywords||"",searchFocusIndex:p.state.current}},p.sendVCStateChange=function(){Object(Y.Ix)(Y.Gx.BitableSearch,p.getVCFollowState())},p.onKeydown=function(e){var t=e.shiftKey,n=e.altKey,a=e.keyCode,i=e.metaKey,o=e.ctrlKey;if(Y.rx.mac||Y.rx.isIPad){var r=[i,o];o=r[0],i=r[1]}a===Y.sx.F&&o&&!i&&!t&&!n&&p.findInput&&(p.findInput.focus(),p.findInput.select(),e.preventDefault(),e.stopPropagation())},p.getContextListeners=function(){var e;return Object(Y.Ww)(e={},Y.ay.OperationProduced,p.operationProduced),Object(Y.Ww)(e,Y.ay.ChangesetApplied,p.changesetApplied),e},p.bindEvents=function(){var e=p.props,t=e.bitableStore,n=e.tableId,a=p.getContextListeners();t.addEventListeners(n,a)},p.unbindEvents=function(){var e=p.props,t=e.bitableStore,n=e.tableId,a=p.getContextListeners();t.removeEventListeners(n,a)},p.handleClose=function(){var e=p.props,t=e.toggleFindPanel,n=e.findPanelOpened,a=e.viewId;t(!1),Y.ob.collectBitableEvent(Y.On.BitableToggleFindpanel,{is_open:Number(!n),viewId:a})},p.onPrevBtnClick=function(){p.nav(!1)},p.onNextBtnClick=function(){p.nav(!0)},p.collectEvent=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=p.props,a=n.tableId,i=n.viewId,o=Object(Y.DC)(p.getSearchBaseOpts()),r=o.table,l=o.view;if(r&&l){var c={table_id:a,view_id:i,bitable_view_type:l&&Y.Cz[l.type],source:"findpanel"},s=Object(ne.a)(c,t);Y.ob.collectBitableEvent(e,s)}},p.nav=function(e){var t,n=p.state,a=n.current,i=n.total;i&&(e?(i<=(t=a+1)&&(t=0),p.collectEvent(Y.On.BitableFindpanelBrowse,{is_next:1})):((t=a-1)<0&&(t=i-1),p.collectEvent(Y.On.BitableFindpanelBrowse,{is_next:0})),p.updateCurrent(t))},p.updateCurrent=function(e){p.setState({current:e},function(){p.clearBorderHighlight(),p.borderHighlight(!0)})},p.handleSearchResult=function(e,t,n){var a=p.state.current,i=p.state.total+e.length;!p.isUnfold&&p.unfoldGroups();var o=a<i?a:0;e.length&&p.handleFirstSearchResult&&p.handleFirstSearchResult(),p.setState({current:o,total:i,searching:!n})},p.getTableRev=function(){var e=Object(Y.DC)(p.getSearchBaseOpts()),t=e.table,n=e.view;return t&&n?t.rev:-1},p.operationProduced=function(e){var t=e.token;if(p._isMounted){var n=p.props,a=n.tableId;if(n.findPanelOpened&&(!t||t===a)){var i=p.getTableRev();i<0||i===p.collaSearchRev||(p.collaSearchRev=i,p.collaSearch())}}},p.changesetApplied=function(e){var t=e.token;if(p._isMounted){var n=p.props,a=n.tableId;if(n.findPanelOpened&&(!t||t===a)){var i=p.getTableRev();i<0||i===p.collaSearchRev||(p.collaSearchRev=i,p.collaSearch())}}},p.collaSearch=function(){var e=p.state.current;p._reset(!1).then(function(){p.setState({current:e}),p.search()})},p.handleFindTextChange=function(e){var t=e.currentTarget.value;p.handleFindTextChangeCore(t)},p.hasKanbanDeniedField=function(){var e=Object(Y.DC)(p.getSearchBaseOpts()),t=e.view,n=e.table;if(t&&t.type===Y.az.Kanban){var a,i=null===(a=t.getGroupField())||void 0===a?void 0:a.id;return n&&i&&n.isDeniedField(i)}return!1},p.handleFindTextChangeCore=function(e){if(p.isComposing)return p.setState({findText:e});p.setState({findText:e,searching:!0}),p._reset(!1).then(function(){p.search()})},p.getSearchBaseOpts=function(){var e=p.props;return{bitableStore:e.bitableStore,renderer:e.renderer,tableId:e.tableId,viewId:e.viewId}},p.borderHighlight=function(e){var t=p._getSearchResult();t&&Object(Y.EC)(p.state.current,t,p.getSearchBaseOpts(),e)},p.unfoldGroups=function(){if(p.isNeedUnfold){p.isUnfold=!0;var e=p.props.renderer.activeBitableWidget.getGridWidget();p.restoreFoldedGroups=e.source.unfoldAllGroups(!0)}},p.highlightSyncSearchResult=function(e){var t=p.props.focus;Object(Y.FC)(e,p.getSearchBaseOpts()),p.borderHighlight(t)},p.clearBorderHighlight=function(){Object(Y.GC)(p.getSearchBaseOpts())},p.clearHighlight=function(){p.props.keywords&&Object(Y.HC)(p.getSearchBaseOpts())},p.handleDragStop=function(e,t){var n={x:Math.round(t.x),y:Math.round(t.y)};p.applyAndStorePosition(n);var a=p.props,i=a.bitableStore,o=a.storeFindPosition;i.base.getValidTableIds().map(function(e){o(e,n.x,n.y)}),n.x===Be&&n.y===Be?p.setState({isZeroPosition:!0}):p.setState({isZeroPosition:!1})},p.handleFindKeyDown=function(e){switch(e.keyCode){case Y.sx.Enter:p.nav(!0);break;case Y.sx.Esc:p.handleClose()}},p.handleFindFocus=function(){var e=p.props,t=e.tableId;(0,e.focusFindPanel)(t,!0)},p.handleFindBlur=function(){var e=p.props,t=e.tableId;(0,e.focusFindPanel)(t,!1)},p.handleCompositionStart=function(){p.isComposing=!0},p.handleCompositionEnd=function(){p.isComposing=!1,p._reset(!1).then(function(){p.search()})};var t=e.tableId;return(0,e.focusFindPanel)(t,!1),p.openVCFollow(),p}return Object(Y.bu)(a,n),Object(Y.Pw)(a,[{key:"UNSAFE_componentWillMount",value:function(){this._isMounted=!0}},{key:"componentDidMount",value:function(){var e=this;document.body.addEventListener("keydown",this.onKeydown),this.bitableContainer=Object(Y.IC)(this.props.bitableStore.embeddedType);var t=this.props,n=t.keywords,a=t.findPanelOpened,i=t.tableId,o=t.storeFindPosition,r=t.position;a&&(this.bindEvents(),this.setState({findText:n,position:r,isZeroPosition:r.x===Be&&r.y===Be}),o(i,r.x,r.y),setTimeout(function(){e._reset(!1).then(function(){e.search()})},0))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.findPanelOpened,n=e.findPanelOpened,a=this.state.isZeroPosition,i=e.bitableStore.base.getValidTableIds();if(!t&&n){var o=this.getPosition(),r=e.position;r.x===o.x||r.y===o.y||r.x===Be&&r.y===Be?r.x===Be&&r.y===Be&&a&&(o=r):o=r,this.applyAndStorePosition(o);var l=e.toggleFindPanel,c=e.storeFindPosition;i.map(function(e){l(n),c(e,o.x,o.y)}),this.bindEvents()}else if(t&&!n){var s=this.props.toggleFindPanel;i.map(function(e){s(n)}),this._reset(!0),this.unbindEvents(),this.isUnfold&&(this.isUnfold=!1,this.restoreFoldedGroups&&this.restoreFoldedGroups())}if(this.props.tableId!==e.tableId||this.props.viewId!==e.viewId){var d=e.tableId,u=this.props,p=u.storeFindKeywords,b=u.toggleFindPanel,f=u.storeFindPosition;if(!t&&n)return void b(!1);if(t&&this._reset(!0),this.props.tableId!==e.tableId&&t){b(!0);var m=this.props,v=m.keywords,h=m.position;p(d,v),f(d,h.x,h.y),this.setState({findText:v,position:h,isZeroPosition:a}),setTimeout(this.search,0)}else if(n&&this.props.viewId!==e.viewId){var g=e.keywords,y=e.position;this.setState({findText:g,position:y}),setTimeout(this.search,0)}}}},{key:"componentDidUpdate",value:function(e,t){!e.findPanelOpened&&this.props.findPanelOpened&&this.findInput&&(this.findInput.focus(),this.findInput.select()),e.tableId===this.props.tableId&&e.viewId===this.props.viewId||!this.props.findPanelOpened||this.isUnfold&&(this.isUnfold=!1,this.restoreFoldedGroups&&this.restoreFoldedGroups()),e.findPanelOpened===this.props.findPanelOpened&&e.keywords===this.props.keywords&&t.current===this.state.current||this.sendVCStateChange(),!e.tableLoaded&&this.props.tableLoaded&&this.props.findPanelOpened&&e.tableId===this.props.tableId&&e.viewId===this.props.viewId&&this.search()}},{key:"componentWillUnmount",value:function(){this.searchHelper&&(this.searchHelper.cancelSearch(),this.searchHelper=null),this.clearBorderHighlight(),this.clearHighlight(),this._isMounted=!1,this.props.findPanelOpened&&this.unbindEvents(),document.body.removeEventListener("keydown",this.onKeydown),this.closeVCFollow()}},{key:"replayVCFollowState",value:function(e){var t=e.data,n=t.tableId,a=t.searchText,i=t.openStatus,o=t.searchFocusIndex;return n!==this.props.tableId?{status:Y.dz.Ignore,code:Y.ez.SourceTargetIsDiff}:(i===Y.Dy.Close?this.handleClose():(this.props.toggleFindPanel(!0),this.props.keywords!==a&&this.handleFindTextChangeCore(a),this.state.current!==o&&this.updateCurrent(o)),{status:Y.dz.Success})}},{key:"updateHitInfo",value:function(e,t){var n,a=this.state.current,i=t.gridHeadCells,o=t.gridBodyCells,r=t.kanbanCards,l=t.galleryCards;switch(e.type){case Y.az.Grid:case Y.az.Gantt:n=i.length+o.length;break;case Y.az.Kanban:n=r.length;break;case Y.az.Gallery:n=l.length;break;case Y.az.NotSupport:default:return}var c=a<n?a:0;this.setState({current:c,total:n})}},{key:"_getSearchResult",value:function(){return this.searchHelper?this.searchHelper.getSearchResult():null}},{key:"_reset",value:function(e){var t=this;this.searchHelper&&this.searchHelper.cancelSearch(),this.clearBorderHighlight(),this.clearHighlight();var n=e?Pe:{searching:!1,total:0,current:0};return new Promise(function(e){t.setState(n,function(){e()})})}},{key:"isAsyncSearch",get:function(){var e=Object(Y.DC)(this.getSearchBaseOpts()).view;return e&&e.getRowCount()*e.getVisibleColumnCount()>Y.XB}},{key:"isNeedUnfold",get:function(){var e=Object(Y.DC)(this.getSearchBaseOpts()).view;return e&&e.isSupportGroup}},{key:"applyAndStorePosition",value:function(e){var t=this.props,n=t.tableId,a=t.storeFindPosition;this.setState({position:e}),a(n,e.x,e.y)}},{key:"getPosition",value:function(){var e,t=this.panelDom&&this.panelDom.parentElement;if(!t)return{x:0,y:0};var n=Object(Y.mB)(t),a=n.top,i=n.left,o=n.width,r=n.height,l=(null===(e=this.bitableContainer)||void 0===e?void 0:e.getBoundingClientRect().width)||window.innerWidth,c=a+r+Ie,s=i+o/2-De/2;return l<s+De&&(s=l-De-Ne),{x:Math.round(s),y:Math.round(c)}}},{key:"render",value:function(){var t=this,e=this.state,n=e.position,a=e.current,i=e.total,o=e.findText,r=this.props,l=r.findPanelOpened,c=r.focus,s=this.hasKanbanDeniedField();return m.a.createElement("div",{ref:function(e){return t.panelDom=e}},l?m.a.createElement(oe.a,{bounds:"body",cancel:".no-move",position:n,onStop:this.handleDragStop,enableUserSelectHack:!1},m.a.createElement("div",{className:"bitable-findpanel bitable-layout-column"},m.a.createElement("div",{className:"no-move"},m.a.createElement(d.a,{className:"bitable-findpanel__close ud-icon-normal",onClick:this.handleClose}),m.a.createElement("div",{className:"bitable-findpanel__find bitable-layout-row"},m.a.createElement("div",{className:E()("bitable-findpanel__input-wrap bitable-flex bitable-layout-row",{focus:c})},m.a.createElement("input",{ref:function(e){t.findInput=e},className:"bitable-findpanel__find-input bitable-flex",type:"text",placeholder:O("Bitable_Search_InTable"),value:o,onChange:this.handleFindTextChange,onKeyDown:this.handleFindKeyDown,onFocus:this.handleFindFocus,onBlur:this.handleFindBlur,onCompositionStart:this.handleCompositionStart,onCompositionEnd:this.handleCompositionEnd}),m.a.createElement("div",{className:"bitable-findpanel__nav",onMouseDown:function(e){return e.preventDefault()}},m.a.createElement(u.a,{className:"bitable-findpanel__nav-button",onClick:this.onPrevBtnClick}),m.a.createElement("span",{className:"bitable-findpanel__nav-content"},s?"0 / 0":"".concat(0<i?a+1:0," / ").concat(i)),m.a.createElement(p.a,{className:"bitable-findpanel__nav-button",onClick:this.onNextBtnClick}))))))):null)}}]),a}(m.a.Component),Object(Y.lz)(we.prototype,"replayVCFollowState",[Ce,Y.mz],Object.getOwnPropertyDescriptor(we.prototype,"replayVCFollowState"),we.prototype),we),xe=Object(le.b)(function(e){var t=e.toolbarStore;return{findPanelOpened:t.isOpenFindPanel,toggleFindPanel:t.toggleFindPanel}})(Object(te.connect)(function(e,t){var n=t.tableId;return{keywords:Object(Y.lD)(e,n),position:Object(Y.mD)(e,n),focus:Object(Y.nD)(e,n),tableLoaded:Object(Y.oD)(e,n)}},{storeFindKeywords:Y.pD,storeFindPosition:Y.qD,focusFindPanel:Y.rD})(Object(le.c)(Me)));(Se=ke||(ke={}))[Se.None=0]="None",Se[Se.Formula=1]="Formula",Se[Se.Lookup=2]="Lookup",Se[Se.All=3]="All";var je=(Object(Y.Ww)(Ee={},ke.Formula,O("Bitable_Form_FormulaResultsWillBeVisible")),Object(Y.Ww)(Ee,ke.Lookup,O("Bitable_Form_LookupResultsWillBeVisible")),Object(Y.Ww)(Ee,ke.All,O("Bitable_Form_FormulaResultsAndLookupResultsWillBeVisible")),Ee);function Le(e){if(e){if(/^(https|http)\:/.test(e))return e;var t=location.hostname;return"https://".concat(t)+"/share/base/form/"+e}return""}function Re(e,t){var n="";return(n=Object(Y.Ux)(t))||(n=e),n}function Ae(e){return e.map(function(e){return Object.assign({},e,{memberName:Re(e.memberName,e.memberDisplayName),avatarUrl:e.memberType!==Y.Br.DEPARTMENT||e.avatarUrl?e.avatarUrl:de.d})})}function We(e){var t,n=ke.None,a=Object(Y.WB)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value,o=null==i?void 0:i.type;if(o===Y.og.Formula?n=ke.Formula|n:o===Y.og.Lookup&&(n=ke.Lookup|n),n===ke.All)break}}catch(e){a.e(e)}finally{a.f()}return je[n]}var Ge,Ve,He,ze="bitable-share-form-panel",Ue=function(t){function n(e){var l;return Object(Y.ov)(this,n),(l=t.call(this,e)||this).linkTextRef=null,l.switchInOccupied=!1,l.handleSwitchChange=function(e){if(!l.switchInOccupied){var t=l.props,n=t.tableId,a=t.viewId,i=t.secretTip,o=t.token;if(a&&n){l.switchInOccupied=!0,l.props.updateFormMeta(n,a,{flag:Number(e)});var r=Number(e);r&&i&&Y.ob.Toast.show({content:i,type:"info"}),Y.cz.collectClickEvent(Y.Bc.CCMBitableFormPermissionClick,{click:r?"open":"close"}),Object(de.t)({baseToken:o,tableId:n,viewId:a,shareType:Y.sD.Form,flag:r}).then(function(e){var t=e.shareToken;l.props.initDataWhenOpenShareForm(t,r,n,a)}).catch(function(){l.props.updateFormMeta(n,a,{flag:Number(!e)}),Y.ob.Toast.show({content:O("Bitable_Form_UnableToShare"),type:"error"})}).finally(function(){l.switchInOccupied=!1})}}},l.renderSwitch=function(){var e=l.props.formMeta.flag;return m.a.createElement("div",{className:E()("".concat(ze,"-switch"),e===Y.tD.Open?"checked":"unchecked")},m.a.createElement($.Switch,{checked:Boolean(e),onChange:l.handleSwitchChange}),m.a.createElement("span",{className:"".concat(ze,"-switch-text")},e===Y.tD.Open?O("Bitable_Form_FormCollectionIsOn"):O("Bitable_Form_FormCollectionIsOff")),m.a.createElement(Y.uD,{action:Y.WD.ShareForm}))},l.renderLink=function(){var e=l.getShareLink();return e?m.a.createElement(m.a.Fragment,null,m.a.createElement("p",{className:"".concat(ze,"-link-text")},O("Bitable_Form_SharingRange")),m.a.createElement($.Input.Group,{compact:!0},m.a.createElement($.Input,{className:"".concat(ze,"-link"),readOnly:!0,value:e,ref:l.setLinkTextRef,onDoubleClick:l.linkTextSelect}),m.a.createElement($.Button,{onClick:l.handleOnCopyLinkClick},O("invite.copy_link_btn_text")))):null},l.handleLinkInputCopy=function(e){var t;e.preventDefault(),e.stopImmediatePropagation();var n,a=null===(t=window.getSelection())||void 0===t?void 0:t.toString();a&&(null===(n=e.clipboardData)||void 0===n||n.setData("text/plain",a)),a===l.getShareLink()&&Y.cz.collectClickEvent(Y.Bc.CCMBitableFormPermissionClick,{click:"copy_link"})},l.getShareLink=function(){return Le(l.props.formMeta.shareToken)},l.handleCopyLink=Object(Y.uY)(X.a.mark(function e(){var t;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.props.renderer.clipboardHelper,e.next=3,t.setClipboardValue(l.getShareLink());case 3:e.sent?Y.ob.Toast.show({content:O("common.copied"),type:"success"}):Y.ob.Toast.show({content:O("bitable.toast.copy_failed"),type:"error"});case 5:case"end":return e.stop()}},e)})),l.handleOnCopyLinkClick=function(){l.linkTextSelect(),l.handleCopyLink()},l.setLinkTextRef=function(e){!l.linkTextRef&&e?(l.linkTextRef=e,l.linkTextRef.addEventListener("copy",l.handleLinkInputCopy)):l.linkTextRef&&!e&&(l.linkTextRef.removeEventListener("copy",l.handleLinkInputCopy),l.linkTextRef=e)},l.linkTextSelect=function(){var e;null===(e=l.linkTextRef)||void 0===e||e.select(),Y.cz.collectClickEvent(Y.Bc.CCMBitableFormPermissionClick,{click:"copy_link"})},l.handleUpdatePerm=function(e){l.props.updateShareFormPermission(e)},l.onPermDropDownVisibleChange=function(e){e&&Y.cz.collectClickEvent(Y.Bc.CCMBitableFormPermissionClick,{click:"limit_set",target:Y.Rw.CCMBitableFormLimitSetView})},l.renderPerm=function(){var e=[{value:Y.XD.PRIVATE,text:O("Bitable_Form_InvitedCollaboratorCanFillIn")},{value:Y.XD.EDITABLE,text:O("Bitable_Form_InternalUserCanFillIn")},{value:Y.XD.ANYONE_EDITABLE,text:O("Bitable_Form_AnyoneCanFillIn")}],t=l.props.formMeta.linkShareEntity;return m.a.createElement($.Select,{className:"".concat(ze,"-perm-select"),dropdownClassName:"bitable-share-panel-per-dropdown",value:t,onChange:l.handleUpdatePerm,onDropdownVisibleChange:l.onPermDropDownVisibleChange,allowClear:!1,placeholder:O("Bitable_Form_GetLinkPermissionFailedToast")},e.map(function(e){return m.a.createElement($.Select.Option,{value:e.value,key:e.value},e.text)}))},l.renderAddUser=function(){var e=l.props.token,t=l.props.formMeta.memberList;return m.a.createElement("div",{className:"".concat(ze,"-members-wrapper")},m.a.createElement("div",{className:"".concat(ze,"-members-text")},m.a.createElement("span",null,O("Bitable_Form_InviteCollaborator"))),m.a.createElement(de.b,{style:{width:402},shareType:Y.sD.Form,token:e,members:t,setSelectedMembers:l.props.setSelectedMembers}))},l.mapRenderMember=function(e){var t=e.avatarUrl,n=e.memberName,a=e.memberId;return m.a.createElement($.Tooltip,{title:n,key:a},m.a.createElement("div",{className:"".concat(ze,"-avatar")},m.a.createElement($.Avatar,{size:"small",src:t,bordered:!1})))},l.renderMembers=function(){var e=l.props,t=e.formMeta,n=e.owner,a=t.memberList.filter(function(e){return e.memberId!==(null==n?void 0:n.id)}),i=11,o=a.length;return a.slice(0,i).map(function(e,t){return i<o&&t===i-1?m.a.createElement("div",{className:"".concat(ze,"-avatar-total"),key:e.memberId},"+".concat(o-(i-1))):l.mapRenderMember(e)})},l.handleClick=function(){Y.cz.collectClickEvent(Y.Bc.CCMBitableFormPermissionClick,{click:"manage_collaborator",target:Y.Rw.CCMBitableFormPermissionManagementCollaboratorView}),l.props.goToPanel(de.e.INVITED_MEMBER_MANAGER)},l.renderUserList=function(){var e="bitable-form-member-list",t=l.props,n=t.formMeta,a=t.owner,i=t.ownerInfo,o=n.memberList;return m.a.createElement("div",{className:"layout-row ".concat(e,"-wrapper ").concat(" unlock"),onClick:l.handleClick},a&&l.mapRenderMember({memberName:a.name,avatarUrl:a.avatarUrl||(null==i?void 0:i.avatarUrl),memberId:a.id}),1<(null==o?void 0:o.length)&&m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{className:"".concat(e,"-right-seperator")}),m.a.createElement("span",{className:"layout-row ".concat(e,"-right-members-rest").concat(" unlock")},l.renderMembers())),m.a.createElement("span",{className:"".concat(e,"-right-icon")},m.a.createElement(r.a,null)))},l}return Object(Y.bu)(n,t),Object(Y.Pw)(n,[{key:"renderContent",value:function(){return m.a.createElement("div",{className:"".concat(ze,"-content")},this.renderLink(),this.renderPerm(),this.renderAddUser(),this.renderUserList(),this.renderShareFooter())}},{key:"renderInvite",value:function(){return null}},{key:"renderShareFooter",value:function(){var e=Le(this.props.formMeta.shareToken),t=[de.g.Lark,de.g.Wechat,de.g.QrCode,de.g.Link];return m.a.createElement(de.c,{shareType:Y.sD.Form,shareWeyType:t,link:e,handleCopyLink:this.handleCopyLink,goToPanel:this.props.goToPanel})}},{key:"render",value:function(){var e=this.props.formMeta.flag;return m.a.createElement("div",{className:"".concat(ze,"-main-wrapper")},this.renderSwitch(),!!e&&m.a.createElement("div",{className:"".concat(ze,"-main")},this.renderContent()))}}]),n}(_.Component),Ye=Object(ue.a)(Object(te.connect)(function(e){return{owner:Object(Y.HZ)(e)}}),Object(Y.oA)(function(e,t){var n,a=t.tableId,i=t.viewId,o=e.base.getTable(a),r=null==o?void 0:o.getView(i);return{secretTip:We((null!==(n=null==r?void 0:r.getVisibleFields())&&void 0!==n?n:[]).map(function(e){return Object(Y.YD)(null==o?void 0:o.getField(e))}))}},void 0,function(a,e,t){var i=e.tableId,o=e.viewId;t(function(e){var t,n=a.base.getTable(i);return null==n?void 0:n.batchBind((Object(Y.Ww)(t={},Y.uA.AddField,e),Object(Y.Ww)(t,Y.uA.DeleteField,e),Object(Y.Ww)(t,Y.uA.FieldAttrChange,e),t))},[i]),t(function(e){var t=a.base.getTable(i),n=null==t?void 0:t.getView(o);return null==n?void 0:n.batchBind(Object(Y.Ww)({},Y.uA.ViewVisibleFieldsChange,e))},[i,o])}))(Ue),qe=452,Ke="bitable-share-form-panel",Xe=(Object(Y.Ww)(Ge={},Y.XD.PRIVATE,"only_collaborator"),Object(Y.Ww)(Ge,Y.XD.EDITABLE,"organization_edit"),Object(Y.Ww)(Ge,Y.XD.ANYONE_EDITABLE,"internet_edit"),Ge),Ze={PERSON_ATTACHMENT:"person_attachment",PERSON:"person",ATTACHMENT:"attachment"},Je=function(t){function n(e){var s;return Object(Y.ov)(this,n),(s=t.call(this,e)||this).hasMore=!0,s.fetchingMemberList=!1,s.handleDocumentClick=function(e){if(s.props.isOpen){var t=s.props,n=t.toggleFormSharePanel;if(!t.isOpen)return;var a=e.target,i=s.panelRef,o=i&&i.parentElement,r=[".bitable-form-candidates-content",".organization-pick-body",".bitable-share-panel-per-dropdown",".bitable-form-perm-confirm-dialog",".bitable-guide-video"].join(","),l=Array.from(document.body.querySelectorAll(r)).some(function(e){return e&&e.contains(a)});!o||o.contains(a)||l||n(!1)}},s.setPanelRef=function(e){s.panelRef=e},s.initData=function(a,i,e){var t=s.props.token;i&&Object(pe.a)({token:t,tableId:a,viewId:i,shareType:Y.sD.Form}).then(function(e){var t=e.shareToken,n=e.flag;t?s.getShareFormIsBanned(t,a,i):s.props.updateFormMeta(a,i,{bannedStatus:Y.YC.Normal}),s.initDataWhenOpenShareForm(t,n,a,i,e)}).catch(function(e){s.updateFormMeta(a,i,{shareToken:"",flag:Y.tD.Close,bannedStatus:Y.YC.Normal})})},s.initDataWhenOpenShareForm=function(e,t,n,a,i){t===Y.tD.Open&&(Object(de.o)(s.props.token,e).then(function(e){var t=e.linkShareEntity;s.updateFormMeta(n,a,{linkShareEntity:t})}),s.getShareFormMembers(e));var o=Object.assign({shareToken:e,flag:t,bannedStatus:Y.YC.Unknown},i);s.updateFormMeta(n,a,o)},s.getShareFormIsBanned=function(t,r,l){Object(c.g)(t).then(function(e){e.permission_status_code===c.c?e.is_owner?Object(c.d)(t).then(function(e){var t,n,a,i=e.data,o=null==i?void 0:i.code;if(!Number.isInteger(o))throw new Error("resp code is not a number");0!==o?s.updateFormMeta(r,l,{bannedStatus:null!==(t=c.e[o])&&void 0!==t?t:Y.YC.Unknown}):s.updateFormMeta(r,l,{bannedStatus:null!==(n=c.h[null==i||null===(a=i.data)||void 0===a?void 0:a.result])&&void 0!==n?n:Y.YC.Unknown})}).catch(function(e){$.toast.error(O("bitable.network_or_server_error")),Y.hy.ravenCatch(e,{key:Y.iy.ErrorEvent})}):s.updateFormMeta(r,l,{bannedStatus:Y.YC.Banned}):s.updateFormMeta(r,l,{bannedStatus:Y.YC.Normal})})},s.updateShareFormPermission=function(a){var e=s.props,t=e.tableId,n=e.viewId,i=e.hasFields;if(n){var o=s.props.formMeta.shareToken;Y.cz.collectClickEvent(Y.Bc.CCMBitableFormLimitSetClick,{click:Xe[a]}),Object(de.i)(o,a).then(function(e){s.updateFormMeta(t,n,{linkShareEntity:a}),Y.ob.Toast.show({content:O("Bitable_Form_SetSuccessfullyToast"),type:"success"})}).then(function(){if(a===Y.XD.ANYONE_EDITABLE){var e=i(Y.og.User),t=i(Y.og.Attachment),n={className:"b-dialog",enableCancelButton:!1,title:O("Bitable_Form_AttachmentAndPersonFieldNoticeTitle"),okText:O("Bitable_Common_ButtonGotIt"),maskClosable:!1,wrapClassName:"bitable-form-perm-confirm-dialog"};e&&t?($.Dialog.confirm(Object.assign({},n,{content:O("Bitable_Form_AttachmentAndPersonFieldNoticeDesc")})),Y.cz.collectBitableEvent(Y.Rw.CCmBitableFormInternetPersonAttachmentPopupView,{reason:Ze.PERSON_ATTACHMENT,target:Y.Rw.None})):e?($.Dialog.confirm(Object.assign({},n,{content:O("Bitable_Form_PersonFieldNoticeDesc")})),Y.cz.collectBitableEvent(Y.Rw.CCmBitableFormInternetPersonAttachmentPopupView,{reason:Ze.PERSON,target:Y.Rw.None})):t&&($.Dialog.info(Object.assign({},n,{content:O("Bitable_Form_AttachmentFieldNoticeDesc")})),Y.cz.collectBitableEvent(Y.Rw.CCmBitableFormInternetPersonAttachmentPopupView,{reason:Ze.ATTACHMENT,target:Y.Rw.None}))}}).catch(function(e){var t=(null==e?void 0:e.code)===Y.ZD.FORM_FORBIDDEN_SHARE_EXTERNAL?O("Bitable_Form_UnableToSwitchToExternalSharing_Toast"):O("Bitable_Form_UnableToModifyFormPermission");Y.ob.Toast.show({content:t,type:"error"})})}},s.getShareFormMembers=function(e){if(s.hasMore&&!s.fetchingMemberList){s.fetchingMemberList=!0;var t=s.props,n=t.formMeta,r=t.tableId,l=t.viewId,a=t.token;e=e||n.shareToken;var c=n.memberList||[];Object(de.j)(a,e,s.lastLabel).then(function(e){var t=e.members,n=e.totalNum,a=e.lastLabel,i=e.hasMore,o=null==t?void 0:t.find(function(e){return null==e?void 0:e.isOwner});o&&s.setState({ownerInfo:o}),c=s.lastLabel?c.concat(Ae(t)):Ae(t),s.hasMore=i,s.lastLabel=i?a:void 0,s.updateFormMeta(r,l,{memberList:c,totalMemberCount:n})}).finally(function(){s.fetchingMemberList=!1})}},s.goToPanel=function(t){s.setState(function(e){return{panelHistory:e.panelHistory.push(e.currentPanel),currentPanel:t}})},s.backToPanel=function(){0!==s.state.panelHistory.size&&s.setState(function(e){var t=e.panelHistory.last();return{panelHistory:e.panelHistory.pop(),currentPanel:t}})},s.renderPanelRoutes=function(){var e=s.state,t=e.currentPanel,n=e.panelHistory,a=Le(s.props.formMeta.shareToken);return m.a.createElement(de.k,{current:t,renderProps:{panelHistory:n}},m.a.createElement(de.l,{path:de.e.INDEX,render:s.renderPanelIndex}),m.a.createElement(de.l,{path:de.e.INVITE_MEMBER,component:s.InvitedMember}),m.a.createElement(de.l,{path:de.e.INVITED_MEMBER_MANAGER,renderProps:{members:s.props.formMeta.memberList},component:s.InvitedMemberManager}),m.a.createElement(de.l,{path:de.e.SHARE_TO_LARK,renderProps:{backToPanel:s.backToPanel},component:s.InvitedMember}),m.a.createElement(de.l,{path:de.e.SHARE_TO_WECHAT,renderProps:{isWechat:!0,backToPanel:s.backToPanel,link:a},component:de.f}),m.a.createElement(de.l,{path:de.e.SHARE_BY_QRCODE,renderProps:{backToPanel:s.backToPanel,link:a},component:de.f}))},s.updateSelectMember=function(e){s.setState({selectedMembers:e||[]})},s.updateFormMeta=function(e,t,n){s.props.updateFormMeta(e,t,n)},s.deleteMember=function(e){var t=s.props,n=t.tableId,a=t.viewId,i=s.props.formMeta.memberList;s.updateFormMeta(n,a,{memberList:i.filter(function(t){return!e.some(function(e){return e.memberId===t.memberId})})}),Object(de.m)({shareToken:s.props.formMeta.shareToken,members:e,notifyLark:!1}).catch(function(e){Y.ob.Toast.show({type:"error",content:O("Bitable_Form_UnableToRemoveCollaborator")}),s.updateFormMeta(n,a,{memberList:i})})},s.handleConfirm=function(e){var t=s.props,n=t.tableId,a=t.viewId,i=s.state.selectedMembers,o=e.larkImText,r=e.sendLarkIm,l=i.map(function(e){return Object.assign({},e,{permission:Y.aE.EDIT})});Object(de.n)({shareToken:s.props.formMeta.shareToken,sendLarkIm:r,larkImText:o,members:l}).then(function(e){s.goToPanel(de.e.INDEX),s.hasMore=!0,s.lastLabel="",s.updateFormMeta(n,a,{memberList:[]}),s.getShareFormMembers(s.props.formMeta.shareToken),s.updateSelectMember([]),Y.ob.Toast.show({content:O("Bitable_Form_AddCollaboratorSucceed"),type:"success"})}).catch(function(e){Y.ob.Toast.show({content:O("Bitable_Form_AddCollaboratorFailed"),type:"error"})})},s.setSelectedMembers=function(e){s.updateSelectMember(e),s.goToPanel(de.e.INVITE_MEMBER)},s.renderPanelIndex=function(){var e=s.props,t=e.tableId,n=e.renderer,a=e.viewId,i=e.formMeta,o=e.token,r=s.state.ownerInfo;return a&&t?m.a.createElement(Ye,{tableId:t,viewId:a,renderer:n,goToPanel:s.goToPanel,updateShareFormPermission:s.updateShareFormPermission,setSelectedMembers:s.setSelectedMembers,formMeta:i,ownerInfo:r,updateFormMeta:s.updateFormMeta,initDataWhenOpenShareForm:s.initDataWhenOpenShareForm,token:o}):null},s.InvitedMemberManager=function(){var e=s.props.formMeta.memberList;return m.a.createElement(de.p,{memberList:e,backToPanel:s.backToPanel,goToPanel:s.goToPanel,deleteMembers:s.deleteMember,onScrollEnd:s.getShareFormMembers,title:O("Bitable_Form_ManageCollaborator"),addText:O("Bitable_Form_AddCollaborator")})},s.InvitedMember=function(){var e=s.props.formMeta.memberList;return m.a.createElement(de.q,{shareType:Y.sD.Form,goToPanel:s.goToPanel,backToPanel:s.backToPanel,memberList:e,selectedMember:s.state.selectedMembers,updateSelectMember:s.updateSelectMember,handleConfirm:s.handleConfirm,token:s.props.token,title:O("Bitable_Form_InviteCollaborator"),notifyText:O("member.single_product_notity_lark"),showSendLarkIm:!0})},s.getAnchorRef=function(){var e=s.props.anchorInfo;return s.panelRef&&null!=e&&e.isParent?s.panelRef.parentElement:null},s.state={currentPanel:de.e.INDEX,panelHistory:Object(se.a)().push(de.e.INDEX),selectedMembers:[]},s.initData(e.tableId,e.viewId,e.editable),s}return Object(Y.bu)(n,t),Object(Y.Pw)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDocumentClick),Y.cz.collectBitableEvent(Y.Rw.CCMBitableFormPermissionView),this.bitableContainer=Object(Y.IC)(this.props.embeddedType)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.viewId===e.viewId&&this.props.tableId===e.tableId&&this.props.editable===e.editable||(this.hasMore=!0,this.lastLabel="",this.fetchingMemberList=!1,this.initData(e.tableId,e.viewId,e.editable)),this.props.viewId===e.viewId&&this.props.tableId===e.tableId||this.setState({currentPanel:de.e.INDEX})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleDocumentClick)}},{key:"getContainerStyle",value:function(){var e={},t=this.getAnchorRef();return Q.browser.isFeed&&t&&Object(Y.bE)(t,e,{width:qe},this.bitableContainer),e}},{key:"render",value:function(){var e,t=this.props,n=t.isOpen,a=t.editable,i=t.embeddedType,o=this.getContainerStyle();return n&&a?m.a.createElement("div",{ref:this.setPanelRef,className:E()("".concat(Ke,"-container"),(e={},Object(Y.Ww)(e,"".concat(Ke,"-container-feed"),Q.browser.isFeed),Object(Y.Ww)(e,"".concat(Ke,"-container-in-sheet"),i===Y.pA.EmbeddedInSheet),e)),style:o},this.renderPanelRoutes()):m.a.createElement("div",{ref:this.setPanelRef})}}]),n}(_.Component),Qe=Object(Y.oA)(function(e){var t=e.env,n=e.base;return{embeddedType:t.getEmbeddedType(),token:n.getToken()}},function(e,t){var a=t.tableId,i=t.viewId,o=e.base;function n(t){var n=o.getTable(a);if(i){var e=null==n?void 0:n.getView(i);if(null!=e&&e.isType(Y.az.Form))return e.getVisibleFields().some(function(e){return(null==n?void 0:n.getField(e)).isType(t)})}return!1}return{hasFields:n}})(Je),$e="workdayConfigLoadingKey",et=O("Bitable_GanttView_WorkingDaySettingsApplying_Web"),tt=O("Bitable_GanttView_FailedToApplyWorkingDaySettings_Web");(He=Ve||(Ve={})).Date="date",He.Month="month",He.Year="year";var nt="officialHoliday",at={CustomizedWeekday:"customized_weekday",PublicHoliday:"public_holiday"},it={On:"on",Off:"off"},ot={0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},rt=[{label:O("Bitable_Common_Monday"),value:"Mon"},{label:O("Bitable_Common_Tuesday"),value:"Tue"},{label:O("Bitable_Common_Wednesday"),value:"Wed"},{label:O("Bitable_Common_Thursday"),value:"Thu"},{label:O("Bitable_Common_Friday"),value:"Fri"},{label:O("Bitable_Common_Saturday"),value:"Sat"},{label:O("Bitable_Common_Sunday"),value:"Sun"}],lt=14,ct=2e3,st={zh:{locale:ve.a,startOfWeek:0},en:{locale:he.a,startOfWeek:0},ja:{locale:ge.a,startOfWeek:0}},dt=function(t){function n(e){var s;return Object(Y.ov)(this,n),(s=t.call(this,e)||this).dateRenderFn=function(e,t,n){var a=s.state.dateCtx,i=s.props.workdayConfig,o=i&&i.getDateByGMT(e._d);o=o.toString();var r=!1;return a.mode===Ve.Date&&(r=i&&i.isWorkday(o)),m.a.createElement("div",{className:E()("data-number__".concat(o),{ud__picker__cell__inner:!0},{"workday-dom":r},{"workday-dom-not":!r})},n)},s.onClickDate=function(e){var t=s.state.dateCtx;s.setState({dateCtx:Object.assign({},t,{value:e})});var n=s.props,a=n.workdayConfig,i=n.dispatchWorkdayConfig,o=a.adjustWorkday,r=Object.assign({},o),l=e.format("YYYY-MM-DD"),c=a.isWorkday(l);void 0===r[l]?r[l]=!c:delete r[l],Object.assign(a,{adjustWorkday:r}),i(a),Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttCalSetClick,{click:Y.cE.CalRange,target:Y.Rw.None})},s.state={dateCtx:{mode:Ve.Date}},Object.keys(st).forEach(function(e){Object(Y.dE)().includes(e)&&(s.locale=st[e].locale,s.startOfWeek=st[e].startOfWeek)}),s}return Object(Y.bu)(n,t),Object(Y.Pw)(n,[{key:"render",value:function(){var a=this,t=this.state.dateCtx;return m.a.createElement($.ConfigProvider,{locale:this.locale,useLocaleFontFamily:!0},m.a.createElement($.Space,{size:"large",align:"start"},m.a.createElement($.DatePickerContextProvider,{value:{mode:t.mode,setMode:function(e){return a.setState({dateCtx:Object.assign({},t,{mode:e})})},value:t.value,setValue:function(e){return a.setState({dateCtx:Object.assign({},t,{value:e})})},showToday:!1,setOpened:me.a}},m.a.createElement($.DatePickerPanel,{value:t.value,onSelect:function(e){return a.onClickDate(e)},mode:"date",footer:!1,startOfWeek:this.startOfWeek,dateRender:function(e,t,n){return a.dateRenderFn(e,t,n)}}))))}}]),n}(m.a.Component),ut=function(a){function i(){var c;Object(Y.ov)(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(c=a.call.apply(a,[this].concat(t))||this).calendarConfigClick=function(e){c.props.setShouldShowCalendar(e)},c.onCheckboxChange=function(n){var e=c.props,t=e.workdayConfig,a=e.dispatchWorkdayConfig,i=t.weekday,o=t.adjustWorkday,r={};Object.keys(i).forEach(function(e){var t=Y.eE[e].toString();r[e]=n.includes(t)});var l=Object.assign({},o);Object.keys(o).forEach(function(e){o[e]===t.isWorkday(e,t.workdayOption,r,{})&&delete l[e]}),a(Object.assign(t,{weekday:r,adjustWorkday:l})),Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttCalSetClick,{click:Y.cE.WeekdayRange,target:Y.Rw.None})},c.onAdjustConfigClick=function(e){e.stopPropagation();var t=c.props,n=t.workdayConfig,a=t.shouldShowCalendar;n.workdayOption===Y.fE.UserDefinedWorkday&&c.calendarConfigClick(!a)},c.onAdjustRefresh=function(e){e.stopPropagation();var t=c.props,n=t.workdayConfig,a=t.dispatchWorkdayConfig;n.workdayOption===Y.fE.UserDefinedWorkday&&(Object.assign(n,{adjustWorkday:{}}),a(n),Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttCalSetClick,{click:Y.cE.Reset,target:Y.Rw.None}))},c}return Object(Y.bu)(i,a),Object(Y.Pw)(i,[{key:"getCheckboxDefaultValue",value:function(t){var n=[];return Object.keys(t).forEach(function(e){!0===t[e]&&n.push(ot[e])}),n}},{key:"getAdjustWorkdayArr",value:function(t){var n=[[],[]];Object.keys(t).forEach(function(e){t[e]?n[0].push(e.replace(/-/g,"/")):n[1].push(e.replace(/-/g,"/"))}),n[0].sort(),n[1].sort();var e=n[0].length,a=n[1].length,i=this.handleAdjustWorkdays(n[0]),o=i.adjustDayPre,r=i.adjustDayExcess,l=i.isShowExcess,c=this.handleAdjustWorkdays(n[1]);return{workdayLen:e,holidayLen:a,workdayPre:o,workdayExcess:r,holidayPre:c.adjustDayPre,holidayExcess:c.adjustDayExcess,isShowWorkdayExcess:l,isShowHolidayExcess:c.isShowExcess}}},{key:"handleAdjustWorkdays",value:function(e){var t=e.length,n=[],a=[],i=!1;return lt<t?(e.slice(0,lt).map(function(e){n.push(e.concat(O("Bitable_GanttView_PunctuationBetweenDate")))}),a=e.slice(lt),i=!0):e.map(function(e){n.push(e.concat(O("Bitable_GanttView_PunctuationBetweenDate")))}),{adjustDayPre:n,adjustDayExcess:a,isShowExcess:i}}},{key:"renderCheckbox",value:function(){var t=this,e=this.props.workdayConfig,n=e.workdayOption,a=e.weekday,i=a&&this.getCheckboxDefaultValue(a),o=n===Y.fE.UserDefinedWorkday;return m.a.createElement("div",{className:E()("user-defined-option__checkbox")},m.a.createElement($.Checkbox.Group,{options:rt,disabled:!o,value:i,onChange:function(e){return t.onCheckboxChange(e)}}))}},{key:"renderEdit",value:function(){var t=this,e=this.props,n=e.workdayConfig,a=e.shouldShowCalendar,i=e.dispatchWorkdayConfig,o=n.workdayOption,r=n.adjustWorkday,l=r&&this.getAdjustWorkdayArr(r),c=l.workdayLen,s=l.holidayLen,d=o===Y.fE.UserDefinedWorkday;return m.a.createElement("div",{className:E()("user-defined-option-edit")},m.a.createElement("div",{className:E()("user-defined-option-edit__span")},m.a.createElement("div",{className:E()("adjust-config",{"should-disabled":!d})},m.a.createElement($.Button,{type:"text",disabled:!d,icon:m.a.createElement(f.a,null),onClick:function(e){return t.onAdjustConfigClick(e)}},O("Bitable_GanttView_AddWorkday"))),m.a.createElement("div",{className:E()("adjust-refresh",{"should-disabled":!d,"should-display":0===c&&0===s})},m.a.createElement($.Button,{type:"text",disabled:!d,icon:m.a.createElement(v.a,null),onClick:function(e){return t.onAdjustRefresh(e)}},O("Bitable_GanttView_BackToDefault_Web")))),m.a.createElement("div",{tabIndex:0,className:E()("user-defined-option__calendar-panel",{"user-defined-option__calendar-panel-dialog":a}),onClick:function(e){e.stopPropagation(),t.calendarConfigClick(!0)}},m.a.createElement(dt,{workdayConfig:n,dispatchWorkdayConfig:i}),m.a.createElement("hr",null),m.a.createElement("div",{className:"user-defined-option__calendar-panel__bottom"},m.a.createElement("div",{className:"bottom-span"},m.a.createElement("div",{className:"left-dot"}),m.a.createElement("span",null,O("Bitable_GanttView_WorkingDay_Web"))),m.a.createElement("span",{className:"bottom-title"},O("Bitable_GanttView_ClickDateToSetWorkday_Web")))))}},{key:"renderPanelShow",value:function(){var e=this.props.workdayConfig,t=e.workdayOption,n=e.adjustWorkday,a=n&&this.getAdjustWorkdayArr(n),i=a.workdayLen,o=a.holidayLen,r=a.workdayPre,l=a.holidayPre,c=a.workdayExcess,s=a.holidayExcess,d=a.isShowWorkdayExcess,u=a.isShowHolidayExcess,p=m.a.createElement("div",null,c.map(function(e,t){return m.a.createElement("div",{key:t},e)})),b=m.a.createElement("div",null,s.map(function(e,t){return m.a.createElement("div",{key:t},e)})),f=t===Y.fE.UserDefinedWorkday;return m.a.createElement("div",{className:E()("user-defined-option-edit__show",{"should-disabled":!f,"should-display":0===i&&0===o})},m.a.createElement("div",{className:E()("left-label",{"should-disabled":!f,"should-display":0===i})},m.a.createElement("span",{className:"left-label-key"},O("Bitable_GanttView_WorkdayAdded_Web")),m.a.createElement("div",{className:E()("left-label-value",{"should-disabled":!f,"should-bottom-margin":0!==i&&0!==o})},r.length&&r.map(function(e){return m.a.createElement("div",{key:e},e)}),d&&m.a.createElement($.Tooltip,{title:p,placement:"bottom",overlayStyle:{fontSize:"12px"}},m.a.createElement("div",{className:""},"......")))),m.a.createElement("div",{className:E()("right-label",{"should-disabled":!f,"should-display":0===o})},m.a.createElement("span",{className:"right-label-key"},O("Bitable_GanttView_RestDayAdded_Web")),m.a.createElement("div",{className:E()("right-label-value",{"should-disabled":!f})},l.length&&l.map(function(e){return m.a.createElement("div",{key:e},e)}),u&&m.a.createElement($.Tooltip,{title:b,placement:"bottom",overlayStyle:{fontSize:"12px"}},m.a.createElement("div",{className:""},"......")))))}},{key:"render",value:function(){return m.a.createElement(_.Fragment,null,m.a.createElement("div",{className:E()("user-defined-option")},this.renderCheckbox(),m.a.createElement("div",{className:"user-defined-option__hr"}),this.renderEdit(),this.renderPanelShow()))}}]),i}(m.a.Component),pt=function(t){function n(e){var c;return Object(Y.ov)(this,n),(c=t.call(this,e)||this).setShouldShowCalendar=function(e){c.setState({shouldShowCalendar:e})},c.handleUpdateWorkdayConfig=function(){var e=c.props,t=e.workdayConfig,n=e.workdayConfigPre,a=e.setShowWorkdayDialog,i=e.handleUpdateWorkdayConfig,o=t.weekday,r=t.adjustWorkday,l=t.workdayOption;i({weekday:o,adjustWorkday:r,workdayOption:l}),a(!1),Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttCalSetClick,{click:Y.cE.Confirm,target:Y.Rw.None,cal_range_click:Object(Z.a)(r,n.adjustWorkday)?"false":"true",weekday_range_click:Object(Z.a)(o,n.weekday)?"false":"true",cal_type:l===Y.fE.UserDefinedWorkday?at.CustomizedWeekday:at.PublicHoliday})},c.onDialogCancel=function(){var e=c.props,t=e.handleDialogCancel;(0,e.setShowWorkdayDialog)(!1),c.setState({shouldShowCalendar:!1}),t(),Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttCalSetClick,{click:Y.cE.Cancel,target:Y.Rw.None})},c.state={shouldShowCalendar:!1},c}return Object(Y.bu)(n,t),Object(Y.Pw)(n,[{key:"onWorkdayOptionChange",value:function(e){var t=this.props,n=t.workdayConfig;(0,t.dispatchWorkdayConfig)(Object.assign({},n,{workdayOption:e})),Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttCalSetClick,{click:0===e?Y.cE.CustomizedWeekday:Y.cE.PublicHoliday,target:Y.Rw.None})}},{key:"render",value:function(){var t=this,e=this.props,n=e.isShowWorkCalenderDialog,a=e.workdayConfig,i=e.dispatchWorkdayConfig,o=this.state.shouldShowCalendar,r="20%";return m.a.createElement($.Dialog,{title:O("Bitable_GanttView_SetWorkday_Web"),description:O("Bitable_GanttView_CustomizedWorkdayWillBeApplied_Web"),okText:O("Bitable_Common_ButtonConfirm"),cancelText:O("Bitable_Common_ButtonCancel"),visible:n,maskClosable:!1,className:"workday-config-dialog",confirmLoading:!1,centered:!1,style:{top:r},destroyOnClose:!0,onOk:function(){return t.handleUpdateWorkdayConfig()},onCancel:function(){return t.onDialogCancel()},onClick:function(){t.setShouldShowCalendar(!1)}},m.a.createElement($.Radio,{value:Y.fE.UserDefinedWorkday,checked:a.workdayOption===Y.fE.UserDefinedWorkday,onChange:function(e){t.onWorkdayOptionChange(e.target.value)}},m.a.createElement("span",null,O("Bitable_GanttView_RegularWorkday_Web"))),m.a.createElement(ut,{workdayConfig:a,shouldShowCalendar:o,dispatchWorkdayConfig:i,setShouldShowCalendar:this.setShouldShowCalendar}),!Object(Y.gE)()&&m.a.createElement($.Radio,{value:Y.fE.LegalWorkday,checked:a.workdayOption===Y.fE.LegalWorkday,onChange:function(e){t.onWorkdayOptionChange(e.target.value)}},m.a.createElement("span",null,O("Bitable_GanttView_ChineseMainlandWorkday_Web")),m.a.createElement($.Tooltip,{title:O("Bitable_GanttView_ChineseMainlandWorkdayTooltip_Web")},m.a.createElement(h.a,{className:"only-workday-switch-config__icon"}))))}}]),n}(m.a.Component),bt=function(t){function n(e){var f;return Object(Y.ov)(this,n),(f=t.call(this,e)||this).sendSetGanttConfigCommand=function(e){var t=f.props,n=t.bitableStore,a=t.activeTableId,i=t.viewId,o=t.editable,r=t.renderer;if(o){var l=r.getActiveView();l&&l.viewPermission.publicLevel===Y.fB.LOCKED?r.activeBitableWidget.events.emit(Y.kC.ShowViewLockedModal,"other"):n.getCommandManager().execute({cmd:Y.Fy.SetGanttConfig,tableId:a,viewId:i,data:e})}},f.handleUpdateStartTime=function(e){f.sendSetGanttConfigCommand({timeBarValue:{type:Y.kE.Timing,timingValue:{startDateFieldId:e}}}),f.submitGanttSettingTea(Y.lE.SetStartTime),f.submitSetGanttTimeFieldTea(e,Y.mE.StarDate)},f.handleUpdateEndTime=function(e){f.sendSetGanttConfigCommand({timeBarValue:{type:Y.kE.Timing,timingValue:{endDateFieldId:e}}}),f.submitGanttSettingTea(Y.lE.SetEndTime),f.submitSetGanttTimeFieldTea(e,Y.mE.EndDate)},f.handleCalendarSwitchChange=function(){var e=f.props.ganttConfig,t=Object(b.a)(e,nt);t=!t,f.sendSetGanttConfigCommand({officialHoliday:t}),Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttSetClick,{click:Y.mE.WeekdayShow,target:Y.Rw.None,switch:t?it.On:it.Off})},f.handleUpdateWorkdayConfig=function(e){var t=f.props.bitableStore,n=e.workdayOption,a=t.base.getWorkdayConfig(),i=Object.assign({},a);n===Y.fE.UserDefinedWorkday?Object.assign(i,e):Object.assign(i,{workdayOption:n});var o=i.weekday,r=i.holidayCountry,l=i.adjustWorkday;$.toast.loading({key:$e,duration:null,content:et});try{var c;null===(c=t.bitableSync.updateWorkdayConfig({weekday:o,country:r,adjustWorkday:l,workdayOption:n}))||void 0===c||c.then(function(){t.getModelOperator().updateFasterOfWorkday(i),f.props.bitableStore.getBaseEventManager().emit(Y.ay.WorkdayConfigLoaded),$.toast.destroy($e)},function(){f.handleDialogCancel(),$.toast.error({key:$e,content:tt}),setTimeout(function(){$.toast.destroy($e)},ct)})}catch(e){f.handleDialogCancel(),$.toast.error({key:$e,content:tt}),setTimeout(function(){$.toast.destroy($e)},ct)}},f.handleDialogCancel=function(){var e=f.props,t=e.bitableStore;(0,e.dispatchWorkdayConfig)(t.base.getWorkdayConfig())},f.handleUpdateSpecificColor=function(e){var t=e.target.dataset.value;t&&f.sendSetGanttConfigCommand({timeBarColor:{type:Y.nE.SpecificColor,specificColor:Number(t)}}),Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttSetClick,{click:Y.mE.DisplayColor})},f.handleUpdateColorType=function(e){var t=Number(e);f.sendSetGanttConfigCommand({timeBarColor:{type:t}}),f.submitGanttSettingTea(f.changeColorType2Action(t)),Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttSetClick,{click:Y.mE.Color,type:f.getColorSettingTypeByType(t)})},f.handleUpdateTimeBarColor=function(e){e&&f.sendSetGanttConfigCommand({timeBarColor:{type:Y.nE.SelectFieldId,selectFieldId:e}})},f.setShowWorkdayDialog=function(e){f.setState({workdayDialogOpen:e}),f.props.setShowWorkdayDialogOpen(e),e&&(Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttSetClick,{click:Y.mE.CustomizedCal,target:Y.Rw.CcmBitableGanttCalSetView}),Y.cz.collectBitableEvent(Y.Rw.CcmBitableGanttCalSetView))},f.renderGanttTimeConfig=function(i){var e,t,n,a,o=f.props,r=o.viewId,l=o.ganttConfig,c=r&&i.getViewById(r),s=c&&c.getStartTimeFieldId(),d=c&&c.getEndTimeFieldId(),u=c&&c.getSupportFieldIds(),p=!1;[l&&(null===(e=l.timeBarValue)||void 0===e||null===(t=e.timingValue)||void 0===t?void 0:t.startDateFieldId),l&&(null===(n=l.timeBarValue)||void 0===n||null===(a=n.timingValue)||void 0===a?void 0:a.endDateFieldId)].some(function(e){return e&&i.isDeniedField(e)})&&(p=!0);var b=u&&u.map(function(e,t){var n=i.getField(e),a=Object(Y.Uw)(n.fieldUIType);return{value:n.id,text:n.name,icon:_.createElement(a,null)}});return _.createElement("div",{className:"gantt-config-time"},_.createElement("div",{className:"bitable-layout-row bitable-flex"},_.createElement("span",{className:"gantt-field-title"},O("bitable.start_date")),_.createElement(Y.Tw,{className:"gantt-field-select",selected:p?"":s||"",onChange:f.handleUpdateStartTime,placeholder:O(p?"Bitable_AdvancedPermission_NotAccessibleField":"bitable.gantt_select_date_field"),options:b||[]})),_.createElement("div",{className:"bitable-layout-row bitable-flex"},_.createElement("span",{className:"gantt-field-title"},O("bitable.end_date")),_.createElement(Y.Tw,{className:"gantt-field-select",selected:p?"":d||"",onChange:f.handleUpdateEndTime,placeholder:O(p?"Bitable_AdvancedPermission_NotAccessibleField":"bitable.gantt_select_date_field"),options:b||[]})))},f.state={workdayDialogOpen:!1},f}return Object(Y.bu)(n,t),Object(Y.Pw)(n,[{key:"componentDidMount",value:function(){Y.cz.collectBitableEvent(Y.Rw.CcmBitableGanttSetView)}},{key:"changeColorType2Action",value:function(e){return e===Y.nE.SelectFieldId?Y.lE.SetBarColorByField:Y.lE.CustomizeBarColor}},{key:"getColorSettingTypeByType",value:function(e){return e===Y.nE.SelectFieldId?Y.oE.AlignWithRecords:Y.oE.CustomizeColor}},{key:"submitGanttSettingTea",value:function(e){var t=this.props,n=t.activeTableId,a=t.viewId;Y.ob.collectBitableEvent(Y.On.BitableGanttSetting,{tableId:n,viewId:a,action:e})}},{key:"submitSetGanttTimeFieldTea",value:function(e,t){var n=this.props,a=n.bitableStore,i=n.activeTableId,o=a.base.getTableById(i);if(o){var r=o.getField(e);Y.cz.collectClickEvent(Y.Bc.CcmBitableGanttSetClick,{click:t,field:r.fieldUIType===Y.ex.DateTime?Y.lC[r.fieldUIType]:Y.lC[Y.ex.Formula]})}}},{key:"renderGanttColorConfig",value:function(n){var e=this.props.ganttConfig,a=Object(b.a)(e,"timeBarColor"),t=n.getFieldIdsByType(Y.og.SingleSelect),i=this.props.viewId,o=i&&n.getViewById(i),r=o&&o.getTimeBarColorSelectFieldId(),l=[{value:String(Y.nE.SpecificColor),text:O("bitable.gantt_custom_color")},{value:String(Y.nE.SelectFieldId),text:O("bitable.gantt_follow_field_color")}],c=t.length?t.map(function(e){var t=n.getField(e);return t?{value:t.id,text:t.name}:null}):[{value:"NO_AVAILABLE_FIELD",text:O("Bitable_GanttView_NoAvailableField"),disabled:!0}];return _.createElement("div",{className:"gantt-config-color-wrapper"},_.createElement("div",{className:"bitable-layout-row bitable-flex"},_.createElement("span",{className:"gantt-field-title"},O("bitable.gantt_show_color")),_.createElement(Y.Tw,{className:"gantt-field-select",selected:String(a?a.type:Y.nE.SpecificColor),onChange:this.handleUpdateColorType,placeholder:O("bitable.gantt_select_date_field"),options:l})),a&&a.type===Y.nE.SelectFieldId?_.createElement("div",{className:"bitable-flex bitable-layout-row"},_.createElement("span",{className:"gantt-field-title"}," "),_.createElement(Y.Tw,{className:"gantt-field-select",selected:r||"",onChange:this.handleUpdateTimeBarColor,placeholder:O("bitable.gantt_select_single_field"),options:c})):_.createElement("div",{className:"color-settings-specific-color",onClick:this.handleUpdateSpecificColor},Y.pE.map(function(e,t){var n=!a&&0===t||Object(b.a)(a,"specificColor")===t;return _.createElement("span",{key:t,"data-value":t,className:"flex-center",style:{background:"var(--".concat(e.color,")")}},n?_.createElement(be.a,{fill:"var(--".concat(e.textColor,")")}):"")})))}},{key:"renderOnlyShowWorkdaySwitch",value:function(){var e=this;if(!Object(Y.qE)())return null;var t=this.props,n=t.bitableStore,a=t.manageable,i=t.fieldEditable,o=!0;if(n.base.isPro())a||(o=!1);else if(!i)return null;var r=this.props.ganttConfig,l=Object(b.a)(r,nt),c=this.props,s=c.workdayConfigInfo,d=c.dispatchWorkdayConfig,u=n.base.getWorkdayConfig(),p=new Y.rE(s);return _.createElement(_.Fragment,null,_.createElement("hr",null),_.createElement("div",{className:E()("only-workday-switch")},_.createElement("span",null,O("Bitable_GanttView_WorkdayOnly_Web")),_.createElement($.Switch,{checked:l,onChange:this.handleCalendarSwitchChange})),l&&o&&_.createElement("div",{className:E()("only-workday-switch-config")},_.createElement("div",{className:E()("only-workday-switch-config__title")},_.createElement("span",{className:"left-span"},O("Bitable_GanttView_CustomizeWorkday_Web")),_.createElement($.Tooltip,{title:O("Bitable_GanttView_CustomizeWorkdaySubtitle_Web")},_.createElement(h.a,{className:"only-workday-switch-config__icon"}))),_.createElement($.Button,{className:"only-workday-switch-config__span",type:"text",color:"primary",icon:_.createElement(f.a,null),onClick:function(){return e.setShowWorkdayDialog(!0)}},O("Bitable_GanttView_SetUpWorkingDay_Web"))),_.createElement(pt,{workdayConfig:p,workdayConfigPre:u,handleUpdateWorkdayConfig:this.handleUpdateWorkdayConfig,handleDialogCancel:this.handleDialogCancel,dispatchWorkdayConfig:d,isShowWorkCalenderDialog:this.state.workdayDialogOpen,setShowWorkdayDialog:this.setShowWorkdayDialog}))}},{key:"render",value:function(){var e=this.props,t=e.activeTableId,n=e.bitableStore,a=e.show,i=e.editable,o=n.base.getTableById(t);return o&&a?_.createElement("div",{className:"gantt-config-pannel gantt-config-panel-new"},!i&&_.createElement("div",{className:"gantt-config-color-disable-mask"}),_.createElement("div",{className:"gantt-config-header"},O("bitable.gantt_config")),this.renderGanttTimeConfig(o),_.createElement("hr",null),this.renderGanttColorConfig(o),this.renderOnlyShowWorkdaySwitch()):null}}]),n}(_.Component),ft=Object(te.connect)(function(e,t){var n=t.activeTableId,a=Object(Y.hE)(e,n);return{viewId:a,ganttConfig:Object(Y.iE)(e,n,a),fieldMap:Object(Y.Iz)(e,n),workdayConfigInfo:e.bitable.Base.workdayConfig}},function(t){return{dispatchWorkdayConfig:function(e){t(Object(Y.jE)(e))}}})(Object(Y.Sy)(function(e,t){var n=t.activeTableId;return{fieldEditable:e.hasPermission(Y.qy.Field,{tableId:n},Y.ry.Editable),manageable:e.getBasePermission(Y.ry.Manageable)}})(bt)),mt=function(t){function n(e){var l;return Object(Y.ov)(this,n),(l=t.call(this,e)||this).setShowWorkdayDialogOpen=function(e){l.ganttConfigPanelOpen=e},l.handleDocumentClick=function(e){if(l.props.isOpen){var t=e.target;if(!t)return;var n=document.querySelector(".bitable-float-toolbar-btn-gantt-bar-settings"),a=document.querySelector(".toolbar-gantt-bar-settings-wrapper"),i=gt(n,t),o=gt(a,t),r=ht(function(e){return/^spark\-(popup|dropdown|select)/.test(e.getAttribute("data-sel")||"")},t);i||o||r||l.ganttConfigPanelOpen||l.toggleGanttBarSettingsPanel(l.props.tableId,!1)}},l.toggleGanttBarSettingsPanel=function(e,t){var n=l.props,a=n.bitableStore,i=n.toggleGanttBarSettingsPanel,o=n.setFloatToolbarVisibility;a.isEmbeddedInDoc&&o(t),i(t)},l.setSelfRef=function(e){l.setState({selfRef:e})},l.state={selfRef:null},l}return Object(Y.bu)(n,t),Object(Y.Pw)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDocumentClick),this.bitableContainer=Object(Y.IC)(this.props.bitableStore.embeddedType)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.props.isOpen!==e.isOpen){var t=e.tableId,n=e.viewId,a=e.isOpen,i=e.renderer.getActiveView();if(!i)return;Y.ob.collectBitableEvent(Y.On.BitableOpenGanttBarSetting,{table_id:t,view_id:n,bitable_view_type:Y.Cz[i.type],is_open:a?1:0,source:"toolbar",data_source:this.props.bitableStore.Options.module})}(this.props.tableId!==e.tableId||this.props.viewId!==e.viewId&&this.props.isOpen&&e.isOpen)&&this.toggleGanttBarSettingsPanel(this.props.tableId,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleDocumentClick)}},{key:"getPanelStyle",value:function(){var e=this.props,t=e.anchorInfo,n=e.panelContentHeight,a=e.ganttBarSettingsPanelWidth,i=void 0===a?Y.uE:a,o=e.bitableStore,r=this.state.selfRef,l={left:(t&&t.anchorWidth||Y.sE)-i/2,top:Y.vE,transform:"none",width:i};if(t){var c=null;t.isParent&&r?c=r.parentElement:t.getAnchorRef&&(c=t.getAnchorRef());var s="number"==typeof n?n:Y.vD;if(c){var d=Object(Y.tC)(c,{height:Y.vD,offsetDown:o.isEmbeddedInDoc?Y.vC:Y.wC,offsetUp:o.isEmbeddedInDoc?Y.xC:Y.yC,paddingBottom:Y.tE},{childSelector:".bitable-field .bitable-field__fields-wrap",otherHeight:s});Object.assign(l,d),Object(Y.bE)(c,l,{width:i},Q.browser.isFeed?this.bitableContainer:null)}}return l}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.bitableStore,a=e.renderer,i=e.tableId,o=e.editable;if(!t)return null;var r="bitable-gantt-bar-settings",l=this.getPanelStyle();return m.a.createElement("div",{className:r,ref:this.setSelfRef,style:l},m.a.createElement(Y.AC,{panelStyle:l}),m.a.createElement(ft,{show:!0,activeTableId:i,bitableStore:n,renderer:a,editable:o,setShowWorkdayDialogOpen:this.setShowWorkdayDialogOpen}))}}]),n}(_.Component),vt=Object(le.b)(function(e){var t=e.toolbarStore;return{toggleGanttBarSettingsPanel:t.toggleGanttBarSettingsPanel,setFloatToolbarVisibility:t.toggleFloatToolbar}})(Object(te.connect)(function(e,t){var n=t.tableId;return{viewId:Object(Y.hE)(e,n)}})(Object(le.c)(mt)));function ht(e,t){for(;t;){if(e(t))return!0;t=t.parentElement}return!1}function gt(e,t){return e===t||(null==e?void 0:e.contains(t))}var yt=function(e){function t(){return Object(Y.ov)(this,t),e.apply(this,arguments)||this}return Object(Y.bu)(t,e),Object(Y.Pw)(t,[{key:"render",value:function(){var e=this.props,t=e.preCls,n=e.children,a=e.fieldName,i=e.isDivider,o=e.style;return m.a.createElement("div",{style:o,className:"".concat(t,"_setting_item_wrapper field-setting-item_wrapper")},m.a.createElement("div",{className:E()("".concat(t,"_setting_item field-setting-item"),{"has-divider":i})},m.a.createElement("span",{className:"".concat(t,"__field-setting-name ellipsis")},a),m.a.createElement("div",{className:"".concat(t,"__field-setting-children")},n)),i?m.a.createElement("div",{className:"field-setting-item_divider"}):null)}}]),t}(_.Component),Ct=function(a){function o(){var i;Object(Y.ov)(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(i=a.call.apply(a,[this].concat(t))||this).onChange=function(e){var t=i.props,n=t.onValueChange,a=t.selectedValue;e&&e!==a&&n&&n(e)},i}return Object(Y.bu)(o,a),Object(Y.Pw)(o,[{key:"render",value:function(){var t=this,e=this.props,n=e.radioClassName,a=e.selectedValue,i=e.radioItemList;return m.a.createElement("div",{className:"b-radio ".concat(n||"")},m.a.createElement("div",{className:"radio-group"},i.map(function(e){return m.a.createElement("div",{key:e.value,onClick:function(){return t.onChange(e.value)},className:E()("radio-item ellipsis",{selected:a===e.value})},e.text,e.icon)})))}}]),o}(m.a.PureComponent),wt=function(i){function o(){var n;Object(Y.ov)(this,o);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(n=i.call.apply(i,[this].concat(t))||this).handleChange=function(e){var t=n.props.onSelectedChange;t&&t(e)},n}return Object(Y.bu)(o,i),Object(Y.Pw)(o,[{key:"dropdownList",get:function(){var e=this.props,t=e.fieldList,n=e.fieldMap,a=e.fieldIcon,i=e.extendList,o=e.fieldType,r=e.selectedFieldId;if(!t||!n)return[];var l=[];t.forEach(function(e){(n[e]&&n[e].type===o||e===r)&&l.push(n[e])});var c=i?Object(Y.hI)(i):[];return l.forEach(function(e){return c.push({value:e.id,text:e.name,icon:e.type===Y.og.Denied?m.a.createElement(y.a,null):a,hidden:e.type===Y.og.Denied})}),c}},{key:"render",value:function(){var e=this.props,t=e.customStyle,n=e.width,a=e.selectedFieldId,i=e.className;return m.a.createElement(Y.Tw,{style:t,selected:a,optionWidth:n,onChange:this.handleChange,options:this.dropdownList,showSelectedIcon:!0,className:i})}}]),o}(_.Component),Et=Object(te.connect)(function(e,t){var n=t.tableId,a=Object(Y.hE)(e,n);return{viewId:a,view:Object(Y.wD)(e,n,a),fieldList:Object(Y.zy)(e,n),fieldMap:Object(Y.Iz)(e,n)}})(wt),kt="NULL",St=function(a){function c(){var l;Object(Y.ov)(this,c);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(l=a.call.apply(a,[this].concat(t))||this).executeCmd=function(e){var t=l.props,n=t.bitableStore,a=t.tableId,i=t.viewId,o=t.renderer,r=o.getActiveView();if(!r||r.viewPermission.publicLevel!==Y.fB.LOCKED)return n.getCommandManager().execute({cmd:Y.Fy.SetCardConfig,tableId:a,viewId:i,data:e});o.activeBitableWidget.events.emit(Y.kC.ShowViewLockedModal,"toolbar")},l.handleKanbanCoverFieldIdChange=function(e){l.executeCmd({coverFieldId:e===kt?null:e,showCover:e!==kt}),Y.cz.collectClickEvent(Y.Bc.CcmBitableFieldSetClick,{click:Y.xD.CoverContent,is_none:String(e===kt)})},l.handleKanbanCoverFitTypeChange=function(e){l.executeCmd({coverFitType:e}),Y.cz.collectClickEvent(Y.Bc.CcmBitableFieldSetClick,{click:Y.xD.CoverType,type:e})},l.toggleFieldNameVisibility=function(){var e=l.props.cardConfig.showFieldName;l.executeCmd({showFieldName:!e}),Y.cz.collectClickEvent(Y.Bc.CcmBitableFieldSetClick,{click:Y.xD.DisplayFieldName,is_diplay:String(!e)})},l.handleShowModeChange=function(e){l.executeCmd({showMode:e}),Y.cz.collectClickEvent(Y.Bc.CcmBitableFieldSetClick,{click:Y.xD.DisplayMode,mode:e})},l}return Object(Y.bu)(c,a),Object(Y.Pw)(c,[{key:"selectedCoverFieldId",get:function(){var e=this.props,t=e.tableId,n=e.fieldList,a=e.fieldMap,i=e.cardConfig;return t&&n&&a&&i&&i.showCover&&n.find(function(e){return e===i.coverFieldId&&a[e]&&[Y.og.Attachment,Y.og.Denied].includes(a[e].type)})||kt}},{key:"render",value:function(){var e,t=this.props,n=t.tableId,a=t.cardConfig,i=null!==(e=a.showCover)&&void 0!==e&&e,o=a.showMode||Y.yD.GENERAL,r=a.showFieldName?s.a:C.a,l=[{fieldName:O("bitable.gallery.cover_field_name"),isDivider:!i,content:m.a.createElement(Et,{tableId:n,selectedFieldId:this.selectedCoverFieldId,width:170,extendList:[{value:kt,text:O("bitable.gallery.no_cover"),icon:m.a.createElement(w.a,null)}],fieldIcon:m.a.createElement(k.a,null),fieldType:Y.og.Attachment,onSelectedChange:this.handleKanbanCoverFieldIdChange,className:"bitable-dropdown-kanban"})},{active:i,fieldName:O("bitable.gallery.cover_fit_type"),isDivider:!0,content:m.a.createElement(Ct,{radioClassName:"kanban_card_cover_type",selectedValue:a.coverFitType||Y.zD.CROP,radioItemList:c.coverFitTypeRadioItemList,onValueChange:this.handleKanbanCoverFitTypeChange})},{fieldName:O("Bitable_View_DisplayFormat"),isDivider:!1,content:m.a.createElement(Ct,{selectedValue:o,radioItemList:c.showModeRadioItemList,onValueChange:this.handleShowModeChange})},{active:o===Y.yD.GENERAL,fieldName:O("smartable.card_field_show"),content:m.a.createElement("div",{className:"bitable-common-hover-press-background icon-background bitable-layout-row bitable-layout-main-cross-center"},m.a.createElement(r,{className:"setting_visible_icon",onClick:this.toggleFieldNameVisibility}))}];return m.a.createElement("div",{className:"bitable-kanban-card-config"},l.map(function(e,t){return!1!==e.active&&m.a.createElement(yt,{fieldName:e.fieldName,isDivider:!!e.isDivider,preCls:"kanban-setting-item",key:t},e.content)}))}}]),c}(m.a.PureComponent);St.showModeRadioItemList=[{value:Y.yD.GENERAL,text:O("Bitable_View_GeneralFormat")},{value:Y.yD.COMPACT,text:O("Bitable_View_CompactFormat")}],St.coverFitTypeRadioItemList=[{value:Y.zD.FIT,text:O("bitable.gallery.cover_fit")},{value:Y.zD.CROP,text:O("bitable.gallery.cover_crop")}];var Ot=Object(te.connect)(function(e,t){var n=t.tableId,a=Object(Y.hE)(e,n);return{cardConfig:Object(Y.AD)(e,n,a),viewId:a,fieldList:Object(Y.zy)(e,n),fieldMap:Object(Y.Iz)(e,n)}})(St),_t=function(e){function t(){return Object(Y.ov)(this,t),e.apply(this,arguments)||this}return Object(Y.bu)(t,e),Object(Y.Pw)(t,[{key:"renderCardConfig",value:function(){var e=this.props,t=e.bitableStore,n=e.tableId,a=e.renderer;return m.a.createElement(Ot,{bitableStore:t,tableId:n,renderer:a})}},{key:"render",value:function(){var e,t=this.props,n=t.bitableStore,a=t.cardConfig,i=t.tableId,o=t.renderer,r=t.anchorInfo,l=t.showFieldPanel,c=t.toggleFieldPanel,s=null!==(e=a.showCover)&&void 0!==e&&e,d=(a.showMode||Y.yD.GENERAL)===Y.yD.GENERAL,u=ce.c+Number(s&&ce.b)+Number(d&&ce.d);return m.a.createElement(ce.a,{isOpen:l,toggleFieldPanel:c,bitableStore:n,tableId:i,renderer:o,anchorInfo:r,ExtraContent:this.renderCardConfig(),panelTitle:O("smartable.kanban_card_config"),guideAction:Y.WD.CustomizeCard,panelContentHeight:u})}}]),t}(m.a.Component);function Ft(e){return Object(le.b)(function(e){var t=e.toolbarStore;return{showFieldPanel:t.isOpenFieldPanel,toggleFieldPanel:t.toggleFieldPanel}})(e)}var Tt,It,Dt,Nt,Bt=Ft(Object(te.connect)(function(e,t){var n=t.tableId,a=Object(Y.hE)(e,n);return{cardConfig:Object(Y.AD)(e,n,a)}})(Object(le.c)(_t))),Pt="NULL",Mt=Object(le.b)(function(e,t){var n=t.viewId,a=t.tableId,i=e.modelState.getViewConfig(a,n),o=e.modelState.getTableById(t.tableId),r=null==o?void 0:o.getViewById(t.viewId),l=null==o?void 0:o.fields,c=null==r?void 0:r.getAllFields();return{viewId:n,galleryConfig:i,view:r,fieldMap:l,fieldList:c}})(Tt=Object(le.c)(((It=function(a){function c(){var l;Object(Y.ov)(this,c);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(l=a.call.apply(a,[this].concat(t))||this).executeCmd=function(e){var t=l.props,n=t.bitableStore,a=t.tableId,i=t.viewId,o=t.view,r=t.renderer;o&&o.publicLevel===Y.fB.LOCKED?r.activeBitableWidget.events.emit(Y.kC.ShowViewLockedModal,"toolbar"):n.getCommandManager().execute({cmd:Y.Fy.SetGalleryConfig,tableId:a,viewId:i,data:e})},l.handleGalleryCoverFieldIdChange=function(e){l.executeCmd({coverFieldId:e===Pt?null:e,showCover:e!==Pt}),Y.cz.collectClickEvent(Y.Bc.CcmBitableFieldSetClick,{click:Y.xD.CoverContent,is_none:String(e===Pt)})},l.handleCoverFitTypeChange=function(e){var t=l.props,n=t.tableId,a=t.viewId;l.executeCmd({coverFitType:e}),Y.ob.collectBitableEvent(Y.On.BitableGallerySwitchCover,{table_id:n,view_id:a}),Y.cz.collectClickEvent(Y.Bc.CcmBitableFieldSetClick,{click:Y.xD.CoverType,type:e})},l.toggleFieldNameVisibility=function(){var e,t=(null===(e=l.props.galleryConfig)||void 0===e?void 0:e.showFieldName)||!1;l.executeCmd({showFieldName:!t}),Y.cz.collectClickEvent(Y.Bc.CcmBitableFieldSetClick,{click:Y.xD.DisplayFieldName,is_diplay:String(!t)})},l.handleShowModeChange=function(e){l.executeCmd({showMode:e}),Y.cz.collectClickEvent(Y.Bc.CcmBitableFieldSetClick,{click:Y.xD.DisplayMode,mode:e})},l}return Object(Y.bu)(c,a),Object(Y.Pw)(c,[{key:"selectedCoverFieldId",get:function(){var e=this.props,t=e.tableId,n=e.fieldList,a=e.fieldMap,i=e.galleryConfig;return t&&n&&a&&i&&i.showCover&&n.find(function(e){return e===i.coverFieldId&&a[e]&&[Y.og.Attachment,Y.og.Denied].includes(a[e].type)})||Pt}},{key:"render",value:function(){var e,t=this.props,n=t.galleryConfig,a=t.tableId,i=null===(e=null==n?void 0:n.showCover)||void 0===e||e,o=(null==n?void 0:n.showMode)||Y.yD.GENERAL,r=null!=n&&n.showFieldName?s.a:C.a,l=[{fieldName:O("bitable.gallery.cover_field_name"),isDivider:!i,content:m.a.createElement(Et,{tableId:a,selectedFieldId:this.selectedCoverFieldId,width:170,extendList:[{value:Pt,text:O("bitable.gallery.no_cover"),icon:m.a.createElement(w.a,null)}],fieldIcon:m.a.createElement(k.a,null),fieldType:Y.og.Attachment,onSelectedChange:this.handleGalleryCoverFieldIdChange,className:"bitable-dropdown-gallery"})},{disabled:!i,fieldName:O("bitable.gallery.cover_fit_type"),isDivider:!0,content:m.a.createElement(Ct,{radioClassName:"gallery_card_cover_type",selectedValue:(null==n?void 0:n.coverFitType)||Y.zD.CROP,radioItemList:c.coverFitTypeRadioItemList,onValueChange:this.handleCoverFitTypeChange})},{fieldName:O("Bitable_View_DisplayFormat"),isDivider:!1,content:m.a.createElement(Ct,{selectedValue:o,radioItemList:c.showModeRadioItemList,onValueChange:this.handleShowModeChange})},{disabled:o===Y.yD.COMPACT,fieldName:O("bitable.gallery.show_field_name"),content:m.a.createElement("div",{className:"bitable-common-hover-press-background icon-background bitable-layout-row bitable-layout-main-cross-center"},m.a.createElement(r,{className:"setting_visible_icon",onClick:this.toggleFieldNameVisibility}))}];return m.a.createElement("div",{className:"bitable-gallery-card-config select-disabled"},l.filter(function(e){return!e.disabled}).map(function(e,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement(yt,{fieldName:e.fieldName,preCls:"gallery-setting-item",key:t},e.content),e.isDivider&&m.a.createElement("div",{className:"bitable-gallery-divider"}))}))}}]),c}(m.a.Component)).showModeRadioItemList=[{value:Y.yD.GENERAL,text:O("Bitable_View_GeneralFormat")},{value:Y.yD.COMPACT,text:O("Bitable_View_CompactFormat")}],It.coverFitTypeRadioItemList=[{value:Y.zD.FIT,text:O("bitable.gallery.cover_fit")},{value:Y.zD.CROP,text:O("bitable.gallery.cover_crop")}],Tt=It))||Tt)||Tt,xt=function(e){function t(){return Object(Y.ov)(this,t),e.apply(this,arguments)||this}return Object(Y.bu)(t,e),Object(Y.Pw)(t,[{key:"render",value:function(){var e=this.props,t=e.bitableStore,n=e.tableId,a=e.viewId,i=e.renderer;return m.a.createElement("div",{className:"bitable-common-card-config"},m.a.createElement(Mt,{bitableStore:t,tableId:n,viewId:a,renderer:i}))}}]),t}(m.a.PureComponent),jt=Object(te.connect)(function(e,t){var n=t.tableId,a=Object(Y.hE)(e,n);return{viewId:a,cardConfig:Object(Y.AD)(e,n,a),view:Object(Y.wD)(e,n,a)}})(xt),Lt=87,Rt=function(e){function t(){return Object(Y.ov)(this,t),e.apply(this,arguments)||this}return Object(Y.bu)(t,e),Object(Y.Pw)(t,[{key:"renderCardConfig",value:function(){var e=this.props,t=e.bitableStore,n=e.tableId,a=e.renderer;return m.a.createElement(jt,{bitableStore:t,tableId:n,renderer:a})}},{key:"render",value:function(){var e,t=this.props,n=t.bitableStore,a=t.cardConfig,i=t.tableId,o=t.renderer,r=t.anchorInfo,l=t.showFieldPanel,c=t.toggleFieldPanel,s=null!==(e=a.showCover)&&void 0!==e&&e,d=(a.showMode||Y.yD.GENERAL)===Y.yD.GENERAL,u=Lt+Number(s&&ce.b)+Number(d&&ce.d);return m.a.createElement(ce.a,{isOpen:l,toggleFieldPanel:c,bitableStore:n,tableId:i,renderer:o,anchorInfo:r,ExtraContent:this.renderCardConfig(),guideAction:Y.WD.CustomizeCard,panelContentHeight:u})}}]),t}(m.a.Component),At=Ft(Object(te.connect)(function(e,t){var n=t.tableId,a=Object(Y.hE)(e,n);return{cardConfig:Object(Y.BD)(e,n,a)}})(Object(le.c)(Rt))),Wt=["isNewLayout","isShowName"],Gt=(Object(Y.Ww)(Dt={},Y.CD.Short,a.a),Object(Y.Ww)(Dt,Y.CD.Medium,i.a),Object(Y.Ww)(Dt,Y.CD.Tall,o.a),Object(Y.Ww)(Dt,Y.CD.ExtraTall,l.a),Dt),Vt=(Object(Y.Ww)(Nt={},Y.LC.FIELD,{isParent:!0,anchorWidth:Y.DD/2}),Object(Y.Ww)(Nt,Y.LC.FILTER,{isParent:!0,anchorWidth:Y.ED/2}),Object(Y.Ww)(Nt,Y.LC.GROUP,{isParent:!0,anchorWidth:Y.FD/2}),Object(Y.Ww)(Nt,Y.LC.SORT,{isParent:!0,anchorWidth:Y.GD/2}),Object(Y.Ww)(Nt,Y.LC.ROW_HEIGHT,{isParent:!0,anchorWidth:Y.HD/2}),Object(Y.Ww)(Nt,Y.LC.FORM_SHARE,{isParent:!0}),Nt);function Ht(e){var t=e.id,n=e.cls,a=e.name,i=e.type,o=e.icon,r=e.decorator,l=e.editable,c=e.isShowName,s=void 0===c||c,d=e.disable,u=void 0!==d&&d,p=e.onClick,b=e.customToolTipProp,f=e.showTooltip,m=void 0===f||f,v=e.addRecordBtnName,h=e.isShowDeniedFieldTip,g=e.deniedFieldTip,y=e.forceShowTooltip,C=void 0!==y&&y;l||(u=!0),h&&Y.cz.collectBitableEvent(Y.Rw.CcmBitableToolbarLimitedTipsView,{limited_premium_permission:g,limited_type:a});var w=_.createElement("div",{id:t,className:n,"data-selector":l&&ye[i]?ye[i]:"",onClick:function(e){return l?p&&p(i):function(){return null}}},_.createElement("div",{className:E()("toolbar-btn-container","bitable-layout-row bitable-layout-cross-center bitable-noselect",{"toolbar-btn-container-mouse-event":!u})},_.createElement("i",{className:"toolbar-icon"},o),s&&_.createElement("span",{className:"toolbar-text"},r||"",v?_.createElement("span",null,v):_.createElement("span",null,a)),h?_.createElement($.Tooltip,{title:g},_.createElement("i",{className:"toolbar-icon"},_.createElement(S.a,null))):null));return m||C?_.createElement($.Tooltip,Object(Y.Kx)({disabled:!C&&u,placement:"bottom",adjustOverflow:!0,title:a,hideAction:["click"],mouseEnterDelay:300},b),w):w}function zt(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return E()(Qt,Object.assign({},n,{disabled:!e,interactive:t&&e}))}function Ut(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=n.hasEditablePermission;return(e||a)&&i(t)}function Yt(e,t){return(0,t.getLocalEditable)(e)}function qt(e){var t=e.isSyncTable,n=e.addRecOpDisabled;return t?{placement:"top",title:O("Bitable_DataReference_SyncFromOtherBase_ActionNotSupported_Tooltip")}:n?{title:O("Bitable_AdvancedPermission_NoPermAddRecord"),placement:"top"}:{}}function Kt(e,t){if(t){var n,a=Object(Y.WB)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value.fieldId;if(e&&e.isDeniedField(i))return!0}}catch(e){a.e(e)}finally{a.f()}}return!1}function Xt(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=a.isShowName,o=a.icon,r=a.isShowShortCut,l=Ut(e,Y.qy.UndoRedo,t),c=t.bitableStore.isSyncTable(t.tableId);return{type:Y.LC.UNDO,item:_.createElement("div",{key:Y.LC.UNDO,className:"toolbar-undo-wrapper"},Ht({cls:zt(l&&!c),name:!1===r?"".concat(O("common.undo")):"".concat(O("common.undo"),"（").concat(Y.JD.undo,"）"),type:Y.LC.UNDO,icon:void 0===o?_.createElement(F.a,null):o,editable:l&&!c,decorator:void 0,isShowName:!!i,disable:!1,onClick:n,customToolTipProp:qt({isSyncTable:c}),forceShowTooltip:!0}))}}function Zt(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=a.isShowName,o=a.icon,r=a.isShowShortCut,l=Ut(e,Y.qy.UndoRedo,t),c=t.bitableStore.isSyncTable(t.tableId);return{type:Y.LC.REDO,item:_.createElement("div",{key:Y.LC.REDO,className:"toolbar-redo-wrapper"},Ht({cls:zt(l&&!c),name:!1===r?"".concat(O("common.redo")):"".concat(O("common.redo"),"（").concat(Y.JD.redo,"）"),type:Y.LC.REDO,editable:l&&!c,icon:void 0===o?_.createElement(T.a,null):o,decorator:void 0,isShowName:!!i,disable:!1,onClick:n,customToolTipProp:qt({isSyncTable:c}),forceShowTooltip:!0}))}}function Jt(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return E()(Qt,{disabled:e,interactive:(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&!e})}var Qt=["bitable-layout-row","bitable-layout-cross-center","bitable-noselect","toolbar-btn"];function $t(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=n.isShowName,i=n.icon,o=n.isShowShortCut,r=n.isShowTooltip,l=e.bitableStore,c=e.tableId,s=e.viewId,d=e.renderer,u=e.embeddedType,p=!1===o?"".concat(O("bitable.toolbar_find")):"".concat(O("bitable.toolbar_find"),"（").concat(Y.JD.find,"）"),b=u===Y.pA.EmbeddedInDoc;return{type:Y.LC.FIND,item:_.createElement("div",{key:Y.LC.FIND,className:"toolbar-find-wrapper",id:"bitable-toolbar-find"},_.createElement(xe,{bitableStore:l,tableId:c,viewId:s,renderer:d}),Ht({cls:Jt(),name:b?O("bitable.toolbar_find"):p,type:Y.LC.FIND,editable:!0,icon:void 0===i?_.createElement(I.a,null):i,isShowName:void 0===a?b:a,showTooltip:void 0===r?!b:r,onClick:t}))}}function en(e,t,n){var a,i,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=t.bitableStore,l=t.tableId,c=t.renderer,s=t.fieldPanelOpened,d=t.toggleFieldPanel,u=t.highlightedButtons,p=t.view,b=t.getFieldHiddenCount,f=u&&(u.has(Y.LC.FIELD)||u.has(Y.LC.Card_Set)),m=o.showTooltip,v=void 0!==m&&m,h=o.isShowName,g=void 0===h||h,y=ce.a,C=O("bitable.field_edit_title"),w=Y.WD.CustomizeColumns,E=null==p?void 0:p.type;E===Y.az.Grid?(a=O("bitable.field_edit_title"),i=!0):E===Y.az.Kanban?(y=Bt,C=O("smartable.kanban_card_config")):E===Y.az.Gallery?(y=At,C=O("smartable.kanban_card_config")):E===Y.az.Gantt&&(a=O("bitable.field_edit_title"),i=!0,w=Y.WD.GanttSetFields);var k=0<b(),S=zt(e=Ut(e,Y.qy.ToolbarField,t,Yt(Y.qy.ToolbarField,t)),!k,{"active-field":f||k,"toolbar-btn-highlight":f});return{type:Y.LC.FIELD,item:_.createElement("div",{key:Y.LC.FIELD,className:"toolbar-field-wrapper"},_.createElement(y,{isOpen:s,toggleFieldPanel:d,bitableStore:r,tableId:l,panelTitle:a,panelTitleDivider:i,renderer:c,anchorInfo:Vt[Y.LC.FIELD],guideAction:w}),Ht({cls:S,name:C,editable:Ut(e,Y.qy.ToolbarField,t),type:Y.LC.FIELD,icon:_.createElement(D.a,null),showTooltip:v,isShowName:g,onClick:n}))}}function tn(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=t.bitableStore,o=t.tableId,r=t.renderer,l=t.ganttBarSettingsPanelOpened,c=t.highlightedButtons,s=c&&c.has(Y.LC.GANTT_BAR_SETTINGS),d=a.showTooltip,u=void 0!==d&&d,p=a.isShowName,b=void 0===p||p,f=zt(e=Ut(e,Y.qy.ToolbarField,t,Yt(Y.qy.ToolbarField,t)),!l,{"toolbar-btn-highlight":s});return{type:Y.LC.GANTT_BAR_SETTINGS,item:_.createElement("div",{key:Y.LC.GANTT_BAR_SETTINGS,className:"toolbar-gantt-bar-settings-wrapper"},o&&_.createElement(vt,{isOpen:l,tableId:o,bitableStore:i,renderer:r,anchorInfo:{isParent:!0,anchorWidth:Y.KD/2},editable:e}),Ht({cls:f,name:O("bitable.gantt_config"),type:Y.LC.GANTT_BAR_SETTINGS,editable:Ut(e,Y.qy.ToolbarField,t),icon:_.createElement(N.a,null),showTooltip:u,isShowName:b,onClick:n}))}}function nn(e,t,n){var a,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=t.bitableStore,r=t.tableId,l=t.viewId,c=t.renderer,s=t.highlightedButtons,d=t.filterInfo,u=Object(Y.PD)(null!==(a=null==d?void 0:d.conditions)&&void 0!==a?a:[]).length,p=s&&s.has(Y.LC.FILTER),b=i.showTooltip,f=void 0!==b&&b,m=i.isShowName,v=void 0===m||m,h=o.base.getTableById(r),g=0<u,y=Ut(e,Y.qy.Filter,t,Yt(Y.qy.Filter,t)),C=h&&Kt(h,null==d?void 0:d.conditions)&&(null==d?void 0:d.conditions)&&!!d.conditions.length,w=zt(y,!g,{"active-filter":p||g,"toolbar-btn-highlight":p}),E=0<u?_.createElement("span",{style:{marginRight:4}},u):void 0;return{type:Y.LC.FILTER,item:_.createElement("div",{key:Y.LC.FILTER,className:"toolbar-filter-wrapper"},_.createElement(Y.LD,{bitableStore:o,tableId:r,renderer:c,viewId:l,editable:e,anchorInfo:Vt[Y.LC.FILTER]}),Ht({cls:w,name:O("bitable.filter"),type:Y.LC.FILTER,editable:y,icon:_.createElement(B.a,null),decorator:E,showTooltip:f,deniedFieldTip:Y.jz.BitableFieldNoPermissionToSetFilter,isShowName:v,isShowDeniedFieldTip:C,onClick:n}))}}var an=Object(Y.Ww)({},Y.az.Grid,Y.ID.CMD_SHIFT_ENTER);function on(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=null!=t?t:{},o=i.isAutoSort,r=i.view,l=!(r&&(o||r.type!==Y.az.Grid)),c=a.isNewLayout,s=a.isShowName,d=Object(Y.nA)(a,Wt),u=r&&s?an[r.type]:O("bitable.field.link_add_record");return{type:Y.LC.ADD,item:_.createElement("div",{key:Y.LC.ADD,className:E()("toolbar-group-wrapper","bitable-toolbar-add",{"bitable-toolbar-add-new-layout":c})},Ht(Object.assign({},d,{cls:Jt(!e),name:u,type:Y.LC.ADD,editable:e,showTooltip:l,icon:c?_.createElement(P.a,null):_.createElement(M.a,null),onClick:n,isShowName:!c||s,addRecordBtnName:O("bitable.field.link_add_record")})))}}function rn(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=n.showTooltip,i=void 0!==a&&a,o=n.isShowName,r=void 0===o||o;return{type:Y.LC.REMINDER,item:_.createElement("div",{key:Y.LC.REMINDER,className:E()("toolbar-item-wrapper","bitable-toolbar-reminder")},Ht({cls:Jt(!e),name:O("reminder.popover.notifyTime"),type:Y.LC.REMINDER,editable:e,showTooltip:e&&i,isShowName:r,icon:_.createElement(x.a,null),onClick:t}))}}function ln(e,t){Y.Ly.registeMethod(Y.Jy.GROUPBY,{getPositionCallback:function(){return null==t?void 0:t.firstChild},clickCallBack:function(){e&&e(Y.LC.GROUP)}})}function cn(e,t,n,a){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=t.tableId,r=t.viewId,l=t.highlightedButtons,c=t.bitableStore,s=t.renderer,d=t.groupInfo,u=l&&l.has(Y.LC.GROUP),p=i.showTooltip,b=void 0!==p&&p,f=i.isShowName,m=void 0===f||f,v=d&&0<d.length,h=Ut(e,Y.qy.Group,t,Yt(Y.qy.Group,t)),g=c.base.getTableById(o),y=zt(h,!v,{"active-group":u||v,"toolbar-btn-highlight":u}),C=d&&d.length?_.createElement("span",{style:{marginRight:4}},d.length):void 0,w=g&&Kt(g,d)&&d&&!!d.length;return{type:Y.LC.GROUP,item:_.createElement("div",{key:Y.LC.GROUP,id:"bitable-toolbar-group",className:"toolbar-group-wrapper",ref:function(e){return ln(a,e)}},_.createElement(Y.MD,{tableId:null!=o?o:"",viewId:null!=r?r:"",collectSetGroupEvent:n,renderer:s,editable:e,anchorInfo:Vt[Y.LC.GROUP]}),Ht({cls:y,name:O("bitable.group"),type:Y.LC.GROUP,editable:h,icon:_.createElement(j.a,null),decorator:C,deniedFieldTip:Y.jz.BitableFieldNoPermissionToSetGroup,isShowDeniedFieldTip:w,showTooltip:b,isShowName:m,onClick:a}))}}function sn(e,t,n,a){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=t.tableId,r=t.viewId,l=t.highlightedButtons,c=t.bitableStore,s=t.renderer,d=t.sortInfo,u=t.isAutoSort,p=l&&l.has(Y.LC.SORT),b=i.showTooltip,f=void 0!==b&&b,m=i.isShowName,v=void 0===m||m,h=Ut(e,Y.qy.Sort,t,Yt(Y.qy.Sort,t)),g=c.base.getTableById(o),y=u&&null!=d&&d.length?_.createElement("span",{style:{marginRight:4}},d.length):void 0,C=g&&Kt(g,d)&&d&&!!d.length;return{type:Y.LC.SORT,item:_.createElement("div",{key:Y.LC.SORT,className:"toolbar-sort-wrapper"},_.createElement(Y.ND,{tableId:o,viewId:r,renderer:s,editable:e,collectSetSortEvent:n,anchorInfo:Vt[Y.LC.SORT]}),Ht({cls:zt(h,!u,{"active-sort":p||u&&d&&0<d.length,"toolbar-btn-highlight":p}),name:O("bitable.sort"),decorator:y,type:Y.LC.SORT,editable:h,icon:_.createElement(L.a,null),showTooltip:f,isShowName:v,deniedFieldTip:Y.jz.BitableFieldNoPermissionToSetSort,isShowDeniedFieldTip:C,onClick:a}))}}function dn(e,t,n,a){var i=t.tableId,o=t.viewId,r=t.highlightedButtons,l=r&&r.has(Y.LC.ROW_HEIGHT),c=a.showTooltip,s=void 0!==c&&c,d=a.isShowName,u=void 0===d||d,p=a.level,b=void 0===p?Y.CD.Short:p,f=Ut(e,Y.qy.RowHeight,t,Yt(Y.qy.RowHeight,t)),m=Gt[b];return{type:Y.LC.ROW_HEIGHT,item:_.createElement("div",{key:Y.LC.ROW_HEIGHT,className:"toolbar-rowHeight-wrapper"},_.createElement(Y.OD,{tableId:i,viewId:o,anchorInfo:Vt[Y.LC.ROW_HEIGHT]}),Ht({cls:zt(f,!0,{"toolbar-btn-highlight":l}),name:O("bitable.row_height"),type:Y.LC.ROW_HEIGHT,editable:f,icon:m&&_.createElement(m,null),showTooltip:s,isShowName:u,onClick:n}))}}function un(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=t.haveCommentPermission,o=a.showTooltip,r=void 0!==o&&o,l=a.isShowName,c=void 0===l||l,s=a.isNewLayout,d=void 0!==s&&s;return{type:Y.LC.COMMENT,item:_.createElement("div",{key:Y.LC.COMMENT,className:E()("toolbar-item-wrapper","bitable-toolbar-comment")},Ht({id:"toolbar-cell-keep-focus",cls:Jt(!i),name:O("common.comment"),type:Y.LC.COMMENT,editable:i,icon:_.createElement(R.a,null),showTooltip:!!d||r,isShowName:!d&&c,onClick:n}))}}function pn(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=a.showTooltip,o=void 0!==i&&i,r=a.isShowName,l=void 0===r||r;return{type:Y.LC.MENTION,item:_.createElement("div",{key:Y.LC.MENTION,className:E()("toolbar-item-wrapper","bitable-toolbar-mention")},Ht({cls:Jt(!e),name:O("etherpad.memtioned"),type:Y.LC.MENTION,editable:e,icon:_.createElement(W.a,null),showTooltip:o,isShowName:l,onClick:n}))}}function bn(e,t,n,a){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=t.tableId,r=t.renderer,l=t.shareFormPanelOpened,c=t.toggleFormSharePanel,s=t.viewId,d=t.updateFormMeta,u=t.formMeta,p=!!u.flag&&!a,b=e&&!a?{"active-form-share":p,"form-share":!0,"form-share-feed":Q.browser.isFeed}:{"form-share-disabled":!0},f=i.showTooltip,m=void 0!==f&&f,v=i.isShowName,h=void 0===v||v;return{type:Y.LC.FORM_SHARE,item:_.createElement("div",{key:Y.LC.FORM_SHARE,className:E()("toolbar-item-wrapper","bitable-toolbar-form-share")},_.createElement(Qe,{editable:e,isOpen:l,toggleFormSharePanel:c,updateFormMeta:d,formMeta:u,tableId:o,viewId:s,renderer:r,anchorInfo:Vt[Y.LC.FORM_SHARE]}),_.createElement($.Tooltip,{disabled:e,title:O("Bitable_Form_NoPermToShare_Web"),placement:"top"},Ht({cls:zt(e&&!a,!0,b),name:O(p?"Bitable_Form_FormShared":"Bitable_Form_ShareForm"),type:Y.LC.FORM_SHARE,editable:e,showTooltip:m,isShowName:h,icon:p?_.createElement(V.a,null):_.createElement(y.a,null),onClick:a?function(){return null}:n})))}}function fn(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=t.formMeta,i=e,o=n.showTooltip,r=void 0!==o&&o,l=n.isShowName,c=void 0===l||l;return{type:Y.LC.FORM_PREVIEW,item:_.createElement("div",{key:Y.LC.FORM_PREVIEW,className:E()("toolbar-item-wrapper","bitable-toolbar-form-preview",{"bitable-toolbar-form-preview-feed":Q.browser.isFeed})},Ht({cls:Jt(!i),name:O("Bitable_Form_PreviewForm"),type:Y.LC.FORM_PREVIEW,editable:i,showTooltip:r,isShowName:c,icon:_.createElement(H.a,null),onClick:function(){Y.cz.collectBitableEvent(Y.Bc.CcmBitableToolbarClick,{click:Y.PC[Y.LC.FORM_PREVIEW],target:Y.oz});var e=Object(Y.HP)(Le(a.shareToken));Y.ob.DomainHelper.protectedOpenLink(e)}}))}}function mn(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=n.showTooltip,i=void 0!==a&&a,o=n.isShowName,r=void 0===o||o;return{type:Y.LC.FORM_CREATE,item:_.createElement("div",{key:Y.LC.FORM_CREATE,className:E()("toolbar-item-wrapper")},Ht({cls:Jt(!e),name:O("Bitable_Form_FormCollection"),type:Y.LC.FORM_CREATE,editable:e,showTooltip:e&&i,isShowName:r,icon:_.createElement(z.a,null),onClick:t}))}}function vn(e,t,n){var a=t.formSettingsPanelOpened,i=e?{"active-form-settings":a}:{};return{type:Y.LC.FORM_SETTINGS,item:_.createElement("div",{key:Y.LC.FORM_SETTINGS,className:E()("toolbar-item-wrapper")},Ht({cls:zt(e,!0,i),name:O("Bitable_Form_ResponseSettings"),type:Y.LC.FORM_SETTINGS,editable:e,showTooltip:!0,isShowName:!1,icon:_.createElement(D.a,{className:"bitable-toolbar-form-settings-icon"}),onClick:n}))}}function hn(e,t,n){var a,i=t.renderer,o=t.tableId,r=t.viewId,l=(0,t.hasEditablePermission)(Y.qy.Field);if(e&&l){var c,s=null===(c=i.storageManager)||void 0===c?void 0:c.getAllConfig(o,r);a=(null==s?void 0:s.formMode)||Y.MC.Edit}else a=Y.MC.Submit;var d=a===Y.MC.Edit;return{type:Y.LC.FORM_MODE,item:_.createElement("div",{key:Y.LC.FORM_MODE,className:E()("bitable-form-mode-btn-group",{disabled:!e||!l})},_.createElement($.Radio.Group,{optionType:"button",value:a,onChange:n,disabled:!e||!l},_.createElement($.Radio.Button,{value:Y.MC.Edit,className:E()("bitable-form-mode-btn-edit-onboarding",{"form-mode-btn-checked":d})},_.createElement($.Tooltip,{disabled:!(!l&&e),placement:"top",adjustOverflow:!0,title:O("Bitable_Form_NoPermToEdit_Web")},_.createElement("i",{className:"form-mode-btn-icon"},_.createElement(f.a,null)),_.createElement("span",null,O("Bitable_Form_EditFormMenu")))),_.createElement($.Radio.Button,{value:Y.MC.Submit,className:E()("bitable-form-mode-btn-submit-onboarding",{"form-mode-btn-checked":!d,"has-edit-perm":e})},_.createElement("i",{className:"form-mode-btn-icon"},_.createElement(U.a,null)),_.createElement("span",null,O("Bitable_Form_FillInFormMenu")))))}}}).call(this,yn("vb163"))},vb414:function(e,t,n){var a;a=function(n,a){return function(n){var a={};function i(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=12)}([function(e,t,n){"use strict";function a(e,t){for(var n=0,a=e.length;n<a;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function i(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function o(e){return"number"==typeof e&&!isNaN(e)}function r(e){return parseInt(e,10)}function l(e,t,n){if(e[t])return new Error("Invalid prop "+t+" passed to "+n+" - do not set this, set it on the child.")}Object.defineProperty(t,"__esModule",{value:!0}),t.findInArray=a,t.isFunction=i,t.isNum=o,t.int=r,t.dontSetMe=l},function(e,t,n){"use strict";function a(e){return function(){return e}}var i=function(){};i.thatReturns=a,i.thatReturnsFalse=a(!1),i.thatReturnsTrue=a(!0),i.thatReturnsNull=a(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";var u=function(e){};function a(e,t,n,a,i,o,r,l){if(u(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,a,i,o,r,l],d=0;(c=new Error(t.replace(/%s/g,function(){return s[d++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}"production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&(u=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=a},function(e,t,n){"use strict";var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=a},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.matchesSelector=d,t.matchesSelectorAndParentsTo=u,t.addEvent=p,t.removeEvent=b,t.outerHeight=f,t.outerWidth=m,t.innerHeight=v,t.innerWidth=h,t.offsetXYFromParent=g,t.createCSSTransform=y,t.createSVGTransform=C,t.getTouch=w,t.getTouchIdentifier=E,t.addUserSelectStyles=k,t.removeUserSelectStyles=S,t.styleHacks=O,t.addClassName=_,t.removeClassName=F;var i=n(0),o=n(19),r=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s="";function d(t,e){return s||(s=(0,i.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(e){return(0,i.isFunction)(t[e])})),!!(0,i.isFunction)(t[s])&&t[s](e)}function u(e,t,n){var a=e;do{if(d(a,t))return!0;if(a===n)return!1;a=a.parentNode}while(a);return!1}function p(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}function b(e,t,n){e&&(e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null)}function f(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,i.int)(n.borderTopWidth),t+=(0,i.int)(n.borderBottomWidth)}function m(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,i.int)(n.borderLeftWidth),t+=(0,i.int)(n.borderRightWidth)}function v(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,i.int)(n.paddingTop),t-=(0,i.int)(n.paddingBottom)}function h(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,i.int)(n.paddingLeft),t-=(0,i.int)(n.paddingRight)}function g(e,t){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:e.clientX+t.scrollLeft-n.left,y:e.clientY+t.scrollTop-n.top}}function y(e){var t=e.x,n=e.y;return c({},(0,o.browserPrefixToKey)("transform",r.default),"translate("+t+"px,"+n+"px)")}function C(e){return"translate("+e.x+","+e.y+")"}function w(e,t){return e.targetTouches&&(0,i.findInArray)(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&(0,i.findInArray)(e.changedTouches,function(e){return t===e.identifier})}function E(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}function k(e){if(e){var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {background: transparent;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {background: transparent;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&_(e.body,"react-draggable-transparent-selection")}}function S(e){try{e&&e.body&&F(e.body,"react-draggable-transparent-selection"),window.getSelection().removeAllRanges()}catch(e){}}function O(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a({touchAction:"none"},e)}function _(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)"+t+"(?!\\S)"))||(e.className+=" "+t)}function F(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)"+t+"(?!\\S)","g"),"")}},function(e,t){e.exports=a},function(e,t,n){if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV){var a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,i=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},o=!0;e.exports=n(14)(i,o)}else e.exports=n(17)()},function(e,t,n){"use strict";var a=n(1);if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV){var o=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=0,o="Warning: "+e.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(e){}};a=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,a=Array(2<n?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];o.apply(void 0,[t].concat(a))}}}e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundPosition=o,t.snapToGrid=r,t.canDragX=l,t.canDragY=c,t.getControlPosition=s,t.createCoreData=p,t.createDraggableData=b;var d=n(0),a=i(n(4)),u=n(5);function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){if(!e.props.bounds)return[t,n];var a=e.props.bounds;a="string"==typeof a?a:f(a);var i=m(e);if("string"==typeof a){var o=i.ownerDocument,r=o.defaultView,l=void 0;if(!((l="parent"===a?i.parentNode:o.querySelector(a))instanceof HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');var c=r.getComputedStyle(i),s=r.getComputedStyle(l);a={left:-i.offsetLeft+(0,d.int)(s.paddingLeft)+(0,d.int)(c.marginLeft),top:-i.offsetTop+(0,d.int)(s.paddingTop)+(0,d.int)(c.marginTop),right:(0,u.innerWidth)(l)-(0,u.outerWidth)(i)-i.offsetLeft+(0,d.int)(s.paddingRight)-(0,d.int)(c.marginRight),bottom:(0,u.innerHeight)(l)-(0,u.outerHeight)(i)-i.offsetTop+(0,d.int)(s.paddingBottom)-(0,d.int)(c.marginBottom)}}return(0,d.isNum)(a.right)&&(t=Math.min(t,a.right)),(0,d.isNum)(a.bottom)&&(n=Math.min(n,a.bottom)),(0,d.isNum)(a.left)&&(t=Math.max(t,a.left)),(0,d.isNum)(a.top)&&(n=Math.max(n,a.top)),[t,n]}function r(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]}function l(e){return"both"===e.props.axis||"x"===e.props.axis}function c(e){return"both"===e.props.axis||"y"===e.props.axis}function s(e,t,n){var a="number"==typeof t?(0,u.getTouch)(e,t):null;if("number"==typeof t&&!a)return null;var i=m(n),o=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,u.offsetXYFromParent)(a||e,o)}function p(e,t,n){var a=e.state,i=!(0,d.isNum)(a.lastX),o=m(e);return i?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:o,deltaX:t-a.lastX,deltaY:n-a.lastY,lastX:a.lastX,lastY:a.lastY,x:t,y:n}}function b(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function f(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function m(e){var t=a.default.findDOMNode(e);if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},function(e,h,g){"use strict";(function(n){Object.defineProperty(h,"__esModule",{value:!0});var u=function(){function n(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),a=o(g(6)),e=o(g(7)),c=o(g(4)),s=g(5),p=g(9),i=g(0),b=o(g(11));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},m=f.mouse,v=function(e){function o(){var e,t,d;r(this,o);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=d=l(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(a)))).state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},d.handleDragStart=function(e){if(d.props.onMouseDown(e),!d.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;var t=c.default.findDOMNode(d);if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var n=t.ownerDocument;if(!(d.props.disabled||!(e.target instanceof n.defaultView.Node)||d.props.handle&&!(0,s.matchesSelectorAndParentsTo)(e.target,d.props.handle,t)||d.props.cancel&&(0,s.matchesSelectorAndParentsTo)(e.target,d.props.cancel,t))){var a=(0,s.getTouchIdentifier)(e);d.setState({touchIdentifier:a});var i=(0,p.getControlPosition)(e,a,d);if(null!=i){var o=i.x,r=i.y,l=(0,p.createCoreData)(d,o,r);(0,b.default)("DraggableCore: handleDragStart: %j",l),(0,b.default)("calling",d.props.onStart),!1!==d.props.onStart(e,l)&&(d.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(n),d.setState({dragging:!0,lastX:o,lastY:r}),(0,s.addEvent)(n,m.move,d.handleDrag),(0,s.addEvent)(n,m.stop,d.handleDragStop))}}},d.handleDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=(0,p.getControlPosition)(e,d.state.touchIdentifier,d);if(null!=t){var n=t.x,a=t.y;if(Array.isArray(d.props.grid)){var i=n-d.state.lastX,o=a-d.state.lastY,r=(0,p.snapToGrid)(d.props.grid,i,o),l=u(r,2);if(i=l[0],o=l[1],!i&&!o)return;n=d.state.lastX+i,a=d.state.lastY+o}var c=(0,p.createCoreData)(d,n,a);if((0,b.default)("DraggableCore: handleDrag: %j",c),!1!==d.props.onDrag(e,c))d.setState({lastX:n,lastY:a});else try{d.handleDragStop(new MouseEvent("mouseup"))}catch(e){var s=document.createEvent("MouseEvents");s.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),d.handleDragStop(s)}}},d.handleDragStop=function(e){if(d.state.dragging){var t=(0,p.getControlPosition)(e,d.state.touchIdentifier,d);if(null!=t){var n=t.x,a=t.y,i=(0,p.createCoreData)(d,n,a),o=c.default.findDOMNode(d);o&&d.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(o.ownerDocument),(0,b.default)("DraggableCore: handleDragStop: %j",i),d.setState({dragging:!1,lastX:NaN,lastY:NaN}),d.props.onStop(e,i),o&&((0,b.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(o.ownerDocument,m.move,d.handleDrag),(0,s.removeEvent)(o.ownerDocument,m.stop,d.handleDragStop))}}},d.onMouseDown=function(e){return m=f.mouse,d.handleDragStart(e)},d.onMouseUp=function(e){return m=f.mouse,d.handleDragStop(e)},d.onTouchStart=function(e){return m=f.touch,d.handleDragStart(e)},d.onTouchEnd=function(e){return m=f.touch,d.handleDragStop(e)},l(d,t)}return d(o,a.default.Component),t(o,[{key:"componentWillUnmount",value:function(){var e=c.default.findDOMNode(this);if(e){var t=e.ownerDocument;(0,s.removeEvent)(t,f.mouse.move,this.handleDrag),(0,s.removeEvent)(t,f.touch.move,this.handleDrag),(0,s.removeEvent)(t,f.mouse.stop,this.handleDragStop),(0,s.removeEvent)(t,f.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(t)}}},{key:"render",value:function(){return a.default.cloneElement(a.default.Children.only(this.props.children),{style:(0,s.styleHacks)(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),o}();v.displayName="DraggableCore",v.propTypes={allowAnyClick:e.default.bool,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(e,t){if(!0===n.browser&&e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,className:i.dontSetMe,style:i.dontSetMe,transform:i.dontSetMe},v.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},h.default=v}).call(h,g(20))},function(e,t,n){"use strict";function a(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";var a=n(13).default;e.exports=a,e.exports.default=a,e.exports.DraggableCore=n(10).default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function n(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),b=l(n(6)),i=l(n(7)),o=l(n(4)),f=l(n(18)),m=n(5),v=n(9),r=n(0),h=l(n(10)),g=l(n(11));function l(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){function t(e){c(this,t);var d=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return d.onDragStart=function(e,t){if((0,g.default)("Draggable: onDragStart: %j",t),!1===d.props.onStart(e,(0,v.createDraggableData)(d,t)))return!1;d.setState({dragging:!0,dragged:!0})},d.onDrag=function(e,t){if(!d.state.dragging)return!1;(0,g.default)("Draggable: onDrag: %j",t);var n=(0,v.createDraggableData)(d,t),a={x:n.x,y:n.y};if(d.props.bounds){var i=a.x,o=a.y;a.x+=d.state.slackX,a.y+=d.state.slackY;var r=(0,v.getBoundPosition)(d,a.x,a.y),l=u(r,2),c=l[0],s=l[1];a.x=c,a.y=s,a.slackX=d.state.slackX+(i-a.x),a.slackY=d.state.slackY+(o-a.y),n.x=a.x,n.y=a.y,n.deltaX=a.x-d.state.x,n.deltaY=a.y-d.state.y}if(!1===d.props.onDrag(e,n))return!1;d.setState(a)},d.onDragStop=function(e,t){if(!d.state.dragging)return!1;if(!1===d.props.onStop(e,(0,v.createDraggableData)(d,t)))return!1;(0,g.default)("Draggable: onDragStop: %j",t);var n={dragging:!1,slackX:0,slackY:0};if(Boolean(d.props.position)){var a=d.props.position,i=a.x,o=a.y;n.x=i,n.y=o}d.setState(n)},d.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},d}return d(t,b.default.Component),a(t,[{key:"componentWillMount",value:function(){!this.props.position||this.props.onDrag||this.props.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}},{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&o.default.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(e){!e.position||this.props.position&&e.position.x===this.props.position.x&&e.position.y===this.props.position.y||this.setState({x:e.position.x,y:e.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var e,t={},n=null,a=!Boolean(this.props.position)||this.state.dragging,i=this.props.position||this.props.defaultPosition,o={x:(0,v.canDragX)(this)&&a?this.state.x:i.x,y:(0,v.canDragY)(this)&&a?this.state.y:i.y};this.state.isElementSVG?n=(0,m.createSVGTransform)(o):t=(0,m.createCSSTransform)(o);var r=this.props,l=r.defaultClassName,c=r.defaultClassNameDragging,s=r.defaultClassNameDragged,d=b.default.Children.only(this.props.children),u=(0,f.default)(d.props.className||"",l,(y(e={},c,this.state.dragging),y(e,s,this.state.dragged),e));return b.default.createElement(h.default,p({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),b.default.cloneElement(d,{className:u,style:p({},d.props.style,t),transform:n}))}}]),t}();C.displayName="Draggable",C.propTypes=p({},h.default.propTypes,{axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:r.dontSetMe,style:r.dontSetMe,transform:r.dontSetMe}),C.defaultProps=p({},h.default.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null}),t.default=C},function(e,t,n){"use strict";var F=n(1),T=n(2),I=n(8),D=n(15),N=n(3),B=n(16);e.exports=function(r,u){var n="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";function o(e){var t=e&&(n&&e[n]||e[a]);if("function"==typeof t)return t}var p="<<anonymous>>",e={array:t("array"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:l(),arrayOf:s,element:d(),instanceOf:f,node:g(),objectOf:v,oneOf:m,oneOfType:h,shape:y,exact:C};function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function b(e){this.message=e,this.stack=""}function i(c){if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV)var s={},d=0;function e(e,t,n,a,i,o,r){if(a=a||p,o=o||n,r!==N)if(u)T(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&"undefined"!=typeof console){var l=a+":"+n;!s[l]&&d<3&&(I(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",o,a),s[l]=!0,d++)}return null==t[n]?e?null===t[n]?new b("The "+i+" `"+o+"` is marked as required in `"+a+"`, but its value is `null`."):new b("The "+i+" `"+o+"` is marked as required in `"+a+"`, but its value is `undefined`."):null:c(t,n,a,i,o)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(l){function e(e,t,n,a,i,o){var r=e[t];return k(r)!==l?new b("Invalid "+a+" `"+i+"` of type `"+S(r)+"` supplied to `"+n+"`, expected `"+l+"`."):null}return i(e)}function l(){return i(F.thatReturnsNull)}function s(c){function e(e,t,n,a,i){if("function"!=typeof c)return new b("Property `"+i+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var o=e[t];if(!Array.isArray(o))return new b("Invalid "+a+" `"+i+"` of type `"+k(o)+"` supplied to `"+n+"`, expected an array.");for(var r=0;r<o.length;r++){var l=c(o,r,n,a,i+"["+r+"]",N);if(l instanceof Error)return l}return null}return i(e)}function d(){function e(e,t,n,a,i){var o=e[t];return r(o)?null:new b("Invalid "+a+" `"+i+"` of type `"+k(o)+"` supplied to `"+n+"`, expected a single ReactElement.")}return i(e)}function f(r){function e(e,t,n,a,i){if(!(e[t]instanceof r)){var o=r.name||p;return new b("Invalid "+a+" `"+i+"` of type `"+_(e[t])+"` supplied to `"+n+"`, expected instance of `"+o+"`.")}return null}return i(e)}function m(l){if(!Array.isArray(l))return"production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&I(!1,"Invalid argument supplied to oneOf, expected an instance of array."),F.thatReturnsNull;function e(e,t,n,a,i){for(var o=e[t],r=0;r<l.length;r++)if(c(o,l[r]))return null;return new b("Invalid "+a+" `"+i+"` of value `"+o+"` supplied to `"+n+"`, expected one of "+JSON.stringify(l)+".")}return i(e)}function v(s){function e(e,t,n,a,i){if("function"!=typeof s)return new b("Property `"+i+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var o=e[t],r=k(o);if("object"!==r)return new b("Invalid "+a+" `"+i+"` of type `"+r+"` supplied to `"+n+"`, expected an object.");for(var l in o)if(o.hasOwnProperty(l)){var c=s(o,l,n,a,i+"."+l,N);if(c instanceof Error)return c}return null}return i(e)}function h(r){if(!Array.isArray(r))return"production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&I(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),F.thatReturnsNull;for(var e=0;e<r.length;e++){var t=r[e];if("function"!=typeof t)return I(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",O(t),e),F.thatReturnsNull}function n(e,t,n,a,i){for(var o=0;o<r.length;o++){if(null==(0,r[o])(e,t,n,a,i,N))return null}return new b("Invalid "+a+" `"+i+"` supplied to `"+n+"`.")}return i(n)}function g(){function e(e,t,n,a,i){return w(e[t])?null:new b("Invalid "+a+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}return i(e)}function y(d){function e(e,t,n,a,i){var o=e[t],r=k(o);if("object"!==r)return new b("Invalid "+a+" `"+i+"` of type `"+r+"` supplied to `"+n+"`, expected `object`.");for(var l in d){var c=d[l];if(c){var s=c(o,l,n,a,i+"."+l,N);if(s)return s}}return null}return i(e)}function C(u){function e(e,t,n,a,i){var o=e[t],r=k(o);if("object"!==r)return new b("Invalid "+a+" `"+i+"` of type `"+r+"` supplied to `"+n+"`, expected `object`.");var l=D({},e[t],u);for(var c in l){var s=u[c];if(!s)return new b("Invalid "+a+" `"+i+"` key `"+c+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(u),null,"  "));var d=s(o,c,n,a,i+"."+c,N);if(d)return d}return null}return i(e)}function w(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(w);if(null===e||r(e))return!0;var t=o(e);if(!t)return!1;var n,a=t.call(e);if(t!==e.entries){for(;!(n=a.next()).done;)if(!w(n.value))return!1}else for(;!(n=a.next()).done;){var i=n.value;if(i&&!w(i[1]))return!1}return!0;default:return!1}}function E(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function k(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":E(t,e)?"symbol":t}function S(e){if(null==e)return""+e;var t=k(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function O(e){var t=S(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function _(e){return e.constructor&&e.constructor.name?e.constructor.name:p}return b.prototype=Error.prototype,e.checkPropTypes=B,e.PropTypes=e}},function(e,t,n){"use strict";var c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;function u(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function a(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}e.exports=a()?Object.assign:function(e,t){for(var n,a,i=u(e),o=1;o<arguments.length;o++){for(var r in n=Object(arguments[o]))s.call(n,r)&&(i[r]=n[r]);if(c){a=c(n);for(var l=0;l<a.length;l++)d.call(n,a[l])&&(i[a[l]]=n[a[l]])}}return i}},function(e,t,n){"use strict";if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV)var c=n(2),s=n(8),d=n(3),u={};function a(e,t,n,a,i){if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV)for(var o in e)if(e.hasOwnProperty(o)){var r;try{c("function"==typeof e[o],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",a||"React class",n,o,typeof e[o]),r=e[o](t,o,a,n,null,d)}catch(e){r=e}if(s(!r||r instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",a||"React class",n,o,typeof r),r instanceof Error&&!(r.message in u)){u[r.message]=!0;var l=i?i():"";s(!1,"Failed %s type: %s%s",n,r.message,null!=l?l:"")}}}e.exports=a},function(e,t,n){"use strict";var a=n(1),r=n(2),l=n(3);e.exports=function(){function e(e,t,n,a,i,o){o!==l&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n}},function(e,t,n){var a;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n))e.push(r.apply(null,n));else if("object"===a)for(var i in n)o.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}void 0!==e&&e.exports?e.exports=r:void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrefix=i,t.browserPrefixToKey=o,t.browserPrefixToStyle=r;var a=["Moz","Webkit","O","ms"];function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window||void 0===window.document)return"";var t=window.document.documentElement.style;if(e in t)return"";for(var n=0;n<a.length;n++)if(o(e,a[n])in t)return a[n];return""}function o(e,t){return t?""+t+l(e):e}function r(e,t){return t?"-"+t.toLowerCase()+"-"+e:e}function l(e){for(var t="",n=!0,a=0;a<e.length;a++)n?(t+=e[a].toUpperCase(),n=!1):"-"===e[a]?n=!0:t+=e[a];return t}t.default=i()},function(e,t){var n,a,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function c(t){if(a===clearTimeout)return clearTimeout(t);if((a===r||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{return a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{a="function"==typeof clearTimeout?clearTimeout:r}catch(e){a=r}}();var s,d=[],u=!1,p=-1;function b(){u&&s&&(u=!1,s.length?d=s.concat(d):p=-1,d.length&&f())}function f(){if(!u){var e=l(b);u=!0;for(var t=d.length;t;){for(s=d,d=[];++p<t;)s&&s[p].run();p=-1,t=d.length}s=null,u=!1,c(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new m(e,t)),1!==d.length||u||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}])},e.exports=a(n("vb110"),n("vb103"))},vb540:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M16.583 9.333V7.111c0-2.453-2.053-4.444-4.583-4.444-2.53 0-4.583 1.99-4.583 4.444v2.222H5.733c-.589 0-1.066.478-1.066 1.067v9.867c0 .589.477 1.066 1.066 1.066h12.534c.589 0 1.066-.477 1.066-1.066V10.4c0-.59-.477-1.067-1.066-1.067h-1.684ZM12 16.89c-1.013 0-1.834-.796-1.834-1.778s.82-1.778 1.834-1.778c1.013 0 1.833.796 1.833 1.778S13.013 16.89 12 16.89ZM9.158 9.333V7.111c0-1.52 1.274-2.756 2.842-2.756 1.567 0 2.841 1.236 2.841 2.756v2.222H9.159Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"BitableLockOutlined"}}))});t.a=c},vb773:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M22 3a1 1 0 0 0-1-1h-7a1 1 0 0 0 0 2h4.586l-6.293 6.293a1 1 0 0 0 1.414 1.414L20 5.414V10a1 1 0 1 0 2 0V3Z",fill:"currentColor"}),o.createElement("path",{d:"M4 5h6v2H4v13h16v-5.5h2V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"WindowNewOutlined"}}))});t.a=c},vb952:function(e,t,n){"use strict";var a=n("vb144"),i=n.n(a),o=n("vb103"),r=n("vb151");function l(e){return o.createElement("svg",i()({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o.createElement("path",{d:"M11.985 18.5c3.238 0 6.236-2.06 9.015-6.513C18.292 7.55 15.3 5.5 11.985 5.5 8.67 5.5 5.689 7.549 3 11.987c2.76 4.454 5.748 6.513 8.985 6.513ZM1.502 12.89a1.782 1.782 0 0 1 .023-1.838C4.428 6.017 7.915 3.5 11.984 3.5c4.086 0 7.594 2.538 10.523 7.614l.028.048c.296.519.294 1.16-.01 1.675-3.006 5.108-6.52 7.663-10.541 7.663-4.007 0-7.501-2.537-10.482-7.61ZM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8Zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",fill:"currentColor"}))}var c=o.forwardRef(function(e,t){return o.createElement(r.a,i()({icon:l},e,{ref:t,svgProps:{"data-icon":"VisibleOutlined"}}))});t.a=c}}]);
//# sourceMappingURL=//slardar.bytedance.net/api_v2/browser/jserr/get_sourcemap?bid=docs_pc&js_filename=c4ca4238a0b9.1b606cb501.chunk.js