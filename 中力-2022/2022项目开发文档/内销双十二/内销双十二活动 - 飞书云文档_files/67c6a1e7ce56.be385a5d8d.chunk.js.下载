(window.webpackJsonp=window.webpackJsonp||[]).push([["67c6a1e7ce56"],{vb1287:function(e,t,r){"use strict";r.r(t),r.d(t,"FloatFormulaEditorWrapper",function(){return a});var o,n=r("vb143"),i=r("vb103"),b=r.n(i),l=r("vb114"),u=r("vb127"),d=(r("vb147"),r("vb148"),r("vb152"),r("vb112"),r("vb164"),r("vb167"),r("vb113"),r("vb651")),v=r("vb185"),a=(r("vb129"),r("vb223"),r("vb214"),r("vb232"),r("vb187"),r("vb174"),r("vb225"),r("vb224"),r("vb128"),r("vb122"),r("vb115"),r("vb118"),r("vb119"),r("vb233"),r("vb234"),r("vb235"),r("vb123"),r("vb236"),r("vb193"),r("vb237"),r("vb155"),r("vb238"),r("vb124"),r("vb239"),r("vb111"),r("vb104"),r("vb159"),r("vb116"),r("vb120"),r("vb121"),r("vb117"),r("vb240"),r("vb134"),r("vb131"),r("vb226"),r("vb241"),r("vb110"),r("vb125"),r("vb242"),r("vb132"),r("vb227"),r("vb135"),r("vb228"),r("vb229"),r("vb133"),r("vb126"),r("vb243"),r("vb262"),r("vb244"),r("vb245"),r("vb246"),r("vb247"),r("vb194"),r("vb248"),r("vb249"),r("vb201"),r("vb260"),r("vb267"),r("vb250"),r("vb136"),r("vb251"),r("vb130"),r("vb252"),Object(v.b)(function(e){return{toggleFieldPanel:e.toolbarStore.toggleFieldPanel}})(o=Object(l.connect)(function(e,t){return{isOpenFormulaEditor:Object(n.zK)(e),formulaFieldId:Object(n.AK)(e),formulaTableId:Object(n.BK)(e),sourceTableId:Object(n.CK)(e)}},function(e){return Object(u.bindActionCreators)({toggleFormulaEditor:n.pK},e)})(o=function(t){function o(e){var r;return Object(n.ov)(this,o),(r=t.call(this,e)||this).resetEditor=function(){if(r.props.formulaFieldId&&r.props.formulaTableId){var e=r.props.bitableStore.base.getTableById(r.props.formulaTableId),t=e&&e.fields[r.props.formulaFieldId];Object(n.DK)(t)&&(r.editorRef&&r.editorRef.focus(),r.editorRef&&r.editorRef.onStartEdit(t.property.formula,!0)),r.setState(Object.assign({},r.calcPos()))}},r.handleDocumentClick=function(e){if(r.props.isOpenFormulaEditor){if(r.selfRef.contains(e.target))return;if(r.editorRef.preventOnEndEdit)return;r.endEdit()}},r.endEdit=function(e){r.props.toggleFormulaEditor&&r.props.toggleFormulaEditor("",!1,"")},r.setRef=function(e){r.editorRef=e,r.editorRef&&r.resetEditor()},r.setSelfRef=function(e){r.selfRef=e},r.calcPos=function(){var e=document.querySelector(".bitable-field");if(e||(e=document.querySelector(".card_edit_field_panel .b-field-popover")),e){var t=e.getBoundingClientRect();return{left:t.left,top:t.top+2}}return{top:0,left:0}},r.state={top:0,left:0},r}return Object(n.bu)(o,t),Object(n.Pw)(o,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDocumentClick,!0)}},{key:"componentDidUpdate",value:function(e){this.props.formulaFieldId&&this.props.formulaTableId&&this.props.isOpenFormulaEditor&&this.props.isOpenFormulaEditor!==e.isOpenFormulaEditor&&this.props.toggleFieldPanel&&this.props.toggleFieldPanel(!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleDocumentClick,!0)}},{key:"render",value:function(){if(!this.props.isOpenFormulaEditor||!this.props.formulaTableId)return null;if(this.props.sourceTableId!==this.props.tableId)return null;var e=this.state,t=e.top,r=e.left,o=this.props.formulaFieldId;return b.a.createElement("div",{className:"float-formula-editor-wrapper",style:{top:t,left:r},ref:this.setSelfRef},b.a.createElement(n.oK,{ref:this.setRef,tableId:this.props.formulaTableId,anchorRef:this.selfRef,renderer:this.props.renderer,bitableStore:this.props.bitableStore,viewId:this.props.viewId||"",editable:this.props.editable,endEdit:this.endEdit,fieldId:o,executeAction:this.props.bitableStore.executeCommandImmediately,fieldSetSource:n.iz.Toolbar,startMode:d.b.FULLSCREEN}))}}]),o}(i.Component))||o)||o)},vb651:function(e,t,r){"use strict";r.d(t,"a",function(){return d}),r.d(t,"b",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"d",function(){return i}),r.d(t,"e",function(){return p}),r.d(t,"f",function(){return v}),r.d(t,"g",function(){return a}),r.d(t,"h",function(){return s}),r.d(t,"i",function(){return f});var o,n,i,b,l,u=r("vb143"),d=632,v=530,a=420,s=150;function f(e){return!(e instanceof u.wI)&&e.type===o.Property}function p(e){return!(e instanceof u.wI)&&e.type!==o.Property}(o||(o={})).Property="property",(l=n||(n={})).SIMPLE="simple",l.ADVANCE="advance",l.FULLSCREEN="fullScreen",(b=i||(i={})).Left="left",b.Right="right"}}]);
//# sourceMappingURL=//slardar.bytedance.net/api_v2/browser/jserr/get_sourcemap?bid=docs_pc&js_filename=67c6a1e7ce56.be385a5d8d.chunk.js