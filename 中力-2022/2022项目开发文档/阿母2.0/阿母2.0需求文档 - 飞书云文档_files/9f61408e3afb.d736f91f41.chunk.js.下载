(window.webpackJsonp=window.webpackJsonp||[]).push([["9f61408e3afb"],{vb1286:function(e,m,d){"use strict";d.r(m),function(n){d.d(m,"FieldEditPanelFormula",function(){return i});var e,c=d("vb143"),t=d("vb103"),b=d.n(t),r=(d("vb147"),d("vb148"),d("vb152"),d("vb112"),d("vb164"),d("vb167"),d("vb113"),d("vb155"),d("vb116"),d("vb118"),d("vb120"),d("vb174"),d("vb119"),d("vb121"),d("vb117"),d("vb115"),d("vb111")),o=d("vb114"),a=d("vb127"),l=d("vb2166"),v=(d("vb129"),d("vb223"),d("vb214"),d("vb232"),d("vb187"),d("vb225"),d("vb224"),d("vb128"),d("vb122"),d("vb233"),d("vb234"),d("vb235"),d("vb123"),d("vb236"),d("vb193"),d("vb237"),d("vb238"),d("vb124"),d("vb239"),d("vb104"),d("vb159"),d("vb240"),d("vb134"),d("vb131"),d("vb226"),d("vb241"),d("vb110"),d("vb125"),d("vb242"),d("vb132"),d("vb227"),d("vb135"),d("vb228"),d("vb229"),d("vb133"),d("vb126"),d("vb243"),d("vb262"),d("vb244"),d("vb245"),d("vb246"),d("vb247"),d("vb194"),d("vb248"),d("vb249"),d("vb201"),d("vb260"),d("vb267"),d("vb250"),d("vb136"),d("vb251"),d("vb130"),d("vb252"),"bitable-formula-guide"),u=function(a){function i(){var e;Object(c.ov)(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))||this).handleClickHelper=function(){c.ob.collectBitableEvent(c.On.BitableFormulaHelpercenterUse)},e}return Object(c.bu)(i,a),Object(c.Pw)(i,[{key:"render",value:function(){return b.a.createElement(b.a.Fragment,null,b.a.createElement(r.Tooltip,{title:n("bitable.formula.guide.tooltip"),placement:"top",mouseEnterDelay:200},b.a.createElement("a",{className:"".concat(v,"-icon ").concat(v,"-tap-icon"),target:"_blank",href:n("bitable.formula.helpcenterlink"),rel:"noreferrer"},b.a.createElement(l.a,{onClick:this.handleClickHelper}))))}}]),i}(t.PureComponent),i=Object(o.connect)(null,function(e){return Object(a.bindActionCreators)({toggleFormulaEditor:c.pK},e)},null,{forwardRef:!0})(e=function(t){function r(e){var a;return Object(c.ov)(this,r),(a=t.call(this,e)||this).handleClickFormulaEditor=function(){var e=a.props,i=e.renderer,t=e.fromType,r=e.field;c.cz.collectBitableEvent(c.Bc.CcmBitableFomulaFieldFormatModifyClick,{click:"formula_generator",target:c.Rw.CcmBitableFomulaEasyModeView});var l=a.props.submit()||r.id;if(t!==c.gz.HeaderColumnEdit&&t!==c.gz.HeaderColumnAdd){var o=i.getActiveTableId();a.props.toggleFormulaEditor&&a.props.toggleFormulaEditor(a.props.tableId,!0,o,l)}else Object(c.lK)(function(){var e=i.getActiveView();if(e&&(e.type===c.az.Grid||e.type===c.az.Gantt)){var t=i.activeBitableWidget.getActiveWidget(),r=t;e.type===c.az.Gantt&&(r=t.getGridWidgetInGantt());var o=Math.max(0,e.getVisibleFields().indexOf(l||"")),a=new c.qK(0,o,1,1);r.setSelection(a),r.events.emit(c.pC.ClickToStartEditor,{cell:{row:0,col:o},teaSource:c.iz.Column})}})},a.onFormulaSelect=function(e){e&&c.cz.collectBitableEvent(c.Rw.CcmBitableFomulaFieldFormatModifyView)},a.onSelectFormatter=function(e){a.setState({isCurrencytFormatName:e===c.rK.CURRENCY},function(){a.props.updatePosition&&a.props.updatePosition()}),c.cz.collectBitableEvent(c.Bc.CcmBitableFomulaFieldFormatModifyClick,{click:e,target:c.oz})},a.defaultFormatName=c.rK.GENERAL,a.state={isCurrencytFormatName:Object(c.sK)(a.getFormatCode())},a}return Object(c.bu)(r,t),Object(c.Pw)(r,[{key:"componentDidMount",value:function(){var e,t=this,r=(null===(e=this.formatterRef)||void 0===e?void 0:e.getFormatName())===c.rK.CURRENCY;this.setState({isCurrencytFormatName:r},function(){t.props.updatePosition&&t.props.updatePosition()})}},{key:"getFormatCode",value:function(){var e,t,r,o,a=(null===(e=this.props)||void 0===e?void 0:e.field).property;return Object(c.sK)(null===(t=this.formatterRef)||void 0===t?void 0:t.getFormatCode())||Object(c.tK)(null==a?void 0:a.formatter)?(null===(r=this.currencyRef)||void 0===r?void 0:r.getFormatCode())||(null===(o=this.formatterRef)||void 0===o?void 0:o.getFormatCode()):this.formatterRef?this.formatterRef.getFormatCode():Object(c.uK)(this.defaultFormatName)}},{key:"getCurrencyCode",value:function(){return this.currencyRef?this.currencyRef.getCurrencyCode():null===(e=this.props.field)||void 0===e||null===(t=e.property)||void 0===t?void 0:t.currencyCode;var e,t}},{key:"render",value:function(){var t=this,e=this.props,r=e.field,o=e.sourceFieldType,a="",i=r.property,l=o===r.type||r.type===c.og.Lookup;return i&&l&&(a=i.formatter),b.a.createElement("div",null,b.a.createElement(c.vK,Object(c.Kx)({ref:function(e){return t.formatterRef=e}},this.props,{formatter:a,formatterNameList:Object(c.wK)(),defaultFormatName:n("bitable.formula.format_default"),title:n("bitable.formula.formatter"),toggleSelect:this.onFormulaSelect,onSelectFormatter:this.onSelectFormatter})),this.state.isCurrencytFormatName&&Object(c.xK)()&&b.a.createElement(c.yK,Object(c.Kx)({ref:function(e){return t.currencyRef=e}},this.props)),b.a.createElement("div",{className:"formula_edit_field"},b.a.createElement("div",{className:"formula_edit_entrance",onClick:this.handleClickFormulaEditor},n("bitable.formula.editor")),b.a.createElement(u,null)))}}]),r}(t.Component))||e}.call(this,d("vb163"))}}]);
//# sourceMappingURL=//slardar.bytedance.net/api_v2/browser/jserr/get_sourcemap?bid=docs_pc&js_filename=9f61408e3afb.d736f91f41.chunk.js